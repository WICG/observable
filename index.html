<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Observable</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 9a7a6709a, updated Tue May 27 16:45:34 2025 -0700" name="generator">
  <link href="https://wicg.github.io/observable/" rel="canonical">
  <meta content="512f17268511276c3b96286e696393d99eb39f79" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
/* Put nice boxes around each algorithm. */
[data-algorithm]:not(.heading) {
  padding: .5em;
  border: thin solid #ddd; border-radius: .5em;
  margin: .5em calc(-0.5em - 1px);
}
[data-algorithm]:not(.heading) > :first-child {
  margin-top: 0;
}
[data-algorithm]:not(.heading) > :last-child {
  margin-bottom: 0;
}
[data-algorithm] [data-algorithm] {
  margin: 1em 0;
}

.selected-text-file-an-issue {
  position: fixed;
  bottom: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.8);
  font-size: smaller;
  padding: 4px 10px;
  z-index: 4;
}

dfn var {
  font-style: italic;
}

table {
  margin: 1em 0;
}

/* WHATWG-style <hr>s, instead of WICG-style. Specific selector is necessary to override WICG styles. */
:not(.head) > :not(.head) + hr {
  display: block;
  background: none;
  border: none;
  padding: 0;
  margin: 3em 0;
  height: auto;
}
:not(.head) > :not(.head) + hr::before {
  content: none;
}

/* WHATWG-style element definition class */
.element {
  background: #EEFFEE;
}
dt {
  margin-top: 12px;
}
dl, dd {
  padding-left: .5em;
}

/* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}

/* .XXX from https://resources.whatwg.org/standard.css */
.XXX {
  color: #D50606;
  background: white;
  border: solid #D50606;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
<style>/* Boilerplate: style-wpt */
:root {
    --wpt-border: hsl(0, 0%, 60%);
    --wpt-bg: hsl(0, 0%, 95%);
    --wpt-text: var(--text);
    --wptheading-text: hsl(0, 0%, 30%);
}
@media (prefers-color-scheme: dark) {
    :root {
        --wpt-border: hsl(0, 0%, 30%);
        --wpt-bg: var(--borderedblock-bg);
        --wpt-text: var(--text);
        --wptheading-text: hsl(0, 0%, 60%);
    }
}
.wpt-tests-block {
    list-style: none;
    border-left: .5em solid var(--wpt-border);
    background: var(--wpt-bg);
    color: var(--wpt-text);
    margin: 1em auto;
    padding: .5em;
}
.wpt-tests-block summary {
    color: var(--wptheading-text);
    font-weight: normal;
    text-transform: uppercase;
}
.wpt-tests-block summary::marker{
    color: var(--wpt-border);
}
.wpt-tests-block summary:hover::marker{
    color: var(--wpt-text);
}
/*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
.wpt-tests-block:not([open]){
    padding: 0;
    border: none;
    background: none;
    font-size: 0.75em;
    line-height: 1;
    position: relative;
    margin: 1em 0 0;
}
.wpt-tests-block:not([open]) summary {
    position: absolute;
    right: 0;
    bottom: 0;
}
/*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
.wpt-tests-block:not([open]):last-child {
    padding-bottom: 1px;
    margin-bottom: -1px;
}
/*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
li:not(:last-child) > .wpt-tests-block:not([open]):last-child,
dd:not(:last-child) > .wpt-tests-block:not([open]):last-child {
    padding-bottom: 0;
    margin-bottom: 0;
}
.wpt-tests-block:not([open]):not(:hover){
    opacity: 0.5;
}
.wpt-tests-list {
    list-style: none;
    display: grid;
    margin: 0;
    padding: 0;
    grid-template-columns: 1fr max-content auto auto;
    grid-column-gap: .5em;
}
.wpt-tests-block hr:last-child {
    display: none;
}
.wpt-test {
    display: contents;
}
.wpt-test > a {
    text-decoration: underline;
    border: none;
}
.wpt-test > .wpt-name { grid-column: 1; }
.wpt-test > .wpt-results { grid-column: 2; }
.wpt-test > .wpt-live { grid-column: 3; }
.wpt-test > .wpt-source { grid-column: 4; }

.wpt-test > .wpt-results {
    display: flex;
    gap: .1em;
}
.wpt-test .wpt-result {
    display: inline-block;
    height: 1em;
    width: 1em;
    border-radius: 50%;
    position: relative;
}
</style>
 <body class="h-entry">
  <div class="head">
   <h1 class="p-name no-ref" id="title">Observable</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2025-06-06">6 June 2025</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/observable/">https://wicg.github.io/observable/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domfarolino.com">Dominic Farolino</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:domfarolino@gmail.com">domfarolino@gmail.com</a>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/observable">GitHub WICG/observable</a> (<a href="https://github.com/WICG/observable/issues/new">new issue</a>, <a href="https://github.com/WICG/observable/issues?state=open">open issues</a>)
     <dt>Commits:
     <dd><a href="https://github.com/WICG/observable/commits/master/spec.bs">GitHub spec.bs commits</a>
     <dt>Test Suite:
     <dd class="wpt-overview"><a href="https://wpt.fyi/results/dom/observable/">https://wpt.fyi/results/dom/observable/</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 the Contributors to the Observable Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The Observable API provides a composable, ergonomic way of handling an asynchronous stream of events</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#core-infrastructure"><span class="secno">2</span> <span class="content">Core infrastructure</span></a>
     <ol class="toc">
      <li><a href="#subscriber-api"><span class="secno">2.1</span> <span class="content">The <code class="idl"><span>Subscriber</span></code> interface</span></a>
      <li>
       <a href="#observable-api"><span class="secno">2.2</span> <span class="content">The <code class="idl"><span>Observable</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#observable-supporting-concepts"><span class="secno">2.2.1</span> <span class="content">Supporting concepts</span></a>
       </ol>
      <li>
       <a href="#operators"><span class="secno">2.3</span> <span class="content">Operators</span></a>
       <ol class="toc">
        <li><a href="#observable-from"><span class="secno">2.3.1</span> <span class="content"><code class="idl"><span>from()</span></code></span></a>
        <li><a href="#observable-returning-operators"><span class="secno">2.3.2</span> <span class="content"><code class="idl"><span>Observable</span></code>-returning operators</span></a>
        <li><a href="#promise-returning-operators"><span class="secno">2.3.3</span> <span class="content"><code class="idl"><span>Promise</span></code>-returning operators</span></a>
       </ol>
     </ol>
    <li><a href="#event-target-integration"><span class="secno">3</span> <span class="content"><code class="idl"><span>EventTarget</span></code> integration</span></a>
    <li><a href="#security-and-privacy"><span class="secno">4</span> <span class="content">Security &amp; Privacy Considerations</span></a>
    <li><a href="#acks"><span class="secno">5</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <script async src="https://resources.whatwg.org/file-issue.js"></script>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <h2 class="heading settled" data-level="2" id="core-infrastructure"><span class="secno">2. </span><span class="content">Core infrastructure</span><a class="self-link" href="#core-infrastructure"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="subscriber-api"><span class="secno">2.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber">Subscriber</a></code> interface</span><a class="self-link" href="#subscriber-api"></a></h3>
<pre class="idl highlight def">[Exposed=*]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="subscriber"><code><c- g>Subscriber</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next"><c- g>next</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/next(value)" data-dfn-type="argument" data-export id="dom-subscriber-next-value-value"><code><c- g>value</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error"><c- g>error</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/error(error)" data-dfn-type="argument" data-export id="dom-subscriber-error-error-error"><code><c- g>error</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete"><c- g>complete</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-addteardown" id="ref-for-dom-subscriber-addteardown"><c- g>addTeardown</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/addTeardown(teardown)" data-dfn-type="argument" data-export id="dom-subscriber-addteardown-teardown-teardown"><code><c- g>teardown</c-></code></dfn>);

  // True after the Subscriber is created, up until either
  // complete()/error() are invoked, or the subscriber unsubscribes. Inside
  // complete()/error(), this attribute is true.
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-subscriber-active" id="ref-for-dom-subscriber-active"><c- g>active</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-subscriber-signal" id="ref-for-dom-subscriber-signal"><c- g>signal</c-></a>;
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①">Subscriber</a></code> has an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport id="subscriber-internal-observers">internal observers</dfn>,
initially empty.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②">Subscriber</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport id="subscriber-teardown-callbacks">teardown callbacks</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction①">VoidFunction</a></code>s, initially empty.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber③">Subscriber</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport id="subscriber-subscription-controller">subscription controller</dfn>, which is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller">AbortController</a></code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber④">Subscriber</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport id="subscriber-active">active</dfn> boolean, initially true.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This is a bookkeeping variable to ensure that a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑤">Subscriber</a></code> never calls any of the
callbacks it owns after it has been <a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription">closed</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="attribute" data-export id="dom-subscriber-active"><code>active</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active">active</a> boolean.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="attribute" data-export id="dom-subscriber-signal"><code>signal</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal">signal</a>.</p>
   <div class="algorithm" data-algorithm="next(value)" data-algorithm-for="Subscriber">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export id="dom-subscriber-next"><code>next(<var>value</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active①">active</a> is false, then return.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>observer</var> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers">internal observers</a>:</p>
      <ol>
       <li data-md>
        <p>Run <var>observer</var>’s <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps">next steps</a> given <var>value</var>.</p>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: No <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown">exception was thrown</a>.</p>
        <div class="note" role="note">
         <p>Note: No exception can be thrown here because in the case where the <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers①">internal observer</a>’s <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①">next steps</a> is just a wrapper
    around a script-provided callback, the <a href="#process-observer">process observer</a> steps take care to wrap these callbacks in logic that, when invoking them, catches any
    exceptions, and reports them to the global.</p>
         <p>When the <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②">next steps</a> is a spec algorithm, those steps take care
    to not throw any exceptions outside of itself, to appease this assert.</p>
        </div>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="error(error)" data-algorithm-for="Subscriber">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export id="dom-subscriber-error"><code>error(<var>error</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active②">active</a> is false, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception" id="ref-for-report-an-exception">report an exception</a> with <var>error</var> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>, then return.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a>, then return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription①">Close</a> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>observer</var> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers②">internal observers</a>:</p>
      <ol>
       <li data-md>
        <p>Run <var>observer</var>’s <a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps">error steps</a> given <var>error</var>.</p>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: No <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①">exception was thrown</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> See the documentation in <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①">next()</a></code> for details on why this is true.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="complete()" data-algorithm-for="Subscriber">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export id="dom-subscriber-complete"><code>complete()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active③">active</a> is false, then return.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window②">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active②">fully active</a>, then return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription②">Close</a> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>observer</var> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers③">internal observers</a>:</p>
      <ol>
       <li data-md>
        <p>Run <var>observer</var>’s <a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps">complete steps</a>.</p>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: No <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown②">exception was thrown</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> See the documentation in <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next②">next()</a></code> for details on why this is true.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="addTeardown(teardown)" data-algorithm-for="Subscriber">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export id="dom-subscriber-addteardown"><code>addTeardown(<var>teardown</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window③">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active③">fully active</a>, then return.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active④">active</a> is true, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> <var>teardown</var> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>’s <a data-link-type="dfn" href="#subscriber-teardown-callbacks" id="ref-for-subscriber-teardown-callbacks">teardown callbacks</a> list.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function">invoke</a> <var>teardown</var> with «» and "<code>report</code>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="close a subscription">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="close-a-subscription">close a subscription</dfn> given a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑥">Subscriber</a></code> <var>subscriber</var>, and an optional <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②">any</a></code> <var>reason</var>, run these steps: 
    <ol>
     <li data-md>
      <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active⑤">active</a> is false, then return.</p>
      <div class="note" role="note">
       <p>This guards against re-entrant invocation, which can happen in the "producer-initiated"
   unsubscription case. Consider the following example:</p>
       <div class="example" id="re-entrant-close">
        <a class="self-link" href="#re-entrant-close"></a> 
<pre class="highlight"><c- a>const</c-> outerController <c- o>=</c-> <c- ow>new</c-> AbortController<c- p>();</c->
<c- a>const</c-> observable <c- o>=</c-> <c- ow>new</c-> Observable<c- p>(</c->subscriber <c- p>=></c-> <c- p>{</c->
  subscriber<c- p>.</c->addTeardown<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
    <c- c1>// 2.) This teardown executes inside the "Close" algorithm, while it’s</c->
    <c- c1>//     running. Aborting the downstream signal run its abort algorithms,</c->
    <c- c1>//     one of which is the currently-running "Close" algorithm.</c->
    outerController<c- p>.</c->abort<c- p>();</c->
  <c- p>});</c->

  <c- c1>// 1.) This immediately invokes the "Close" algorithm, which</c->
  <c- c1>//     sets subscriber.active to false.</c->
  subscriber<c- p>.</c->complete<c- p>();</c->
<c- p>});</c->

observable<c- p>.</c->subscribe<c- p>({},</c-> <c- p>{</c->signal<c- o>:</c-> outerController<c- p>.</c->signal<c- p>});</c->
</pre>
       </div>
      </div>
     <li data-md>
      <p>Set <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active⑥">active</a> boolean to false.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort">Signal abort</a> <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①">subscription controller</a> with <var>reason</var>, if it is given.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>teardown</var> of <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-teardown-callbacks" id="ref-for-subscriber-teardown-callbacks①">teardown callbacks</a> sorted in
 reverse insertion order:</p>
      <ol>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window④">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window④">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active④">fully active</a>, then abort these steps.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This step runs repeatedly because each <var>teardown</var> could result in the above <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> becoming inactive.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①">Invoke</a> <var>teardown</var> with «» and "<code>report</code>".</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="observable-api"><span class="secno">2.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable">Observable</a></code> interface</span><a class="self-link" href="#observable-api"></a></h3>
<pre class="idl highlight def">// SubscribeCallback is where the Observable "creator's" code lives. It's
// called when subscribe() is called, to set up a new subscription.
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-subscribecallback"><code><c- g>SubscribeCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#subscriber" id="ref-for-subscriber⑦"><c- n>Subscriber</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscribeCallback" data-dfn-type="argument" data-export id="dom-subscribecallback-subscriber"><code><c- g>subscriber</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-observablesubscriptioncallback"><code><c- g>ObservableSubscriptionCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableSubscriptionCallback" data-dfn-type="argument" data-export id="dom-observablesubscriptioncallback-value"><code><c- g>value</c-></code></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-subscriptionobserver"><code><c- g>SubscriptionObserver</c-></code></dfn> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-subscriptionobserver-next"><code><c- g>next</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback①"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-subscriptionobserver-error"><code><c- g>error</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction②"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-subscriptionobserver-complete"><code><c- g>complete</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-observableinspectoraborthandler"><code><c- g>ObservableInspectorAbortHandler</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any④"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspectorAbortHandler" data-dfn-type="argument" data-export id="dom-observableinspectoraborthandler-value"><code><c- g>value</c-></code></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-observableinspector"><code><c- g>ObservableInspector</c-></code></dfn> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback②"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-observableinspector-next"><code><c- g>next</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback③"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-observableinspector-error"><code><c- g>error</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction③"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-observableinspector-complete"><code><c- g>complete</c-></code></dfn>;

  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction④"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-observableinspector-subscribe"><code><c- g>subscribe</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observableinspectoraborthandler" id="ref-for-callbackdef-observableinspectoraborthandler"><c- n>ObservableInspectorAbortHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableInspectorAbortHandler" id="dom-observableinspector-abort"><code><c- g>abort</c-></code></dfn>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback④"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-subscriptionobserver" id="ref-for-dictdef-subscriptionobserver"><c- n>SubscriptionObserver</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-observerunion"><code><c- g>ObserverUnion</c-></code></dfn>;
<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑤"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-observableinspector" id="ref-for-dictdef-observableinspector"><c- n>ObservableInspector</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-observableinspectorunion"><code><c- g>ObservableInspectorUnion</c-></code></dfn>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-subscribeoptions"><code><c- g>SubscribeOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscribeOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-subscribeoptions-signal"><code><c- g>signal</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-predicate"><code><c- g>Predicate</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑤"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Predicate" data-dfn-type="argument" data-export id="dom-predicate-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Predicate" data-dfn-type="argument" data-export id="dom-predicate-index"><code><c- g>index</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-reducer"><code><c- g>Reducer</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑥"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑦"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-accumulator"><code><c- g>accumulator</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑧"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-currentvalue"><code><c- g>currentValue</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-index"><code><c- g>index</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-mapper"><code><c- g>Mapper</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑨"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⓪"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Mapper" data-dfn-type="argument" data-export id="dom-mapper-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long②"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Mapper" data-dfn-type="argument" data-export id="dom-mapper-index"><code><c- g>index</c-></code></dfn>);
// Differs from Mapper only in return type, since this callback is exclusively
// used to visit each element in a sequence, not transform it.
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-visitor"><code><c- g>Visitor</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑦"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Visitor" data-dfn-type="argument" data-export id="dom-visitor-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long③"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Visitor" data-dfn-type="argument" data-export id="dom-visitor-index"><code><c- g>index</c-></code></dfn>);

// This callback returns an `any` that must convert into an `Observable`, via
// the `Observable` conversion semantics.
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-catchcallback"><code><c- g>CatchCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①②"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①③"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CatchCallback" data-dfn-type="argument" data-export id="dom-catchcallback-value"><code><c- g>value</c-></code></dfn>);

[Exposed=*]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="observable"><code><c- g>Observable</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-observable-observable" id="ref-for-dom-observable-observable"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback"><c- n>SubscribeCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/Observable(callback), Observable/constructor(callback)" data-dfn-type="argument" data-export id="dom-observable-observable-callback-callback"><code><c- g>callback</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑧"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe"><c- g>subscribe</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion"><c- n>ObserverUnion</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/subscribe(observer, options), Observable/subscribe(observer), Observable/subscribe()" data-dfn-type="argument" data-export id="dom-observable-subscribe-observer-options-observer"><code><c- g>observer</c-></code></dfn> = {}, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/subscribe(observer, options), Observable/subscribe(observer), Observable/subscribe()" data-dfn-type="argument" data-export id="dom-observable-subscribe-observer-options-options"><code><c- g>options</c-></code></dfn> = {});

  // Constructs a native Observable from value if it's any of the following:
  //   - Observable
  //   - AsyncIterable
  //   - Iterable
  //   - Promise
  <c- b>static</c-> <a data-link-type="idl-name" href="#observable" id="ref-for-observable①"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-from" id="ref-for-dom-observable-from"><c- g>from</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①④"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/from(value)" data-dfn-type="argument" data-export id="dom-observable-from-value-value"><code><c- g>value</c-></code></dfn>);

  // Observable-returning operators. See "Operators" section in the spec.
  //
  // takeUntil() can consume promises, iterables, async iterables, and other
  // observables.
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable②"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-takeuntil" id="ref-for-dom-observable-takeuntil"><c- g>takeUntil</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑤"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/takeUntil(value)" data-dfn-type="argument" data-export id="dom-observable-takeuntil-value-value"><code><c- g>value</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable③"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-map" id="ref-for-dom-observable-map"><c- g>map</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/map(mapper)" data-dfn-type="argument" data-export id="dom-observable-map-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable④"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-filter" id="ref-for-dom-observable-filter"><c- g>filter</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/filter(predicate)" data-dfn-type="argument" data-export id="dom-observable-filter-predicate-predicate"><code><c- g>predicate</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑤"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-take" id="ref-for-dom-observable-take"><c- g>take</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long④"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/take(amount)" data-dfn-type="argument" data-export id="dom-observable-take-amount-amount"><code><c- g>amount</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑥"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-drop" id="ref-for-dom-observable-drop"><c- g>drop</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑤"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/drop(amount)" data-dfn-type="argument" data-export id="dom-observable-drop-amount-amount"><code><c- g>amount</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑦"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-flatmap" id="ref-for-dom-observable-flatmap"><c- g>flatMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper①"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/flatMap(mapper)" data-dfn-type="argument" data-export id="dom-observable-flatmap-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑧"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-switchmap" id="ref-for-dom-observable-switchmap"><c- g>switchMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper②"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/switchMap(mapper)" data-dfn-type="argument" data-export id="dom-observable-switchmap-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑨"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-inspect" id="ref-for-dom-observable-inspect"><c- g>inspect</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observableinspectorunion" id="ref-for-typedefdef-observableinspectorunion"><c- n>ObservableInspectorUnion</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/inspect(inspectorUnion), Observable/inspect()" data-dfn-type="argument" data-export id="dom-observable-inspect-inspectorunion-inspectorunion"><code><c- g>inspectorUnion</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable①⓪"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-catch" id="ref-for-dom-observable-catch"><c- g>catch</c-></a>(<a data-link-type="idl-name" href="#callbackdef-catchcallback" id="ref-for-callbackdef-catchcallback"><c- n>CatchCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/catch(callback)" data-dfn-type="argument" data-export id="dom-observable-catch-callback-callback"><code><c- g>callback</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable①①"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-finally" id="ref-for-dom-observable-finally"><c- g>finally</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑤"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/finally(callback)" data-dfn-type="argument" data-export id="dom-observable-finally-callback-callback"><code><c- g>callback</c-></code></dfn>);

  // Promise-returning operators.
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑥"><c- b>any</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-observable-toarray" id="ref-for-dom-observable-toarray"><c- g>toArray</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/toArray(options), Observable/toArray()" data-dfn-type="argument" data-export id="dom-observable-toarray-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑨"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-foreach" id="ref-for-dom-observable-foreach"><c- g>forEach</c-></a>(<a data-link-type="idl-name" href="#callbackdef-visitor" id="ref-for-callbackdef-visitor"><c- n>Visitor</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/forEach(callback, options), Observable/forEach(callback)" data-dfn-type="argument" data-export id="dom-observable-foreach-callback-options-callback"><code><c- g>callback</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/forEach(callback, options), Observable/forEach(callback)" data-dfn-type="argument" data-export id="dom-observable-foreach-callback-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-every" id="ref-for-dom-observable-every"><c- g>every</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate①"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/every(predicate, options), Observable/every(predicate)" data-dfn-type="argument" data-export id="dom-observable-every-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions③"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/every(predicate, options), Observable/every(predicate)" data-dfn-type="argument" data-export id="dom-observable-every-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑦"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-first" id="ref-for-dom-observable-first"><c- g>first</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions④"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/first(options), Observable/first()" data-dfn-type="argument" data-export id="dom-observable-first-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑧"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-last" id="ref-for-dom-observable-last"><c- g>last</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑤"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/last(options), Observable/last()" data-dfn-type="argument" data-export id="dom-observable-last-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑨"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-find" id="ref-for-dom-observable-find"><c- g>find</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate②"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/find(predicate, options), Observable/find(predicate)" data-dfn-type="argument" data-export id="dom-observable-find-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑥"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/find(predicate, options), Observable/find(predicate)" data-dfn-type="argument" data-export id="dom-observable-find-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-some" id="ref-for-dom-observable-some"><c- g>some</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate③"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/some(predicate, options), Observable/some(predicate)" data-dfn-type="argument" data-export id="dom-observable-some-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑦"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/some(predicate, options), Observable/some(predicate)" data-dfn-type="argument" data-export id="dom-observable-some-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⓪"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-reduce" id="ref-for-dom-observable-reduce"><c- g>reduce</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reducer" id="ref-for-callbackdef-reducer"><c- n>Reducer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-reducer"><code><c- g>reducer</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-initialvalue"><code><c- g>initialValue</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑧"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①②">Observable</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport id="observable-subscribe-callback">subscribe callback</dfn>, which is a <code class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback①">SubscribeCallback</a></code> or a set of steps that take in a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑧">Subscriber</a></code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①③">Observable</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport id="observable-weak-subscriber">weak subscriber</dfn>, which is a weak reference to a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑨">Subscriber</a></code>-or-null, initially null.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The "union" of these types is to support both <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①④">Observable</a></code>s created by JavaScript (that are
always constructed with a <code class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback②">SubscribeCallback</a></code>), and natively-constructed <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑤">Observable</a></code> objects
(whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback">subscribe callback</a> could be an arbitrary set of native steps, not a JavaScript
callback). The return value of <code class="idl"><a data-link-type="idl" href="#dom-eventtarget-when" id="ref-for-dom-eventtarget-when">when()</a></code> is an example of the latter.</p>
   <div class="algorithm" data-algorithm="Observable(callback)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="constructor" data-export data-lt="Observable(callback)|constructor(callback)" id="dom-observable-observable"><code>new
  Observable(<var>callback</var>)</code></dfn> constructor steps are: 
    <ol>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>’s <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①">subscribe callback</a> to <var>callback</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This callback will get invoked later when <code class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe①">subscribe()</a></code> is called.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="subscribe(observer, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="subscribe(observer, options)|subscribe(observer)|subscribe()" id="dom-observable-subscribe"><code>subscribe(<var>observer</var>, <var>options</var>)</code></dfn> method steps
  are: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a> given <var>observer</var> and <var>options</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.2.1" id="observable-supporting-concepts"><span class="secno">2.2.1. </span><span class="content">Supporting concepts</span><a class="self-link" href="#observable-supporting-concepts"></a></h4>
   <div class="algorithm" data-algorithm="default error algorithm">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-error-algorithm">default error algorithm</dfn> is an algorithm that takes an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②②">any</a></code> <var>error</var>, and runs
  these steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception" id="ref-for-report-an-exception①">Report an exception</a> with <var>error</var> and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global">global object</a>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> We pull this default out separately so that every place in this specification that natively <a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①">subscribes</a> to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑥">Observable</a></code> (i.e.,
  subscribes from spec prose, not going through the <code class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe②">subscribe()</a></code> method) doesn’t have
  to redundantly define these steps.</p>
   </div>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="internal-observer">internal observer</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport id="internal-observer-next-steps">next steps</dfn>
    <dd data-md>
     <p>An algorithm that takes a single parameter of type <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②③">any</a></code>. Initially, these steps do nothing.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport id="internal-observer-error-steps">error steps</dfn>
    <dd data-md>
     <p>An algorithm that takes a single parameter of type <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②④">any</a></code>. Initially, the <a data-link-type="dfn" href="#default-error-algorithm" id="ref-for-default-error-algorithm">default error algorithm</a>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport id="internal-observer-complete-steps">complete steps</dfn>
    <dd data-md>
     <p>An algorithm with no parameters. Initially, these steps do nothing.</p>
   </dl>
   <div class="note" role="note">
    <p>The <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer">internal observer</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a> is used to mirror the <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next">next</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error">error</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete">complete</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function">callback functions</a>. For
  any <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑦">Observable</a></code> that is subscribed by JavaScript via the <code class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe③">subscribe()</a></code> method,
  these algorithm "steps" will just be a wrapper around <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function②">invoking</a> the corresponding <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next①">next</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error①">error</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete①">complete</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function①">callback functions</a> provided by script.</p>
    <p>But when internal spec prose (not user script) <a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②">subscribes</a> to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑧">Observable</a></code>, these "steps" are arbitrary spec algorithms that
  are not provided via an <code class="idl"><a data-link-type="idl" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion①">ObserverUnion</a></code> packed with Web IDL <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function②">callback functions</a>. See the <a href="#promise-returning-operators">§ 2.3.3 Promise-returning operators</a> that make use of this, for example.</p>
   </div>
   <div class="algorithm" data-algorithm="convert to an Observable" data-algorithm-for="Observable">
     To <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport id="observable-convert-to-an-observable">convert to an Observable</dfn> an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑤">any</a></code> <var>value</var>, run these steps: 
    <p class="note" role="note"><span class="marker">Note:</span> We split this algorithm out from the Web IDL <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from①">from()</a></code> method, so that spec
  prose can <a data-link-type="dfn" href="#observable-convert-to-an-observable" id="ref-for-observable-convert-to-an-observable">convert</a> values to without going
  through the Web IDL bindings.</p>
    <ol>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is not <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-type" id="ref-for-sec-object-type">Object</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This prevents primitive types from being coerced into iterables (e.g., String). See
 discussion in <a href="https://github.com/WICG/observable/issues/125">WICG/observable#125</a>.</p>
     <li data-md>
      <p><i id="from-observable-conversion"><b>From Observable</b></i>: If <var>value</var>’s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-specific-type" id="ref-for-dfn-specific-type">specific type</a> is an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑨">Observable</a></code>, then return <var>value</var>.</p>
     <li data-md>
      <p><i id="from-async-iterable-conversion"><b>From async iterable</b></i>: Let <var>asyncIteratorMethod</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" id="ref-for-sec-returnifabrupt-shorthands">?</a> <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" id="ref-for-sec-getmethod">GetMethod</a>(<var>value</var>, <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols">%Symbol.asyncIterator%</a></code>).</p>
      <p class="note" role="note"><span class="marker">Note:</span> We use <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" id="ref-for-sec-getmethod①">GetMethod</a> instead of <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" id="ref-for-sec-getiterator">GetIterator</a> because we’re only probing for async
 iterator protocol support, and we don’t want to throw if it’s not implemented. <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" id="ref-for-sec-getiterator①">GetIterator</a> throws errors in BOTH of the following cases: (a) no iterator protocol is
 implemented, (b) an iterator protocol is implemented, but isn’t callable or its getter
 throws. <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" id="ref-for-sec-getmethod②">GetMethod</a> lets us ONLY throw in the latter case.</p>
     <li data-md>
      <p>If <var>asyncIteratorMethod</var>’s is undefined or null, then jump to the step labeled <a href="#from-iterable-conversion">From iterable</a>.</p>
     <li data-md>
      <p>Let <var>nextAlgorithm</var> be the following steps, given a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⓪">Subscriber</a></code> <var>subscriber</var> and an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iterator-records" id="ref-for-sec-iterator-records">Iterator Record</a> <var>iteratorRecord</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted">aborted</a>, then return.</p>
       <li data-md>
        <p>Let <var>nextPromise</var> be a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑧">Promise</a></code>-or-undefined, initially undefined.</p>
       <li data-md>
        <p>Let <var>nextCompletion</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext" id="ref-for-sec-iteratornext">IteratorNext</a>(<var>iteratorRecord</var>).</p>
        <p class="note" role="note"><span class="marker">Note:</span> We use <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext" id="ref-for-sec-iteratornext①">IteratorNext</a> here instead of <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue" id="ref-for-sec-iteratorstepvalue">IteratorStepValue</a>, because <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue" id="ref-for-sec-iteratorstepvalue①">IteratorStepValue</a> expects the iterator’s <code>next()</code> method to return an object that
  can immediately be inspected for a value, whereas in the async iterator case, <code>next()</code> is expected to return a Promise/thenable (which we wrap in a Promise and react to to get
  that value).</p>
       <li data-md>
        <p>If <var>nextCompletion</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type">throw completion</a>, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <var>iteratorRecord</var>’s [[Done]] is true.</p>
         <li data-md>
          <p>Set <var>nextPromise</var> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> <var>nextRecord</var>’s [[Value]].</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>nextRecord</var> is <a data-link-type="dfn" data-refhint-key="ac8707c1" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type①">normal completion</a>, then set <var>nextPromise</var> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> <var>nextRecord</var>’s [[Value]].</p>
        <p class="note" role="note"><span class="marker">Note:</span> This is done in case <var>nextRecord</var>’s [[Value]] is not <em>itself</em> already a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑨">Promise</a></code>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled">React</a> to <var>nextPromise</var>:</p>
        <ul>
         <li data-md>
          <p>If <var>nextPromise</var> was fulfilled with value <var>iteratorResult</var>, then:</p>
          <ol>
           <li data-md>
            <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values①">Type</a>(<var>iteratorResult</var>) is not Object, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①">error()</a></code> method with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code> and abort these steps.</p>
           <li data-md>
            <p>Let <var>done</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete" id="ref-for-sec-iteratorcomplete">IteratorComplete</a>(<var>iteratorResult</var>).</p>
           <li data-md>
            <p>If <var>done</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type②">throw completion</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②">error()</a></code> method with <var>done</var>’s [[Value]] and abort these steps.</p>
           <li data-md>
            <p>If <var>done</var>’s [[Value]] is true, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①">complete()</a></code> and abort these steps.</p>
           <li data-md>
            <p>Let <var>value</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue" id="ref-for-sec-iteratorvalue">IteratorValue</a>(<var>iteratorResult</var>).</p>
           <li data-md>
            <p>If <var>value</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type③">throw completion</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③">error()</a></code> method with <var>value</var>’s [[Value]] and abort these steps.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next③">next()</a></code> given <var>value</var>’s [[Value]].</p>
           <li data-md>
            <p>Run <var>nextAlgorithm</var> given <var>subscriber</var> and <var>iteratorRecord</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>nextPromise</var> was rejected with reason <var>r</var>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error④">error()</a></code> method given <var>r</var>.</p>
        </ul>
      </ol>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⓪">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback②">subscribe callback</a> is an algorithm that
 takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①①">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller③">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①">aborted</a>, then return.</p>
       <li data-md>
        <p>Let <var>iteratorRecordCompletion</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" id="ref-for-sec-getiterator②">GetIterator</a>(<var>value</var>, async).</p>
        <p class="note" role="note"><span class="marker">Note:</span> This both re-invokes any <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols①">%Symbol.asyncIterator%</a></code> method getters on <var>value</var>—note
  that whether this is desirable is an extreme corner case, but it matches test
  expectations; see <a href="https://github.com/WICG/observable/issues/127">issue#127</a> for
  discussion—and invokes the protocol itself to obtain an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iterator-records" id="ref-for-sec-iterator-records①">Iterator Record</a>.</p>
       <li data-md>
        <p>If <var>iteratorRecordCompletion</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type④">throw completion</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑤">error()</a></code> method with <var>iteratorRecordCompletion</var>’s [[Value]] and abort these
  steps.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This means we invoke the <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑥">error()</a></code> method synchronously with respect to
  subscription, which is the only time this can happen for async iterables that are
  converted to <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②①">Observable</a></code>s. In all other cases, errors are propagated to the observer
  asynchronously, with microtask timing, by virtue of being wrapped in a rejected <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⓪">Promise</a></code> that <var>nextAlgorithm</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled①">reacts</a> to. This synchronous-error-propagation
  behavior is consistent with language constructs, i.e., <strong>for-await of</strong> loops that invoke <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols②">%Symbol.asyncIterator%</a></code> and synchronously re-throw exceptions to catch blocks outside
  the loop, before any <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await" id="ref-for-await">Awaiting</a> takes place.</p>
       <li data-md>
        <p>Let <var>iteratorRecord</var> be <a data-link-type="dfn" data-refhint-key="548dbb6b" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" id="ref-for-sec-returnifabrupt-shorthands①">!</a> <var>iteratorRecordCompletion</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert④">Assert</a>: <var>iteratorRecord</var> is an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iterator-records" id="ref-for-sec-iterator-records②">Iterator Record</a>.</p>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller④">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted②">aborted</a>, then return.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add">Add the following abort algorithm</a> to <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller⑤">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal④">signal</a>:</p>
        <ol>
         <li data-md>
          <p>Run <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose" id="ref-for-sec-asynciteratorclose">AsyncIteratorClose</a>(<var>iteratorRecord</var>, <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-normalcompletion" id="ref-for-sec-normalcompletion">NormalCompletion</a>(<var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller⑥">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason">abort reason</a>)).</p>
        </ol>
       <li data-md>
        <p>Run <var>nextAlgorithm</var> given <var>subscriber</var> and <var>iteratorRecord</var>.</p>
      </ol>
     <li data-md>
      <p><i id="from-iterable-conversion"><b>From iterable</b></i>: Let <var>iteratorMethod</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" id="ref-for-sec-returnifabrupt-shorthands②">?</a> <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" id="ref-for-sec-getmethod③">GetMethod</a>(<var>value</var>, <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols③">%Symbol.iterator%</a></code>).</p>
     <li data-md>
      <p>If <var>iteratorMethod</var> is undefined, then jump to the step labeled <a href="#from-promise-conversion">From Promise</a>.</p>
      <p>Otherwise, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②②">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback③">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①②">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller⑦">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal⑤">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted③">aborted</a>, then return.</p>
       <li data-md>
        <p>Let <var>iteratorRecordCompletion</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" id="ref-for-sec-getiterator③">GetIterator</a>(<var>value</var>, sync).</p>
       <li data-md>
        <p>If <var>iteratorRecordCompletion</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type⑤">throw completion</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑦">error()</a></code> method, given <var>iteratorRecordCompletion</var>’s [[Value]], and abort
  these steps.</p>
       <li data-md>
        <p>Let <var>iteratorRecord</var> be <a data-link-type="dfn" data-refhint-key="548dbb6b" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" id="ref-for-sec-returnifabrupt-shorthands③">!</a> <var>iteratorRecordCompletion</var>.</p>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller⑧">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal⑥">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted④">aborted</a>, then return.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add①">Add the following abort algorithm</a> to <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller⑨">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal⑦">signal</a>:</p>
        <ol>
         <li data-md>
          <p>Run <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose" id="ref-for-sec-iteratorclose">IteratorClose</a>(<var>iteratorRecord</var>, <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-normalcompletion" id="ref-for-sec-normalcompletion①">NormalCompletion</a>(UNUSED)).</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while">While</a> true:</p>
        <ol>
         <li data-md>
          <p>Let <var>next</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue" id="ref-for-sec-iteratorstepvalue②">IteratorStepValue</a>(<var>iteratorRecord</var>).</p>
         <li data-md>
          <p>If <var>next</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type⑥">throw completion</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑧">error()</a></code> method, given <var>next</var>’s [[Value]], and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">break</a>.</p>
         <li data-md>
          <p>Set <var>next</var> to <a data-link-type="dfn" data-refhint-key="548dbb6b" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" id="ref-for-sec-returnifabrupt-shorthands④">!</a> to <var>next</var>.</p>
         <li data-md>
          <p>If <var>next</var> is done, then:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>: <var>iteratorRecord</var>’s [[Done]] is true.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②">complete()</a></code>.</p>
           <li data-md>
            <p>Return.</p>
          </ol>
         <li data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next④">next()</a></code> given <var>next</var>.</p>
         <li data-md>
          <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⓪">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal⑧">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted⑤">aborted</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p><i id="from-promise-conversion"><b>From Promise</b></i>: If <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise" id="ref-for-sec-ispromise">IsPromise</a>(<var>value</var>) is true,
 then:</p>
      <ol>
       <li data-md>
        <p>Return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②③">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback④">subscribe callback</a> is an algorithm
  that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①③">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled②">React</a> to <var>value</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>value</var> was fulfilled with value <var>v</var>, then:</p>
            <ol>
             <li data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑤">next()</a></code> method, given <var>v</var>.</p>
             <li data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete③">complete()</a></code> method.</p>
            </ol>
           <li data-md>
            <p>If <var>value</var> was rejected with reason <var>r</var>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑨">error()</a></code> method, given <var>r</var>.</p>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①">Throw</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-from.any.js" title="dom/observable/tentative/observable-from.any.js">observable-from.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-from.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-from.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="subscribe to an Observable" data-algorithm-for="Observable">
     To <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport id="observable-subscribe-to-an-observable">subscribe to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②④">Observable</a></code></dfn> given an <code class="idl"><a data-link-type="idl" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion②">ObserverUnion</a></code>-or-<a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①">internal observer</a> <var>observer</var>, and a <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑨">SubscribeOptions</a></code> <var>options</var>, run
  these steps: 
    <p class="note" role="note"><span class="marker">Note:</span> We split this algorithm out from the Web IDL <code class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe④">subscribe()</a></code> method, so that spec
  prose can <a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable③">subscribe</a> to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑤">Observable</a></code> without going through the Web IDL bindings. See <a href="https://github.com/w3c/IntersectionObserver/issues/464">w3c/IntersectionObserver#464</a> for
  similar context, where "internal" prose <span class="allow-2119">must</span> not go through Web IDL
  bindings on objects whose properties could be mutated by JavaScript. See <a href="#promise-returning-operators">§ 2.3.3 Promise-returning operators</a> for usage of this.</p>
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑤">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑤">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑤">fully active</a>, then return.</p>
     <li data-md>
      <p>Let <var>internal observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②">internal observer</a>.</p>
     <li data-md>
      <p>Process <var>observer</var> as follows:</p>
      <ol id="process-observer">
       <li>
        <dl class="switch">
         <dt>If <var>observer</var> is an <code class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑥">ObservableSubscriptionCallback</a></code>
         <dd>
          Set <var>internal observer</var>’s <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps③">next steps</a> to these steps that take
       an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑥">any</a></code> <var>value</var>: 
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function③">Invoke</a> <var>observer</var> with «<var>value</var>» and "<code>report</code>".</p>
          </ol>
         <dt>If <var>observer</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-subscriptionobserver" id="ref-for-dictdef-subscriptionobserver①">SubscriptionObserver</a></code>
         <dd>
          <ol>
           <li data-md>
            <p>If <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next②">next</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>, then set <var>internal
  observer</var>’s <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps④">next steps</a> to these steps that take an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑦">any</a></code> <var>value</var>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function④">Invoke</a> <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next③">next</a></code> with «<var>value</var>» and
 "<code>report</code>".</p>
            </ol>
           <li data-md>
            <p>If <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error②">error</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a>, then set <var>internal
  observer</var>’s <a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①">error steps</a> to these steps that take an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑧">any</a></code> <var>error</var>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function⑤">Invoke</a> <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error③">error</a></code> with «<var>error</var>» and
 "<code>report</code>".</p>
            </ol>
           <li data-md>
            <p>If <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete②">complete</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">exists</a>, then set <var>internal observer</var>’s <a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①">complete steps</a> to these steps:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function⑥">Invoke</a> <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete③">complete</a></code> with «» and
 "<code>report</code>".</p>
            </ol>
          </ol>
         <dt>If <var>observer</var> is an <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer③">internal observer</a>
         <dd>Set <var>internal observer</var> to <var>observer</var>.
        </dl>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑥">Assert</a>: <var>internal observer</var>’s <a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②">error steps</a> is either the <a data-link-type="dfn" href="#default-error-algorithm" id="ref-for-default-error-algorithm①">default error algorithm</a>, or an algorithm that <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function⑦">invokes</a> the provided <code class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error④">error</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function③">callback function</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>’s <a data-link-type="dfn" href="#observable-weak-subscriber" id="ref-for-observable-weak-subscriber">weak subscriber</a> is not null and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>’s <a data-link-type="dfn" href="#observable-weak-subscriber" id="ref-for-observable-weak-subscriber①">weak subscriber</a>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active⑦">active</a> is true:</p>
      <ol>
       <li data-md>
        <p>Let <var>subscriber</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a>’s <a data-link-type="dfn" href="#observable-weak-subscriber" id="ref-for-observable-weak-subscriber②">weak subscriber</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>internal observer</var> to <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers④">internal observers</a>.</p>
       <li data-md>
        <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal">signal</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a>, then:</p>
        <ol>
         <li data-md>
          <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted⑥">aborted</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">remove</a> <var>internal observer</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers⑤">internal observers</a>.</p>
         <li data-md>
          <p>Otherwise, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add②">add the following abort algorithm</a> to <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②">signal</a></code>:</p>
          <ol>
           <li data-md>
            <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active⑧">active</a> is false, then abort these steps.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">Remove</a> <var>internal observer</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers⑥">internal observers</a>.</p>
           <li data-md>
            <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers⑦">internal observers</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>, then <a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription③">close</a> <var>subscriber</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①">abort reason</a>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>Return.</p>
      </ol>
     <li data-md>
      <p>Let <var>subscriber</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new③">new</a> <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①④">Subscriber</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">Append</a> <var>internal observer</var> to <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers⑧">internal observers</a>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>’s <a data-link-type="dfn" href="#observable-weak-subscriber" id="ref-for-observable-weak-subscriber③">weak subscriber</a> to <var>subscriber</var>.</p>
     <li data-md>
      <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④">signal</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exists</a>, then:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted⑦">aborted</a>, then <a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription④">close</a> <var>subscriber</var> given <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥">signal</a></code> <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason②">abort reason</a>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add③">add the following abort algorithm</a> to <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦">signal</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active⑨">active</a> is false, then abort these steps.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove②">Remove</a> <var>internal observer</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers⑨">internal observers</a>.</p>
         <li data-md>
          <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers①⓪">internal observers</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">empty</a>, then <a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription⑤">close</a> <var>subscriber</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑧">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason③">abort reason</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a>’s <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback⑤">subscribe callback</a> is a <code class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback③">SubscribeCallback</a></code>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function⑧">invoke</a> it with «subscriber» with "<code>rethrow</code>".</p>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown③">an exception <var>E</var> was thrown</a>, call <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⓪">error()</a></code> method with <var>E</var>.</p>
     <li data-md>
      <p>Otherwise, run the steps given by <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>’s <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback⑥">subscribe callback</a>, given <var>subscriber</var>.</p>
    </ol>
   </div>
   <details class="wpt-tests-block" dir="ltr" lang="en" open>
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-constructor.any.js" title="dom/observable/tentative/observable-constructor.any.js">observable-constructor.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-constructor.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-constructor.any.js"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-constructor.window.js" title="dom/observable/tentative/observable-constructor.window.js">observable-constructor.window.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-constructor.window.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-constructor.window.js"><small>(source)</small></a>
    </ul>
   </details>
   <h3 class="heading settled" data-level="2.3" id="operators"><span class="secno">2.3. </span><span class="content">Operators</span><a class="self-link" href="#operators"></a></h3>
   <p>For now, see <a href="https://github.com/wicg/observable#operators">https://github.com/wicg/observable#operators</a>.</p>
   <h4 class="heading settled" data-level="2.3.1" id="observable-from"><span class="secno">2.3.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from②">from()</a></code></span><a class="self-link" href="#observable-from"></a></h4>
   <div class="algorithm" data-algorithm="from(value)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-from"><code>from(<var>value</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#observable-convert-to-an-observable" id="ref-for-observable-convert-to-an-observable①">converting</a> <var>value</var> to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑥">Observable</a></code>. Rethrow any exceptions.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.2" id="observable-returning-operators"><span class="secno">2.3.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑦">Observable</a></code>-returning operators</span><a class="self-link" href="#observable-returning-operators"></a></h4>
   <div class="algorithm" data-algorithm="takeUntil(value)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-takeuntil"><code>takeUntil(<var>value</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>.</p>
     <li data-md>
      <p>Let <var>notifier</var> be the result of <a data-link-type="dfn" href="#observable-convert-to-an-observable" id="ref-for-observable-convert-to-an-observable②"> converting</a> <var>value</var> to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑧">Observable</a></code>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new④">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑨">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback⑦">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑤">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <div class="note" role="note">
        Note that this method involves <a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable④">Subscribing</a> to two <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⓪">Observable</a></code>s: (1) <var>notifier</var>, and (2) <var>sourceObservable</var>. We "unsubscribe" from <strong>both</strong> of them in the following situations: 
       <ol>
        <li data-md>
         <p><var>notifier</var> starts emitting values (either "next" or "error"). In this case, we
  unsubscribe from <var>notifier</var> since we got all we need from it, and no longer need it to
  keep producing values. We also unsubscribe from <var>sourceObservable</var>, because it no
  longer needs to produce values that get plumbed through this method’s returned <var>observable</var>, because we’re manually ending the subscription to <var>observable</var>, since <var>notifier</var> finally produced a value.</p>
        <li data-md>
         <p><var>sourceObservable</var> either <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①①">error()</a></code>s or <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete④">complete()</a></code>s
  itself. In this case, we unsubscribe from <var>notifier</var> since we no longer need to listen
  for values it emits in order to determine when <var>observable</var> can stop mirroring values
  from <var>sourceObservable</var> (since <var>sourceObservable</var> ran to completion by itself).
  Unsubscribing from <var>sourceObservable</var> isn’t necessary, since its subscription has been
  exhausted by itself.</p>
       </ol>
      </div>
      <ol>
       <li data-md>
        <p>Let <var>notifierObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer④">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps⑤">next steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑤">complete()</a></code> method.</p>
          <p class="note" role="note"><span class="marker">Note:</span> This will "unsubscribe" from <var>sourceObservable</var>, if it has been subscribed to by
 this point. This is because <var>sourceObservable</var> is subscribed to with the "outer" <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①①">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal⑨">signal</a> as
 an input signal, and that signal will get <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort①">aborted</a> when the
 "outer" <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑥">complete()</a></code> is called above (and below).</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps③">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑦">complete()</a></code> method.</p>
        </dl>
        <p class="note" role="note"><span class="marker">Note:</span> We do not specify <a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②">complete steps</a>, because if the <var>notifier</var> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③①">Observable</a></code> completes itself, we do not need to complete the <var>subscriber</var> associated
  with the <var>observable</var> returned from this method. Rather, the <var>observable</var> will continue to
  mirror <var>sourceObservable</var> uninterrupted.</p>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⓪">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑨">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①②">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⓪">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable⑤">Subscribe</a> to <var>notifier</var> given <var>notifierObserver</var> and <var>options</var>.</p>
       <li data-md>
        <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active①⓪">active</a> is false, then return.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This means that <var>sourceObservable</var>’s <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback⑧">subscribe callback</a> will not even
  get invoked once, if <var>notifier</var> synchronously emits a value. If <var>notifier</var> only
  "completes" synchronously though (without emitting a "next" or "error" value), then <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active①①">active</a> will still be true, and we proceed to subscribe to <var>sourceObservable</var>, which <var>observable</var> will mirror uninterrupted.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer⑤">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps⑥">next steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑥">next()</a></code> method, given the passed in <var>value</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps④">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①②">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps③">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑧">complete()</a></code> method.</p>
        </dl>
        <p class="note" role="note"><span class="marker">Note:</span> <var>sourceObserver</var> is mostly a pass-through, mirroring everything that <var>sourceObservable</var> emits, with the exception of having the ability to unsubscribe from the <var>notifier</var> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③②">Observable</a></code> in the case where <var>sourceObservable</var> is exhausted before <var>notifier</var> emits anything.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable⑥">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-takeUntil.any.js" title="dom/observable/tentative/observable-takeUntil.any.js">observable-takeUntil.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-takeUntil.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-takeUntil.any.js"><small>(source)</small></a>
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-takeUntil.window.js" title="dom/observable/tentative/observable-takeUntil.window.js">observable-takeUntil.window.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-takeUntil.window.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-takeUntil.window.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="map(mapper)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-map"><code>map(<var>mapper</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑤">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③③">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback⑨">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑥">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑥">unsigned long long</a></code>, initially 0.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer⑥">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps⑦">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function⑨">Invoke</a> <var>mapper</var> with «the passed in <var>value</var>, <var>idx</var>» and
  "<code>rethrow</code>"; let <var>mappedValue</var> be the returned value.</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown④">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①③">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
           <li data-md>
            <p>Increment <var>idx</var>.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑦">next()</a></code> method, given <var>mappedValue</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps⑤">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①④">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps④">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑨">complete()</a></code> method.</p>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①①">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⓪">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①③">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①①">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable⑦">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-map.any.js" title="dom/observable/tentative/observable-map.any.js">observable-map.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-map.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-map.any.js"><small>(source)</small></a>
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-map.window.js" title="dom/observable/tentative/observable-map.window.js">observable-map.window.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-map.window.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-map.window.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="filter(predicate)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-filter"><code>filter(<var>predicate</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑥">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③④">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①⓪">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑦">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑦">unsigned long long</a></code>, initially 0.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer⑦">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps⑧">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⓪">Invoke</a> <var>predicate</var> with «the passed in <var>value</var>, <var>idx</var>» and "<code>rethrow</code>"; let <var>matches</var> be the returned value.</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑤">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑤">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
           <li data-md>
            <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
           <li data-md>
            <p>If <var>matches</var> is true, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑧">next()</a></code> method, given <var>value</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps⑥">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑥">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps⑤">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⓪">complete()</a></code> method.</p>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①②">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①①">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①④">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①②">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable⑧">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-filter.any.js" title="dom/observable/tentative/observable-filter.any.js">observable-filter.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-filter.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-filter.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="take(amount)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-take"><code>take(<var>amount</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑦">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑤">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①①">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑧">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>remaining</var> be <var>amount</var>.</p>
       <li data-md>
        <p>If <var>remaining</var> is 0, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①①">complete()</a></code> method and abort
  these steps.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer⑧">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps⑨">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑨">next()</a></code> method with the passed in <var>value</var>.</p>
           <li data-md>
            <p>Decrement <var>remaining</var>.</p>
           <li data-md>
            <p>If <var>remaining</var> is 0, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①②">complete()</a></code> method.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps⑦">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑦">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps⑥">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①③">complete()</a></code> method.</p>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①③">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①②">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⑤">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①③">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable⑨">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-take.any.js" title="dom/observable/tentative/observable-take.any.js">observable-take.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-take.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-take.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="drop(amount)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-drop"><code>drop(<var>amount</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑧">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑥">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①②">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑨">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>remaining</var> be <var>amount</var>.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer⑨">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⓪">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>remaining</var> is > 0, then decrement <var>remaining</var> and abort these steps.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑦">Assert</a>: <var>remaining</var> is 0.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⓪">next()</a></code> method with the passed in <var>value</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps⑧">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑧">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps⑦">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①④">complete()</a></code> method.</p>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①④">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①③">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⑥">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①④">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⓪">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-drop.any.js" title="dom/observable/tentative/observable-drop.any.js">observable-drop.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-drop.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-drop.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="flatMap(mapper)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-flatmap"><code>flatMap(<var>mapper</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new⑨">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑦">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①③">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⓪">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑧">unsigned long long</a></code>, initially 0.</p>
       <li data-md>
        <p>Let <var>outerSubscriptionHasCompleted</var> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean">boolean</a>, initially false.</p>
       <li data-md>
        <p>Let <var>queue</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑨">any</a></code> values, initially empty.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This <var>queue</var> is used to store any <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑧">Observable</a></code>s emitted by <var>sourceObservable</var>,
  while <var>observable</var> is currently subscribed to an <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑨">Observable</a></code> emitted earlier by <var>sourceObservable</var> that has not yet been exhausted.</p>
       <li data-md>
        <p>Let <var>activeInnerSubscription</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean①">boolean</a>, initially false.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⓪">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①①">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>activeInnerSubscription</var> is true, then:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>value</var> to <var>queue</var>.</p>
              <p class="note" role="note"><span class="marker">Note:</span> This <var>value</var> will eventually be processed once the <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⓪">Observable</a></code> that is
 currently subscribed-to (as indicated by <var>activeInnerSubscription</var>) is exhausted.</p>
            </ol>
           <li data-md>
            <p>Otherwise:</p>
            <ol>
             <li data-md>
              <p>Set <var>activeInnerSubscription</var> to true.</p>
             <li data-md>
              <p>Run the <a data-link-type="dfn" href="#flatmap-process-next-value-steps" id="ref-for-flatmap-process-next-value-steps">flatmap process next value steps</a> with <var>value</var>, <var>subscriber</var>, <var>mapper</var>, and <b>references</b> to all of the following: <var>queue</var>, <var>activeInnerSubscription</var>, <var>outerSubscriptionHasCompleted</var>, and <var>idx</var>.</p>
              <div class="note" role="note">
               <p>Note: This <a data-link-type="dfn" href="#flatmap-process-next-value-steps" id="ref-for-flatmap-process-next-value-steps①">flatmap process next value steps</a> will subscribe to the <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④①">Observable</a></code> derived from <var>value</var> (if one such can be derived) and keep
   processing values from it until its subscription becomes inactive (either by
   error or completion). If this "inner" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④②">Observable</a></code> completes, then the
   processing steps will recursively invoke themselves with the next <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③⓪">any</a></code> in <var>queue</var>.</p>
               <p>If no such value <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">exists</a>, then the processing steps will terminate, <b>unsetting</b> <var>activeInnerSubscription</var>, so that future values emitted from <var>sourceObservable</var> are processed correctly.</p>
              </div>
            </ol>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps⑨">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑨">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps⑧">complete steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Set <var>outerSubscriptionHasCompleted</var> to true.</p>
            <p class="note" role="note"><span class="marker">Note:</span> If <var>activeInnerSubscription</var> is true, then the below step will <em>not</em> complete <var>subscriber</var>. In that case, the <a data-link-type="dfn" href="#flatmap-process-next-value-steps" id="ref-for-flatmap-process-next-value-steps②">flatmap process next value steps</a> will be
  responsible for completing <var>subscriber</var> when <var>queue</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty②">empty</a>, after the
  "inner" subscription becomes inactive.</p>
           <li data-md>
            <p>If <var>activeInnerSubscription</var> is false and <var>queue</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty③">empty</a>, run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑤">complete()</a></code> method.</p>
          </ol>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑤">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①④">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⑦">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⑤">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①①">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="flatmap process next value steps">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="flatmap-process-next-value-steps">flatmap process next value steps</dfn>, given an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③①">any</a></code> <var>value</var>, a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②①">Subscriber</a></code> <var>subscriber</var>, a <code class="idl"><a data-link-type="idl" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper③">Mapper</a></code> <var>mapper</var>, and <b>references</b> to all of the following: a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③②">any</a></code> values <var>queue</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean②">boolean</a> <var>activeInnerSubscription</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean③">boolean</a> <var>outerSubscriptionHasCompleted</var>, and an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑨">unsigned long long</a></code> <var>idx</var>: 
    <ol>
     <li data-md>
      <p>Let <var>mappedResult</var> be the result of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①①">invoking</a> <var>mapper</var> with «<var>value</var>, <var>idx</var>» and
 "<code>rethrow</code>".</p>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑥">an exception <var>E</var> was thrown</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⓪">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
     <li data-md>
      <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
     <li data-md>
      <p>Let <var>innerObservable</var> be the result of calling <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from③">from()</a></code> with <var>mappedResult</var>.</p>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑦">an exception <var>E</var> was thrown</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②①">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
      <p class="issue" id="issue-4eb2abb1"><a class="self-link" href="#issue-4eb2abb1"></a> We shouldn’t invoke <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from④">from()</a></code> directly. Rather, we should call some
 internal algorithm that passes-back the exceptions for us to handle properly here, since we
 want to pipe them to <var>subscriber</var>.</p>
     <li data-md>
      <p>Let <var>innerObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①①">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①②">next steps</a>
       <dd data-md>
        <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①①">next()</a></code> method, given the passed in <var>value</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⓪">error steps</a>
       <dd data-md>
        <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②②">error()</a></code> method, given the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps⑨">complete steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>If <var>queue</var> is not empty, then:</p>
          <ol>
           <li data-md>
            <p>Let <var>nextValue</var> be the first item in <var>queue</var>; <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove③">remove</a> remove this item from <var>queue</var>.</p>
           <li data-md>
            <p>Run <a data-link-type="dfn" href="#flatmap-process-next-value-steps" id="ref-for-flatmap-process-next-value-steps③">flatmap process next value steps</a> given <var>nextValue</var>, <var>subscriber</var>, <var>mapper</var>,
 and <b>references</b> to <var>queue</var> and <var>activeInnerSubscription</var>.</p>
          </ol>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p>Set <var>activeInnerSubscription</var> to false.</p>
            <p class="note" role="note"><span class="marker">Note:</span> Because <var>activeInnerSubscription</var> is a reference, this has the effect of
 ensuring that all subsequent values emitted from the "outer" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④③">Observable</a></code> (called <var>sourceObservable</var>.</p>
           <li data-md>
            <p>If <var>outerSubscriptionHasCompleted</var> is true, run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑥">complete()</a></code> method.</p>
            <p class="note" role="note"><span class="marker">Note:</span> This means the "outer" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④④">Observable</a></code> has already completed, but did not
 proceed to complete <var>subscriber</var> yet because there was at least one more pending
 "inner" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑤">Observable</a></code> (i.e., <var>innerObservable</var>) that had already been queued and
 had not yet completed. Until right now!</p>
          </ol>
        </ol>
      </dl>
     <li data-md>
      <p>Let <var>innerOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑥">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑤">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⑧">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⑥">signal</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①②">Subscribe</a> to <var>innerObservable</var> given <var>innerObserver</var> and <var>innerOptions</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="switchMap(mapper)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-switchmap"><code>switchMap(<var>mapper</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③②">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⓪">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑥">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①④">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②②">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⓪">unsigned long long</a></code>, initially 0.</p>
       <li data-md>
        <p>Let <var>outerSubscriptionHasCompleted</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean④">boolean</a>, initially false.</p>
       <li data-md>
        <p>Let <var>activeInnerAbortController</var> be an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①">AbortController</a></code>-or-null, initially null.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller②">AbortController</a></code> is assigned to a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller③">AbortController</a></code> only by this
  algorithm’s <a href="#switchmap-next-steps">next steps</a> (below), and only assigned to
  null by the <a data-link-type="dfn" href="#switchmap-process-next-value-steps" id="ref-for-switchmap-process-next-value-steps">switchmap process next value steps</a>, when the "inner" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑦">Observable</a></code> either
  completes or errors. This variable is used as a marker for whether there is currently an
  active "inner" subscription. The <a href="#switchmap-complete-steps">complete steps</a> below care about this, because if <var>sourceObservable</var> completes while there is an active
  "inner" subscription, we do not immediately complete <var>subscriber</var>. In that case, <var>subscriber</var>’s completion becomes blocked on the "inner" subscription’s completion.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①②">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md>
         <dt id="switchmap-next-steps"><a class="self-link" href="#switchmap-next-steps"></a><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①③">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>activeInnerAbortController</var> is not null, then <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort">signal abort</a> <var>activeInnerAbortController</var>.</p>
            <p class="note" role="note"><span class="marker">Note:</span> This "unsubscribes" from the "inner" <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑧">Observable</a></code> that was derived from the
  value that was <i>last</i> pushed from <var>sourceObservable</var>. Then we immediately
  subscribe to the <i>new</i> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑨">Observable</a></code> that we’re about to derive from <var>value</var>,
  i.e., the <i>most-recently</i> pushed value from <var>sourceObservable</var>.</p>
           <li data-md>
            <p>Set <var>activeInnerAbortController</var> to a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①①">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller④">AbortController</a></code>.</p>
           <li data-md>
            <p>Run the <a data-link-type="dfn" href="#switchmap-process-next-value-steps" id="ref-for-switchmap-process-next-value-steps①">switchmap process next value steps</a> with <var>value</var>, <var>subscriber</var>, <var>mapper</var>,
  and <b>references</b> to all of the following: <var>activeInnerAbortController</var>, <var>outerSubscriptionHasCompleted</var>, and <var>idx</var>.</p>
            <p class="note" role="note"><span class="marker">Note:</span> The <a data-link-type="dfn" href="#switchmap-process-next-value-steps" id="ref-for-switchmap-process-next-value-steps②">switchmap process next value steps</a> will subscribe to the <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⓪">Observable</a></code> derived from <var>value</var> (if one such can be derived) and keep processing
  values from it until either (1) its subscription becomes inactive (either by error
  or completion), or (2) <var>activeInnerAbortController</var> <a href="#switchmap-next-steps">gets aborted</a>, due to <var>sourceObservable</var> pushing
  another <i>newer</i> value that will replace the current "inner" subscription.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①①">error steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②③">error()</a></code> method, given the passed in <var>error</var>.</p>
         <dt data-md>
         <dt id="switchmap-complete-steps"><a class="self-link" href="#switchmap-complete-steps"></a><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⓪">complete steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Set <var>outerSubscriptionHasCompleted</var> to true.</p>
            <p class="note" role="note"><span class="marker">Note:</span> If <var>activeInnerAbortController</var> is not null, then we don’t immediately
  complete <var>subscriber</var>. Instead, the <a data-link-type="dfn" href="#switchmap-process-next-value-steps" id="ref-for-switchmap-process-next-value-steps③">switchmap process next value steps</a> will
  complete <var>subscriber</var> when the inner subscription finally completes itself.</p>
           <li data-md>
            <p>If <var>activeInnerAbortController</var> is null, run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑦">complete()</a></code> method.</p>
          </ol>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑦">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑥">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller①⑨">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⑦">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①③">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="switchmap process next value steps">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="switchmap-process-next-value-steps">switchmap process next value steps</dfn>, given an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③③">any</a></code> <var>value</var>, a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②③">Subscriber</a></code> <var>subscriber</var>, a <code class="idl"><a data-link-type="idl" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper④">Mapper</a></code> <var>mapper</var>, and <b>references</b> to all of the following: an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑤">AbortController</a></code> <var>activeInnerAbortController</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean⑤">boolean</a> <var>outerSubscriptionHasCompleted</var>,
  and an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①①">unsigned long long</a></code> <var>idx</var> are to run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>mappedResult</var> be the result of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①②">invoking</a> <var>mapper</var> with «<var>value</var>, <var>idx</var>» and
 "<code>rethrow</code>".</p>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑧">an exception <var>E</var> was thrown</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②④">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
     <li data-md>
      <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
     <li data-md>
      <p>Let <var>innerObservable</var> be the result of calling <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑤">from()</a></code> with <var>mappedResult</var>.</p>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑨">an exception <var>E</var> was thrown</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑤">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
     <li data-md>
      <p>Let <var>innerObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①③">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①④">next steps</a>
       <dd data-md>
        <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①②">next()</a></code> method, given the passed in <var>value</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①②">error steps</a>
       <dd data-md>
        <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑥">error()</a></code> method, given the passed in <var>error</var>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> We don’t have to set <var>activeInnerAbortController</var> to null here, to signal to the <code class="idl"><a data-link-type="idl" href="#dom-observable-switchmap" id="ref-for-dom-observable-switchmap①">switchMap()</a></code> method steps above that the inner "subscription" has been
 canceled. That’s because calling <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑦">error()</a></code> method already
 unsubscribes from the "outer" source Observable, so it will not be able to push any more
 values to the <code class="idl"><a data-link-type="idl" href="#dom-observable-switchmap" id="ref-for-dom-observable-switchmap②">switchMap()</a></code> internal observer.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①①">complete steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>If <var>outerSubscriptionHasCompleted</var> is true, run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑧">complete()</a></code> method.</p>
         <li data-md>
          <p>Otherwise, set <var>activeInnerAbortController</var> to null.</p>
          <p class="note" role="note"><span class="marker">Note:</span> Because this variable is a reference, it signals to the <a href="#switchmap-complete-steps">switchMap complete steps</a> that there is no active
  inner subscription.</p>
        </ol>
      </dl>
     <li data-md>
      <p>Let <var>innerOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑧">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑦">signal</a></code> is the
  result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal">creating a dependent abort signal</a> from the list
  «<var>activeInnerAbortController</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⑧">signal</a>, <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⓪">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal①⑨">signal</a>», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②">AbortSignal</a></code>,
  and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①">current realm</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①④">Subscribe</a> to <var>innerObservable</var> given <var>innerObserver</var> and <var>innerOptions</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="inspect(inspectorUnion)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="inspect(inspectorUnion)|inspect()" id="dom-observable-inspect"><code>inspect(<var>inspectorUnion</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>subscribe callback</var> be a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑥">VoidFunction</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Let <var>next callback</var> be a <code class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑦">ObservableSubscriptionCallback</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Let <var>error callback</var> be a <code class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑧">ObservableSubscriptionCallback</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Let <var>complete callback</var> be a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑦">VoidFunction</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Let <var>abort callback</var> be a <code class="idl"><a data-link-type="idl" href="#callbackdef-observableinspectoraborthandler" id="ref-for-callbackdef-observableinspectoraborthandler①">ObservableInspectorAbortHandler</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Process <var>inspectorUnion</var> as follows:</p>
      <dl class="switch">
       <dt>If <var>inspectorUnion</var> is an <code class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑨">ObservableSubscriptionCallback</a></code>
       <dd>
        <ol>
         <li data-md>
          <p>Set <var>next callback</var> to <var>inspectorUnion</var>.</p>
        </ol>
       <dt>If <var>inspectorUnion</var> is an <code class="idl"><a data-link-type="idl" href="#dictdef-observableinspector" id="ref-for-dictdef-observableinspector①">ObservableInspector</a></code>
       <dd>
        <ol>
         <li data-md>
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-observableinspector-subscribe" id="ref-for-dom-observableinspector-subscribe">subscribe</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">exists</a> in <var>inspectorUnion</var>, then set <var>subscribe callback</var> to it.</p>
         <li data-md>
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-observableinspector-next" id="ref-for-dom-observableinspector-next">next</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑥">exists</a> in <var>inspectorUnion</var>, then set <var>next
  callback</var> to it.</p>
         <li data-md>
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-observableinspector-error" id="ref-for-dom-observableinspector-error">error</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑦">exists</a> in <var>inspectorUnion</var>, then set <var>error
  callback</var> to it.</p>
         <li data-md>
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-observableinspector-complete" id="ref-for-dom-observableinspector-complete">complete</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑧">exists</a> in <var>inspectorUnion</var>, then set <var>complete callback</var> to it.</p>
         <li data-md>
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-observableinspector-abort" id="ref-for-dom-observableinspector-abort">abort</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑨">exists</a> in <var>inspectorUnion</var>, then set <var>abort
  callback</var> to it.</p>
        </ol>
      </dl>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③③">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①②">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤①">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①⑤">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②④">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>If <var>subscribe callback</var> is not null, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①③">invoke</a> it with «» and "<code>rethrow</code>".</p>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⓪">an exception <var>E</var> was thrown</a>, then run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑧">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
        <p class="note" role="note"><span class="marker">Note:</span> The result of this is that <var>sourceObservable</var> is never subscribed to.</p>
       <li data-md>
        <p>If <var>abort callback</var> is not null, then <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add④">add the following abort
  algorithm</a> to <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②①">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⓪">signal</a>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①④">Invoke</a> <var>abort callback</var> with «<var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②②">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②①">signal</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason④">abort reason</a>» and "<code>report</code>".</p>
        </ol>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①④">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⑤">next steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>next callback</var> is not null, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⑤">invoke</a> <var>next callback</var> with «the passed in <var>value</var>» and "<code>rethrow</code>".</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①①">an exception <var>E</var> was thrown</a>,
  then:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove">Remove</a> <var>abort callback</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②③">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②②">signal</a>.</p>
              <p class="note" role="note"><span class="marker">Note:</span> This step is important, because the <var>abort callback</var> is only meant to be
 called for <em>consumer-initiated</em> unsubscriptions. When the producer terminates
 the subscription (via <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑨">error()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑨">complete()</a></code> methods) like below, we have to ensure that <var>abort
 callback</var> is not run.</p>
              <p class="issue" id="issue-bfe2caf4"><a class="self-link" href="#issue-bfe2caf4"></a> This matches Chromium’s implementation, but consider holding a reference
 to the originally-passed-in <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑨">SubscribeOptions</a></code>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑧">signal</a></code> and just invoking <var>abort callback</var> when <em>it</em> aborts. The result is likely the
 same, but needs investigation.</p>
             <li data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⓪">error()</a></code> method, given <var>E</var>, and abort these
 steps.</p>
            </ol>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①③">next()</a></code> method with the passed in <var>value</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①③">error steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove①">Remove</a> <var>abort callback</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②④">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②③">signal</a>.</p>
           <li data-md>
            <p>If <var>error callback</var> is not null, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⑥">invoke</a> <var>error callback</var> with «the passed
  in <var>error</var>» and "<code>rethrow</code>".</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①②">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③①">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③②">error()</a></code> method, given the passed in <var>error</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①②">complete steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove②">Remove</a> <var>abort callback</var> from <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⑤">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②④">signal</a>.</p>
           <li data-md>
            <p>If <var>complete callback</var> is not null, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⑦">invoke</a> <var>complete callback</var> with «»
  and "<code>rethrow</code>".</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①③">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③③">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②⓪">complete()</a></code> method.</p>
          </ol>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⓪">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑨">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⑥">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⑤">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⑤">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-inspect.any.js" title="dom/observable/tentative/observable-inspect.any.js">observable-inspect.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-inspect.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-inspect.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="catch(callback)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-catch"><code>catch(<var>callback</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③④">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①③">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤②">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①⑥">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑤">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⑤">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⑥">next steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①④">next()</a></code> method, given the passed in <var>value</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①④">error steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⑧">Invoke</a> <var>callback</var> with «the passed in <var>error</var>» and "<code>rethrow</code>".
  Let <var>result</var> be the returned value.</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①④">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③④">error()</a></code> with <var>E</var>, and abort these steps.</p>
           <li data-md>
            <p>Let <var>innerObservable</var> be the result of calling <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑥">from()</a></code> with <var>result</var>.</p>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⑤">an exception <var>E</var> was thrown</a>, then
  run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑤">error()</a></code> method, given <var>E</var>, and abort these steps.</p>
            <p class="issue" id="issue-4eb2abb1①"><a class="self-link" href="#issue-4eb2abb1①"></a> We shouldn’t invoke <code class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑦">from()</a></code> directly. Rather, we should call
  some internal algorithm that passes-back the exceptions for us to handle properly
  here, since we want to pipe them to <var>subscriber</var>.</p>
           <li data-md>
            <p>Let <var>innerObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⑥">internal observer</a>, initialized as follows:</p>
            <dl>
             <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⑦">next steps</a>
             <dd data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑤">next()</a></code> method, given the passed in <var>value</var>.</p>
             <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⑤">error steps</a>
             <dd data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑥">error()</a></code> method, given the passed in <var>error</var>.</p>
             <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①③">complete steps</a>
             <dd data-md>
              <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②①">complete()</a></code> method.</p>
            </dl>
           <li data-md>
            <p>Let <var>innerOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②①">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⓪">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⑦">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⑥">signal</a>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⑥">Subscribe</a> to <var>innerObservable</var> given <var>innerObserver</var> and <var>innerOptions</var>.</p>
            <p class="note" role="note"><span class="marker">Note:</span> We’re free to subscribe to <var>innerObservable</var> here without first
  "unsubscribing" from <var>sourceObservable</var>, and without fear that <var>sourceObservable</var> will keep emitting values, because all of this is happening inside of the <a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⑥">error steps</a> associated with <var>sourceObservable</var>. This means <var>sourceObservable</var> has already completed its subscription and will no longer produce
  any values, and we are free to safely switch our source of values to <var>innerObservable</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①④">complete steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②②">complete()</a></code> method.</p>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②②">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②①">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⑧">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⑦">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⑦">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="finally(callback)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export id="dom-observable-finally"><code>finally(<var>callback</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sourceObservable</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑤">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①④">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤③">Observable</a></code> whose <a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①⑦">subscribe callback</a> is an
 algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑥">Subscriber</a></code> <var>subscriber</var> and does the following:</p>
      <ol>
       <li data-md>
        <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-addteardown" id="ref-for-dom-subscriber-addteardown①">addTeardown()</a></code> method with <var>callback</var>.</p>
       <li data-md>
        <p>Let <var>sourceObserver</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⑦">internal observer</a>, initialized as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⑧">next steps</a>
         <dd data-md>
          <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑥">next()</a></code> method, given the passed in <var>value</var>.</p>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⑦">error steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑦">error()</a></code> method, given the passed in <var>error</var>.</p>
          </ol>
         <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⑤">complete steps</a>
         <dd data-md>
          <ol>
           <li data-md>
            <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②③">complete()</a></code> method.</p>
          </ol>
        </dl>
       <li data-md>
        <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②③">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②②">signal</a></code> is <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller②⑨">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⑧">signal</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⑧">Subscribe</a> to <var>sourceObservable</var> given <var>sourceObserver</var> and <var>options</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.3" id="promise-returning-operators"><span class="secno">2.3.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①①">Promise</a></code>-returning operators</span><a class="self-link" href="#promise-returning-operators"></a></h4>
   <div class="algorithm" data-algorithm="toArray(options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="toArray(options)|toArray()" id="dom-observable-toarray"><code>toArray(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②③">signal</a></code> is not null:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②④">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted⑧">aborted</a>, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">Reject</a> <var>p</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑤">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason⑤">abort reason</a>.</p>
         <li data-md>
          <p>Return <var>p</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add⑤">Add the following abort algorithm</a> to <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑥">signal</a></code>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">Reject</a> <var>p</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑦">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason⑥">abort reason</a>.</p>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> All we have to do here is <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>p</var>. Note that the subscription to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑥">this</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤④">Observable</a></code> will also be closed automatically, since the "inner" Subscriber gets <a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription⑥">closed</a> in response to <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑧">signal</a></code> getting <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort②">signal abort</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>values</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a>.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⑧">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①⑨">next steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> the passed in <var>value</var> to <var>values</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⑧">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⑥">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">Resolve</a> <var>p</var> with <var>values</var>.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable①⑨">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑦">this</a> given <var>observer</var> and <var>options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-toArray.any.js" title="dom/observable/tentative/observable-toArray.any.js">observable-toArray.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-toArray.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-toArray.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="forEach(callback, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="forEach(callback, options)|forEach(callback)" id="dom-observable-foreach"><code>forEach(<var>callback</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>visitor callback controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑤">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑥">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②④">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑨">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal①">creating a dependent abort signal</a> from the list «<var>visitor callback
 controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal②⑨">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⓪">signal</a></code> if
 non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm②">current realm</a>.</p>
      <div class="note" role="note">
       <p>Many trivial <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①⑨">internal observers</a> act as pass-throughs, and do not control the
   subscription to the <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑤">Observable</a></code> that they represent; that is, their <a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps①⑨">error steps</a> and <a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⑦">complete steps</a> are called when the
   subscription is terminated, and their <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⓪">next steps</a> simply pass some
   version of the given value along the chain.</p>
       <p>For this operator, however, the below <var>observer</var>’s <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②①">next steps</a> are
   responsible for actually aborting the underlying subscription to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑧">this</a>, in the event
   that <var>callback</var> throws an exception. In that case, the <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑤">SubscribeOptions</a></code>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③①">signal</a></code> we pass through to "<a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②⓪">Subscribe to an <code>Observable</code></a>", needs to be a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal②">dependent signal</a> derived from <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③②">signal</a></code>, <strong>and</strong> the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal④">AbortSignal</a></code> of an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑦">AbortController</a></code> that the <a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②②">next steps</a> below has access to, and can <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort①">signal abort</a> when needed. </p>
      </div>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③③">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted⑨">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject④">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③④">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason⑦">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add⑥">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑤">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑤">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑥">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason⑧">abort reason</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> The fact that rejection of <var>p</var> is tied to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑦">signal</a></code>, and not <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑧">signal</a></code> means, that
  any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#microtask" id="ref-for-microtask">microtasks</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask" id="ref-for-queue-a-microtask">queued</a> during the firing of <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑨">signal</a></code>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventdef-abortsignal-abort" id="ref-for-eventdef-abortsignal-abort">abort</a></code> event will run before <var>p</var>’s rejection
  handler runs.</p>
      </ol>
     <li data-md>
      <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①②">unsigned long long</a></code>, initially 0.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②⓪">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②③">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①⑨">Invoke</a> <var>callback</var> with «the passed in <var>value</var>, <var>idx</var>» and
 "<code>rethrow</code>".</p>
          <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⑥">an exception <var>E</var> was thrown</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑥">reject</a> <var>p</var> with <var>E</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort②">signal abort</a> <var>visitor callback
 controller</var> with <var>E</var>.</p>
         <li data-md>
          <p>Increment <var>idx</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②⓪">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑦">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⑧">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">Resolve</a> <var>p</var> with <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⓪">undefined</a></code>.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②①">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑨">this</a> given <var>observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
     <summary>Tests</summary>
     <ul class="wpt-tests-list">
      <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-forEach.any.js" title="dom/observable/tentative/observable-forEach.any.js">observable-forEach.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-forEach.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-forEach.any.js"><small>(source)</small></a>
     </ul>
    </details>
   </div>
   <div class="algorithm" data-algorithm="every(predicate, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="every(predicate, options)|every(predicate)" id="dom-observable-every"><code>every(<var>predicate</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise②">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑥">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑧">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑥">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⓪">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal③">creating a dependent abort signal</a> from the list «<var>controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③⓪">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④①">signal</a></code> if non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑤">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm③">current realm</a>.</p>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④②">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①⓪">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑧">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④③">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason⑨">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add⑦">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④④">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑨">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑤">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⓪">abort reason</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①③">unsigned long long</a></code>, initially 0.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②①">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②④">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function②⓪">Invoke</a> <var>predicate</var> with «the passed in <var>value</var>, <var>idx</var>» and
   "<code>rethrow</code>"; let <var>passed</var> be the returned value.</p>
          <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⑦">an exception <var>E</var> was thrown</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⓪">reject</a> <var>p</var> with <var>E</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort③">signal abort</a> <var>controller</var> with <var>E</var>.</p>
         <li data-md>
          <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
         <li data-md>
          <p>If <var>passed</var> is false, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">resolve</a> <var>p</var> with false, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort④">signal abort</a> <var>controller</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②①">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①①">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps①⑨">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">Resolve</a> <var>p</var> with true.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②②">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⓪">this</a> given <var>observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="first(options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="first(options)|first()" id="dom-observable-first"><code>first(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise③">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑦">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑨">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑦">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑥">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal④">creating a dependent abort signal</a> from the list «<var>controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③①">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑦">signal</a></code> if non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑥">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm④">current realm</a>.</p>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑧">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①①">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①②">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑨">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①①">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add⑧">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⓪">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①③">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤①">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①②">abort reason</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>internal observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②②">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⑤">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve④">Resolve</a> <var>p</var> with the passed in <var>value</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort⑤">Signal abort</a> <var>controller</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②②">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①④">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②⓪">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑤">Reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror">RangeError</a></code>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This is only reached when the source <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑥">Observable</a></code> completes <em>before</em> it emits a
  single value.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②③">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④①">this</a> given <var>internal
 observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="last(options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="last(options)|last()" id="dom-observable-last"><code>last(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise④">a new promise</a>.</p>
     <li data-md>
      <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤②">signal</a></code> is not null:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤③">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①②">aborted</a>, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑥">Reject</a> <var>p</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤④">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①③">abort reason</a>.</p>
         <li data-md>
          <p>Return <var>p</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add⑨">Add the following abort algorithm</a> to <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑤">signal</a></code>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑦">Reject</a> <var>p</var> with <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑥">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①④">abort reason</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>lastValue</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③④">any</a></code>-or-null, initially null.</p>
     <li data-md>
      <p>Let <var>hasLastValue</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean⑥">boolean</a>, initially false.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②③">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⑥">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>Set <var>hasLastValue</var> to true.</p>
         <li data-md>
          <p>Set <var>lastValue</var> to the passed in <var>value</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②③">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑧">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②①">complete steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>If <var>hasLastValue</var> is true, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">resolve</a> <var>p</var> with <var>lastValue</var>.</p>
          <ol>
           <li data-md>
            <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑨">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror①">RangeError</a></code>.</p>
            <p class="note" role="note"><span class="marker">Note:</span> See the note in <code class="idl"><a data-link-type="idl" href="#dom-observable-first" id="ref-for-dom-observable-first①">first()</a></code>.</p>
          </ol>
        </ol>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②④">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④②">this</a> given <var>observer</var> and <var>options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="find(predicate, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="find(predicate, options)|find(predicate)" id="dom-observable-find"><code>find(<var>predicate</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑤">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑧">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①⓪">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑧">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑦">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal⑤">creating a dependent abort signal</a> from the list «<var>controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③②">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑧">signal</a></code> if non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑦">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑤">current realm</a>.</p>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑨">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①③">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⓪">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⓪">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⑤">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add①⓪">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥①">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②①">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥②">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⑥">abort reason</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①④">unsigned long long</a></code>, initially 0.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②④">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⑦">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function②①">Invoke</a> <var>predicate</var> with «the passed in <var>value</var>, <var>idx</var>» and "<code>rethrow</code>"; let <var>passed</var> be the returned value.</p>
          <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⑧">an exception <var>E</var> was thrown</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②②">reject</a> <var>p</var> with <var>E</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort⑥">signal abort</a> <var>controller</var> with <var>E</var>.</p>
         <li data-md>
          <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
         <li data-md>
          <p>If <var>passed</var> is true, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑥">resolve</a> <var>p</var> with <var>value</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort⑦">signal abort</a> <var>controller</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②④">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②③">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②②">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑦">Resolve</a> <var>p</var> with <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①①">undefined</a></code>.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②⑤">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④③">this</a> given <var>observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="some(predicate, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="some(predicate, options)|some(predicate)" id="dom-observable-some"><code>some(<var>predicate</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑥">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑨">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①①">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑨">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥③">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal⑥">creating a dependent abort signal</a> from the list «<var>controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③③">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥④">signal</a></code> if non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑧">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑥">current realm</a>.</p>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑤">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①④">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②④">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑥">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⑦">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add①①">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑦">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑤">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑧">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⑧">abort reason</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⑤">unsigned long long</a></code>, initially 0.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②⑤">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⑧">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function②②">Invoke</a> <var>predicate</var> with «the passed in <var>value</var>, <var>idx</var>» and
   "<code>rethrow</code>"; let <var>passed</var> be the returned value.</p>
          <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⑨">an exception <var>E</var> was thrown</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑥">reject</a> <var>p</var> with <var>E</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort⑧">signal abort</a> <var>controller</var> with <var>E</var>.</p>
         <li data-md>
          <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
         <li data-md>
          <p>If <var>passed</var> is true, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑧">resolve</a> <var>p</var> with true, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort⑨">signal abort</a> <var>controller</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②⑤">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑦">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②③">complete steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑨">Resolve</a> <var>p</var> with false.</p>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②⑥">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④④">this</a> given <var>observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="reduce(reducer, initialValue, options)" data-algorithm-for="Observable">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export data-lt="reduce(reducer, initialValue, options)|reduce(reducer, initialValue)|reduce(reducer)" id="dom-observable-reduce"><code>reduce(<var>reducer</var>, <var>initialValue</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise⑦">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>controller</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②⓪">new</a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①②">AbortController</a></code>.</p>
     <li data-md>
      <p>Let <var>internal options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions③⓪">SubscribeOptions</a></code> whose <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑨">signal</a></code> is the
 result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal⑦">creating a dependent abort signal</a> from the list «<var>controller</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③④">signal</a>, <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦⓪">signal</a></code> if non-null», using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑨">AbortSignal</a></code>, and the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑦">current realm</a>.</p>
     <li data-md>
      <p>If <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦①">signal</a></code> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①⑤">aborted</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑧">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦②">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①⑨">abort reason</a>.</p>
       <li data-md>
        <p>Return <var>p</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add①②">Add the following abort algorithm</a> to <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦③">signal</a></code>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⑨">Reject</a> <var>p</var> with <var>internal options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦④">signal</a></code>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason②⓪">abort reason</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>idx</var> be an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⑥">unsigned long long</a></code>, initially 0.</p>
     <li data-md>
      <p>Let <var>accumulator</var> be <var>initialValue</var> if it is given, and uninitialized otherwise.</p>
     <li data-md>
      <p>Let <var>observer</var> be a new <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②⑥">internal observer</a>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②⑨">next steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>If <var>accumulator</var> is uninitialized (meaning no <var>initialValue</var> was passed in), then set <var>accumulator</var> to the passed in <var>value</var>, set <var>idx</var> to <var>idx</var> + 1, and abort these steps.</p>
          <p class="note" role="note"><span class="marker">Note:</span> This means that <var>reducer</var> will not be called with the first <var>value</var> that <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑤">this</a> produces set as the <code class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue">currentValue</a></code>. Rather, when the <em>second</em> value is
 eventually emitted, we will call <var>reducer</var> with <em>it</em> as the <code class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue①">currentValue</a></code>,
 and the first value (that we’re saving here) as the <code class="idl"><a data-link-type="idl" href="#dom-reducer-accumulator" id="ref-for-dom-reducer-accumulator">accumulator</a></code>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function②③">Invoke</a> <var>reducer</var> with «<var>accumulator</var> as <code class="idl"><a data-link-type="idl" href="#dom-reducer-accumulator" id="ref-for-dom-reducer-accumulator①">accumulator</a></code>, the passed in <var>value</var> as <code class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue②">currentValue</a></code>, <var>idx</var> as <code class="idl"><a data-link-type="idl" href="#dom-reducer-index" id="ref-for-dom-reducer-index">index</a></code>» and "<code>rethrow</code>". Let <var>result</var> be the returned value.</p>
          <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown②⓪">an exception <var>E</var> was thrown</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③⓪">reject</a> <var>p</var> with <var>E</var>, and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort" id="ref-for-abortcontroller-signal-abort①⓪">signal abort</a> <var>controller</var> with <var>E</var>.</p>
         <li data-md>
          <p>Set <var>idx</var> to <var>idx</var> + 1.</p>
         <li data-md>
          <p>Set <var>accumulator</var> to <var>result</var>.</p>
        </ol>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②⑥">error steps</a>
       <dd data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③①">Reject</a> <var>p</var> with the passed in <var>error</var>.</p>
       <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps" id="ref-for-internal-observer-complete-steps②④">complete steps</a>
       <dd data-md>
        <ol>
         <li data-md>
          <p>If <var>accumulator</var> is not "<code>unset</code>", then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⓪">resolve</a> <var>p</var> with <var>accumulator</var>.</p>
          <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③②">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>.</p>
        </ol>
      </dl>
     <li data-md>
      <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable" id="ref-for-observable-subscribe-to-an-observable②⑦">Subscribe</a> to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑥">this</a> given <var>observer</var> and <var>internal options</var>.</p>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="event-target-integration"><span class="secno">3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a></code> integration</span><a class="self-link" href="#event-target-integration"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-observableeventlisteneroptions"><code><c- g>ObservableEventListenerOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="ObservableEventListenerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-observableeventlisteneroptions-capture"><code><c- g>capture</c-></code></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableEventListenerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-observableeventlisteneroptions-passive"><code><c- g>passive</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- g>EventTarget</c-></a> {
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑤⑦"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-eventtarget-when" id="ref-for-dom-eventtarget-when①"><c- g>when</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget/when(type, options), EventTarget/when(type)" data-dfn-type="argument" data-export id="dom-eventtarget-when-type-options-type"><code><c- g>type</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-observableeventlisteneroptions" id="ref-for-dictdef-observableeventlisteneroptions"><c- n>ObservableEventListenerOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget/when(type, options), EventTarget/when(type)" data-dfn-type="argument" data-export id="dom-eventtarget-when-type-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <div class="algorithm" data-algorithm="when(type, options)" data-algorithm-for="EventTarget">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget" data-dfn-type="method" data-export data-lt="when(type, options)|when(type)" id="dom-eventtarget-when"><code>when(<var>type</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑦">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑥">Window</a></code> object, and its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑥">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑥">fully active</a>, then return.</p>
     <li data-md>
      <p>Let <var>event target</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑧">this</a>.</p>
     <li data-md>
      <p>Let <var>observable</var> be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new②①">new</a> <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑧">Observable</a></code>, initialized as follows:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="#observable-subscribe-callback" id="ref-for-observable-subscribe-callback①⑧">subscribe callback</a>
       <dd data-md>
        <p>An algorithm that takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑦">Subscriber</a></code> <var>subscriber</var> and runs these steps:</p>
        <ol>
         <li data-md>
          <p>If <var>event target</var> is null, abort these steps.</p>
          <p class="note" role="note"><span class="marker">Note:</span> This is meant to capture the fact that <var>event target</var> can be garbage collected
 by the time this algorithm runs upon subscription.</p>
         <li data-md>
          <p>If <var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller③⓪">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③⑤">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①⑥">aborted</a>, abort these steps.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#add-an-event-listener" id="ref-for-add-an-event-listener">Add an event listener</a> with <var>event target</var> and an <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-listener" id="ref-for-concept-event-listener">event listener</a> defined as
 follows:</p>
          <dl>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org#event-listener-type" id="ref-for-event-listener-type">type</a>
           <dd data-md>
            <p><var>type</var></p>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#event-listener-callback" id="ref-for-event-listener-callback">callback</a>
           <dd data-md>
            <p>The result of creating a new Web IDL <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener">EventListener</a></code> instance representing a
  reference to a function of one argument of type <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code> <var>event</var>. This function
  executes the <a data-link-type="dfn" href="#observable-event-listener-invoke-algorithm" id="ref-for-observable-event-listener-invoke-algorithm">observable event listener invoke algorithm</a> given <var>subscriber</var> and <var>event</var>.</p>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org#event-listener-capture" id="ref-for-event-listener-capture">capture</a>
           <dd data-md>
            <p><var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-observableeventlisteneroptions-capture" id="ref-for-dom-observableeventlisteneroptions-capture">capture</a></code></p>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org#event-listener-passive" id="ref-for-event-listener-passive">passive</a>
           <dd data-md>
            <p><var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-observableeventlisteneroptions-passive" id="ref-for-dom-observableeventlisteneroptions-passive">passive</a></code> if this member <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⓪">exists</a>; null otherwise.</p>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org#event-listener-once" id="ref-for-event-listener-once">once</a>
           <dd data-md>
            <p>false</p>
           <dt data-md><a data-link-type="dfn" href="https://dom.spec.whatwg.org#event-listener-signal" id="ref-for-event-listener-signal">signal</a>
           <dd data-md>
            <p><var>subscriber</var>’s <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller③①">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③⑥">signal</a></p>
            <p class="note" role="note"><span class="marker">Note:</span> This ensures that the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-listener" id="ref-for-concept-event-listener①">event listener</a> is cleaned up when <a data-link-type="dfn" href="#subscriber-subscription-controller" id="ref-for-subscriber-subscription-controller③②">subscription controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal③⑦">signal</a> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted①⑦">aborted</a>, regardless of an engine’s ownership model.</p>
          </dl>
        </ol>
      </dl>
     <li data-md>
      <p>Return <var>observable</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="observable event listener invoke algorithm">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="observable-event-listener-invoke-algorithm">observable event listener invoke algorithm</dfn> takes a <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑧">Subscriber</a></code> <var>subscriber</var> and
  an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code> <var>event</var>, and runs these steps: 
    <ol>
     <li data-md>
      <p>Run <var>subscriber</var>’s <code class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑦">next()</a></code> method with <var>event</var>.</p>
    </ol>
   </div>
   <details class="wpt-tests-block" dir="ltr" lang="en" open>
    <summary>Tests</summary>
    <ul class="wpt-tests-list">
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-event-target.any.js" title="dom/observable/tentative/observable-event-target.any.js">observable-event-target.any.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-event-target.any.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-event-target.any.js"><small>(source)</small></a>
     <li class="wpt-test"><a class="wpt-name" href="https://wpt.fyi/results/dom/observable/tentative/observable-event-target.window.js" title="dom/observable/tentative/observable-event-target.window.js">observable-event-target.window.js</a> <a class="wpt-live" href="http://wpt.live/dom/observable/tentative/observable-event-target.window.js"><small>(live test)</small></a> <a class="wpt-source" href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-event-target.window.js"><small>(source)</small></a>
    </ul>
   </details>
   <h2 class="heading settled" data-level="4" id="security-and-privacy"><span class="secno">4. </span><span class="content">Security &amp; Privacy Considerations</span><a class="self-link" href="#security-and-privacy"></a></h2>
   <p>This material is being upstreamed from our explainer into this specification, and in the meantime
you can consult the following resources:</p>
   <ul>
    <li data-md>
     <p><a href="https://github.com/WICG/observable/blob/master/security-privacy-questionnaire.md">TAG Security/Privacy
 Questionnaire</a></p>
   </ul>
   <h2 class="heading settled" data-level="5" id="acks"><span class="secno">5. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acks"></a></h2>
   <p>A special thanks to <a href="https://benlesh.com/">Ben Lesh</a> for much of the design input for the <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑨">Observable</a></code> API, and his many years of work maintaining userland Observable code that made this
contribution to the web platform possible.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-observableinspector-abort">abort</a><span>, in § 2.2</span>
   <li>
    active
    <ul>
     <li><a href="#dom-subscriber-active">attribute for Subscriber</a><span>, in § 2.1</span>
     <li><a href="#subscriber-active">dfn for Subscriber</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#dom-subscriber-addteardown">addTeardown(teardown)</a><span>, in § 2.1</span>
   <li><a href="#dom-observableeventlisteneroptions-capture">capture</a><span>, in § 3</span>
   <li><a href="#dom-observable-catch">catch(callback)</a><span>, in § 2.3.2</span>
   <li><a href="#callbackdef-catchcallback">CatchCallback</a><span>, in § 2.2</span>
   <li><a href="#close-a-subscription">close a subscription</a><span>, in § 2.1</span>
   <li>
    complete
    <ul>
     <li><a href="#dom-observableinspector-complete">dict-member for ObservableInspector</a><span>, in § 2.2</span>
     <li><a href="#dom-subscriptionobserver-complete">dict-member for SubscriptionObserver</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-subscriber-complete">complete()</a><span>, in § 2.1</span>
   <li><a href="#internal-observer-complete-steps">complete steps</a><span>, in § 2.2.1</span>
   <li><a href="#dom-observable-observable">constructor(callback)</a><span>, in § 2.2</span>
   <li><a href="#observable-convert-to-an-observable">convert to an Observable</a><span>, in § 2.2.1</span>
   <li><a href="#default-error-algorithm">default error algorithm</a><span>, in § 2.2.1</span>
   <li><a href="#dom-observable-drop">drop(amount)</a><span>, in § 2.3.2</span>
   <li>
    error
    <ul>
     <li><a href="#dom-observableinspector-error">dict-member for ObservableInspector</a><span>, in § 2.2</span>
     <li><a href="#dom-subscriptionobserver-error">dict-member for SubscriptionObserver</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-subscriber-error">error(error)</a><span>, in § 2.1</span>
   <li><a href="#internal-observer-error-steps">error steps</a><span>, in § 2.2.1</span>
   <li><a href="#dom-observable-every">every(predicate)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-every">every(predicate, options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-filter">filter(predicate)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-finally">finally(callback)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-find">find(predicate)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-find">find(predicate, options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-first">first()</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-first">first(options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-flatmap">flatMap(mapper)</a><span>, in § 2.3.2</span>
   <li><a href="#flatmap-process-next-value-steps">flatmap process next value steps</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-foreach">forEach(callback)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-foreach">forEach(callback, options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-from">from(value)</a><span>, in § 2.3.1</span>
   <li><a href="#dom-observable-inspect">inspect()</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-inspect">inspect(inspectorUnion)</a><span>, in § 2.3.2</span>
   <li><a href="#internal-observer">internal observer</a><span>, in § 2.2.1</span>
   <li><a href="#subscriber-internal-observers">internal observers</a><span>, in § 2.1</span>
   <li><a href="#dom-observable-last">last()</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-last">last(options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-map">map(mapper)</a><span>, in § 2.3.2</span>
   <li><a href="#callbackdef-mapper">Mapper</a><span>, in § 2.2</span>
   <li>
    next
    <ul>
     <li><a href="#dom-observableinspector-next">dict-member for ObservableInspector</a><span>, in § 2.2</span>
     <li><a href="#dom-subscriptionobserver-next">dict-member for SubscriptionObserver</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#internal-observer-next-steps">next steps</a><span>, in § 2.2.1</span>
   <li><a href="#dom-subscriber-next">next(value)</a><span>, in § 2.1</span>
   <li><a href="#observable">Observable</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-observable">Observable(callback)</a><span>, in § 2.2</span>
   <li><a href="#observable-event-listener-invoke-algorithm">observable event listener invoke algorithm</a><span>, in § 3</span>
   <li><a href="#dictdef-observableeventlisteneroptions">ObservableEventListenerOptions</a><span>, in § 3</span>
   <li><a href="#dictdef-observableinspector">ObservableInspector</a><span>, in § 2.2</span>
   <li><a href="#callbackdef-observableinspectoraborthandler">ObservableInspectorAbortHandler</a><span>, in § 2.2</span>
   <li><a href="#typedefdef-observableinspectorunion">ObservableInspectorUnion</a><span>, in § 2.2</span>
   <li><a href="#callbackdef-observablesubscriptioncallback">ObservableSubscriptionCallback</a><span>, in § 2.2</span>
   <li><a href="#typedefdef-observerunion">ObserverUnion</a><span>, in § 2.2</span>
   <li><a href="#dom-observableeventlisteneroptions-passive">passive</a><span>, in § 3</span>
   <li><a href="#callbackdef-predicate">Predicate</a><span>, in § 2.2</span>
   <li><a href="#callbackdef-reducer">Reducer</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-reduce">reduce(reducer)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-reduce">reduce(reducer, initialValue)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-reduce">reduce(reducer, initialValue, options)</a><span>, in § 2.3.3</span>
   <li>
    signal
    <ul>
     <li><a href="#dom-subscriber-signal">attribute for Subscriber</a><span>, in § 2.1</span>
     <li><a href="#dom-subscribeoptions-signal">dict-member for SubscribeOptions</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-observable-some">some(predicate)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-some">some(predicate, options)</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observableinspector-subscribe">subscribe</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-subscribe">subscribe()</a><span>, in § 2.2</span>
   <li><a href="#observable-subscribe-callback">subscribe callback</a><span>, in § 2.2</span>
   <li><a href="#callbackdef-subscribecallback">SubscribeCallback</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-subscribe">subscribe(observer)</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-subscribe">subscribe(observer, options)</a><span>, in § 2.2</span>
   <li><a href="#dictdef-subscribeoptions">SubscribeOptions</a><span>, in § 2.2</span>
   <li><a href="#subscriber">Subscriber</a><span>, in § 2.1</span>
   <li><a href="#observable-subscribe-to-an-observable">subscribe to an Observable</a><span>, in § 2.2.1</span>
   <li><a href="#subscriber-subscription-controller">subscription controller</a><span>, in § 2.1</span>
   <li><a href="#dictdef-subscriptionobserver">SubscriptionObserver</a><span>, in § 2.2</span>
   <li><a href="#dom-observable-switchmap">switchMap(mapper)</a><span>, in § 2.3.2</span>
   <li><a href="#switchmap-process-next-value-steps">switchmap process next value steps</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-take">take(amount)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-observable-takeuntil">takeUntil(value)</a><span>, in § 2.3.2</span>
   <li><a href="#subscriber-teardown-callbacks">teardown callbacks</a><span>, in § 2.1</span>
   <li><a href="#dom-observable-toarray">toArray()</a><span>, in § 2.3.3</span>
   <li><a href="#dom-observable-toarray">toArray(options)</a><span>, in § 2.3.3</span>
   <li><a href="#callbackdef-visitor">Visitor</a><span>, in § 2.2</span>
   <li><a href="#observable-weak-subscriber">weak subscriber</a><span>, in § 2.2</span>
   <li><a href="#dom-eventtarget-when">when(type)</a><span>, in § 3</span>
   <li><a href="#dom-eventtarget-when">when(type, options)</a><span>, in § 3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2e66eaf1">AbortController</span>
     <li><span class="dfn-paneled" id="cca3cdb2">AbortSignal</span>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="d30f4c38">EventListener</span>
     <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
     <li><span class="dfn-paneled" id="711357e0">abort</span>
     <li><span class="dfn-paneled" id="670f0339">abort reason</span>
     <li><span class="dfn-paneled" id="535dd335">aborted</span>
     <li><span class="dfn-paneled" id="87bc23a5">add</span>
     <li><span class="dfn-paneled" id="f99bafb9">add an event listener</span>
     <li><span class="dfn-paneled" id="622d9f0e">callback</span>
     <li><span class="dfn-paneled" id="2e75f88e">capture</span>
     <li><span class="dfn-paneled" id="c9db6cec">create a dependent abort signal</span>
     <li><span class="dfn-paneled" id="06950d36">event listener</span>
     <li><span class="dfn-paneled" id="8fc9882c">once</span>
     <li><span class="dfn-paneled" id="75264195">passive</span>
     <li><span class="dfn-paneled" id="ff87eaf9">remove</span>
     <li><span class="dfn-paneled" id="0fe84b59">signal <small>(for AbortController)</small></span>
     <li><span class="dfn-paneled" id="3f076bc8">signal <small>(for event listener)</small></span>
     <li><span class="dfn-paneled" id="2296404c">signal abort <small>(for AbortController)</small></span>
     <li><span class="dfn-paneled" id="89aef5a4">signal abort <small>(for AbortSignal)</small></span>
     <li><span class="dfn-paneled" id="3c3a94af">type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="570979f1">!</span>
     <li><span class="dfn-paneled" id="ff81eaa7">%Symbol.asyncIterator%</span>
     <li><span class="dfn-paneled" id="971914e6">%Symbol.iterator%</span>
     <li><span class="dfn-paneled" id="8c6dc739">?</span>
     <li><span class="dfn-paneled" id="d2e597b8">AsyncIteratorClose</span>
     <li><span class="dfn-paneled" id="72f4451c">Await</span>
     <li><span class="dfn-paneled" id="1f8de32a">GetIterator</span>
     <li><span class="dfn-paneled" id="5b7339ce">GetMethod</span>
     <li><span class="dfn-paneled" id="45da773f">IsPromise</span>
     <li><span class="dfn-paneled" id="c872f9f3">IteratorClose</span>
     <li><span class="dfn-paneled" id="03487a52">IteratorComplete</span>
     <li><span class="dfn-paneled" id="069eabcc">IteratorNext</span>
     <li><span class="dfn-paneled" id="5d0f228f">IteratorStepValue</span>
     <li><span class="dfn-paneled" id="68d0559e">IteratorValue</span>
     <li><span class="dfn-paneled" id="3ea09d18">Type</span>
     <li><span class="dfn-paneled" id="3aec4bbc">current realm</span>
     <li><span class="dfn-paneled" id="19e79880">Iterator Record</span>
     <li><span class="dfn-paneled" id="4351f192">normal completion</span>
     <li><span class="dfn-paneled" id="b8963c66">NormalCompletion</span>
     <li><span class="dfn-paneled" id="fd82ae84">Object</span>
     <li><span class="dfn-paneled" id="8a0f541d">throw completion</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="3349d69f">associated Document</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="168f1b6e">global object</span>
     <li><span class="dfn-paneled" id="6a288f2a">microtask</span>
     <li><span class="dfn-paneled" id="53079ce3">queue a microtask</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="560275c7">report an exception</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="36858240">boolean</span>
     <li><span class="dfn-paneled" id="7b0d918d">break</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="75393c04">exist <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="1243a891">exist <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="692595fe">ordered set</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
     <li><span class="dfn-paneled" id="cbdc89b4">while</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="ec878a66">RangeError</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="7004c2a7">VoidFunction</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="51276d86">a promise rejected with</span>
     <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
     <li><span class="dfn-paneled" id="cc61f510">an exception was thrown</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="3ab7bf79">callback function</span>
     <li><span class="dfn-paneled" id="10ce5f6f">invoke</span>
     <li><span class="dfn-paneled" id="56f81a8e">new</span>
     <li><span class="dfn-paneled" id="750a2f08">react</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="19ea467c">specific type</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="b4cfa5ce">throw</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
     <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[Exposed=*]
<c- b>interface</c-> <a href="#subscriber"><code><c- g>Subscriber</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-next"><c- g>next</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-subscriber-next-value-value"><code><c- g>value</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-error"><c- g>error</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-subscriber-error-error-error"><code><c- g>error</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-complete"><c- g>complete</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-addteardown"><c- g>addTeardown</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-subscriber-addteardown-teardown-teardown"><code><c- g>teardown</c-></code></a>);

  // True after the Subscriber is created, up until either
  // complete()/error() are invoked, or the subscriber unsubscribes. Inside
  // complete()/error(), this attribute is true.
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-subscriber-active"><c- g>active</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-subscriber-signal"><c- g>signal</c-></a>;
};

// SubscribeCallback is where the Observable "creator's" code lives. It's
// called when subscribe() is called, to set up a new subscription.
<c- b>callback</c-> <a href="#callbackdef-subscribecallback"><code><c- g>SubscribeCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#subscriber"><c- n>Subscriber</c-></a> <a href="#dom-subscribecallback-subscriber"><code><c- g>subscriber</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-observablesubscriptioncallback"><code><c- g>ObservableSubscriptionCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observablesubscriptioncallback-value"><code><c- g>value</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-subscriptionobserver"><code><c- g>SubscriptionObserver</c-></code></a> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-subscriptionobserver-next"><code><c- g>next</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-subscriptionobserver-error"><code><c- g>error</c-></code></a>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-subscriptionobserver-complete"><code><c- g>complete</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-observableinspectoraborthandler"><code><c- g>ObservableInspectorAbortHandler</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observableinspectoraborthandler-value"><code><c- g>value</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-observableinspector"><code><c- g>ObservableInspector</c-></code></a> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-observableinspector-next"><code><c- g>next</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-observableinspector-error"><code><c- g>error</c-></code></a>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-observableinspector-complete"><code><c- g>complete</c-></code></a>;

  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-observableinspector-subscribe"><code><c- g>subscribe</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observableinspectoraborthandler"><c- n>ObservableInspectorAbortHandler</c-></a> <a data-type="ObservableInspectorAbortHandler" href="#dom-observableinspector-abort"><code><c- g>abort</c-></code></a>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-subscriptionobserver"><c- n>SubscriptionObserver</c-></a>) <a href="#typedefdef-observerunion"><code><c- g>ObserverUnion</c-></code></a>;
<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-observableinspector"><c- n>ObservableInspector</c-></a>) <a href="#typedefdef-observableinspectorunion"><code><c- g>ObservableInspectorUnion</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-subscribeoptions"><code><c- g>SubscribeOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-subscribeoptions-signal"><code><c- g>signal</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-predicate"><code><c- g>Predicate</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-predicate-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-predicate-index"><code><c- g>index</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-reducer"><code><c- g>Reducer</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-reducer-accumulator"><code><c- g>accumulator</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-reducer-currentvalue"><code><c- g>currentValue</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-reducer-index"><code><c- g>index</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-mapper"><code><c- g>Mapper</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-mapper-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-mapper-index"><code><c- g>index</c-></code></a>);
// Differs from Mapper only in return type, since this callback is exclusively
// used to visit each element in a sequence, not transform it.
<c- b>callback</c-> <a href="#callbackdef-visitor"><code><c- g>Visitor</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-visitor-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-visitor-index"><code><c- g>index</c-></code></a>);

// This callback returns an `any` that must convert into an `Observable`, via
// the `Observable` conversion semantics.
<c- b>callback</c-> <a href="#callbackdef-catchcallback"><code><c- g>CatchCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-catchcallback-value"><code><c- g>value</c-></code></a>);

[Exposed=*]
<c- b>interface</c-> <a href="#observable"><code><c- g>Observable</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-observable-observable"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-subscribecallback"><c- n>SubscribeCallback</c-></a> <a href="#dom-observable-observable-callback-callback"><code><c- g>callback</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-subscribe"><c- g>subscribe</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observerunion"><c- n>ObserverUnion</c-></a> <a href="#dom-observable-subscribe-observer-options-observer"><code><c- g>observer</c-></code></a> = {}, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-subscribe-observer-options-options"><code><c- g>options</c-></code></a> = {});

  // Constructs a native Observable from value if it's any of the following:
  //   - Observable
  //   - AsyncIterable
  //   - Iterable
  //   - Promise
  <c- b>static</c-> <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-from"><c- g>from</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-from-value-value"><code><c- g>value</c-></code></a>);

  // Observable-returning operators. See "Operators" section in the spec.
  //
  // takeUntil() can consume promises, iterables, async iterables, and other
  // observables.
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-takeuntil"><c- g>takeUntil</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-takeuntil-value-value"><code><c- g>value</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-map"><c- g>map</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-map-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-filter"><c- g>filter</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-filter-predicate-predicate"><code><c- g>predicate</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-take"><c- g>take</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-observable-take-amount-amount"><code><c- g>amount</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-drop"><c- g>drop</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-observable-drop-amount-amount"><code><c- g>amount</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-flatmap"><c- g>flatMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-flatmap-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-switchmap"><c- g>switchMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-switchmap-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-inspect"><c- g>inspect</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observableinspectorunion"><c- n>ObservableInspectorUnion</c-></a> <a href="#dom-observable-inspect-inspectorunion-inspectorunion"><code><c- g>inspectorUnion</c-></code></a> = {});
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-catch"><c- g>catch</c-></a>(<a data-link-type="idl-name" href="#callbackdef-catchcallback"><c- n>CatchCallback</c-></a> <a href="#dom-observable-catch-callback-callback"><code><c- g>callback</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-finally"><c- g>finally</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-observable-finally-callback-callback"><code><c- g>callback</c-></code></a>);

  // Promise-returning operators.
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-observable-toarray"><c- g>toArray</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-toarray-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-foreach"><c- g>forEach</c-></a>(<a data-link-type="idl-name" href="#callbackdef-visitor"><c- n>Visitor</c-></a> <a href="#dom-observable-foreach-callback-options-callback"><code><c- g>callback</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-foreach-callback-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-every"><c- g>every</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-every-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-every-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-first"><c- g>first</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-first-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-last"><c- g>last</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-last-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-find"><c- g>find</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-find-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-find-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-some"><c- g>some</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-some-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-some-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-reduce"><c- g>reduce</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reducer"><c- n>Reducer</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-reducer"><code><c- g>reducer</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-initialvalue"><code><c- g>initialValue</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-observableeventlisteneroptions"><code><c- g>ObservableEventListenerOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-observableeventlisteneroptions-capture"><code><c- g>capture</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-observableeventlisteneroptions-passive"><code><c- g>passive</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget"><c- g>EventTarget</c-></a> {
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-eventtarget-when"><c- g>when</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-eventtarget-when-type-options-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-observableeventlisteneroptions"><c- n>ObservableEventListenerOptions</c-></a> <a href="#dom-eventtarget-when-type-options-options"><code><c- g>options</c-></code></a> = {});
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> We shouldn’t invoke <code class="idl"><a data-link-type="idl" href="#dom-observable-from">from()</a></code> directly. Rather, we should call some
 internal algorithm that passes-back the exceptions for us to handle properly here, since we
 want to pipe them to <var>subscriber</var>. <a class="issue-return" href="#issue-4eb2abb1" title="Jump to section">↵</a></div>
   <div class="issue"> This matches Chromium’s implementation, but consider holding a reference
 to the originally-passed-in <code class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions">SubscribeOptions</a></code>’s <code class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal">signal</a></code> and just invoking <var>abort callback</var> when <em>it</em> aborts. The result is likely the
 same, but needs investigation. <a class="issue-return" href="#issue-bfe2caf4" title="Jump to section">↵</a></div>
   <div class="issue"> We shouldn’t invoke <code class="idl"><a data-link-type="idl" href="#dom-observable-from">from()</a></code> directly. Rather, we should call
  some internal algorithm that passes-back the exceptions for us to handle properly
  here, since we want to pipe them to <var>subscriber</var>. <a class="issue-return" href="#issue-4eb2abb1①" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"03487a52": {"dfnID":"03487a52","dfnText":"IteratorComplete","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iteratorcomplete"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete"},
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"},{"id":"ref-for-list-empty\u2460"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-list-empty\u2461"},{"id":"ref-for-list-empty\u2462"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"06950d36": {"dfnID":"06950d36","dfnText":"event listener","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-event-listener"},{"id":"ref-for-concept-event-listener\u2460"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#concept-event-listener"},
"069eabcc": {"dfnID":"069eabcc","dfnText":"IteratorNext","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iteratornext"},{"id":"ref-for-sec-iteratornext\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"},{"id":"ref-for-fully-active\u2460"},{"id":"ref-for-fully-active\u2461"},{"id":"ref-for-fully-active\u2462"},{"id":"ref-for-fully-active\u2463"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-fully-active\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-fully-active\u2465"}],"title":"3. EventTarget integration"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"0fe84b59": {"dfnID":"0fe84b59","dfnText":"signal (for AbortController)","external":true,"refSections":[{"refs":[{"id":"ref-for-abortcontroller-signal"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-abortcontroller-signal\u2460"},{"id":"ref-for-abortcontroller-signal\u2461"},{"id":"ref-for-abortcontroller-signal\u2462"},{"id":"ref-for-abortcontroller-signal\u2463"},{"id":"ref-for-abortcontroller-signal\u2464"},{"id":"ref-for-abortcontroller-signal\u2465"},{"id":"ref-for-abortcontroller-signal\u2466"},{"id":"ref-for-abortcontroller-signal\u2467"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-abortcontroller-signal\u2468"},{"id":"ref-for-abortcontroller-signal\u2460\u24ea"},{"id":"ref-for-abortcontroller-signal\u2460\u2460"},{"id":"ref-for-abortcontroller-signal\u2460\u2461"},{"id":"ref-for-abortcontroller-signal\u2460\u2462"},{"id":"ref-for-abortcontroller-signal\u2460\u2463"},{"id":"ref-for-abortcontroller-signal\u2460\u2464"},{"id":"ref-for-abortcontroller-signal\u2460\u2465"},{"id":"ref-for-abortcontroller-signal\u2460\u2466"},{"id":"ref-for-abortcontroller-signal\u2460\u2467"},{"id":"ref-for-abortcontroller-signal\u2460\u2468"},{"id":"ref-for-abortcontroller-signal\u2461\u24ea"},{"id":"ref-for-abortcontroller-signal\u2461\u2460"},{"id":"ref-for-abortcontroller-signal\u2461\u2461"},{"id":"ref-for-abortcontroller-signal\u2461\u2462"},{"id":"ref-for-abortcontroller-signal\u2461\u2463"},{"id":"ref-for-abortcontroller-signal\u2461\u2464"},{"id":"ref-for-abortcontroller-signal\u2461\u2465"},{"id":"ref-for-abortcontroller-signal\u2461\u2466"},{"id":"ref-for-abortcontroller-signal\u2461\u2467"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortcontroller-signal\u2461\u2468"},{"id":"ref-for-abortcontroller-signal\u2462\u24ea"},{"id":"ref-for-abortcontroller-signal\u2462\u2460"},{"id":"ref-for-abortcontroller-signal\u2462\u2461"},{"id":"ref-for-abortcontroller-signal\u2462\u2462"},{"id":"ref-for-abortcontroller-signal\u2462\u2463"}],"title":"2.3.3. Promise-returning operators"},{"refs":[{"id":"ref-for-abortcontroller-signal\u2462\u2464"},{"id":"ref-for-abortcontroller-signal\u2462\u2465"},{"id":"ref-for-abortcontroller-signal\u2462\u2466"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#abortcontroller-signal"},
"10ce5f6f": {"dfnID":"10ce5f6f","dfnText":"invoke","external":true,"refSections":[{"refs":[{"id":"ref-for-invoke-a-callback-function"},{"id":"ref-for-invoke-a-callback-function\u2460"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-invoke-a-callback-function\u2461"},{"id":"ref-for-invoke-a-callback-function\u2462"},{"id":"ref-for-invoke-a-callback-function\u2463"},{"id":"ref-for-invoke-a-callback-function\u2464"},{"id":"ref-for-invoke-a-callback-function\u2465"},{"id":"ref-for-invoke-a-callback-function\u2466"},{"id":"ref-for-invoke-a-callback-function\u2467"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-invoke-a-callback-function\u2468"},{"id":"ref-for-invoke-a-callback-function\u2460\u24ea"},{"id":"ref-for-invoke-a-callback-function\u2460\u2460"},{"id":"ref-for-invoke-a-callback-function\u2460\u2461"},{"id":"ref-for-invoke-a-callback-function\u2460\u2462"},{"id":"ref-for-invoke-a-callback-function\u2460\u2463"},{"id":"ref-for-invoke-a-callback-function\u2460\u2464"},{"id":"ref-for-invoke-a-callback-function\u2460\u2465"},{"id":"ref-for-invoke-a-callback-function\u2460\u2466"},{"id":"ref-for-invoke-a-callback-function\u2460\u2467"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-invoke-a-callback-function\u2460\u2468"},{"id":"ref-for-invoke-a-callback-function\u2461\u24ea"},{"id":"ref-for-invoke-a-callback-function\u2461\u2460"},{"id":"ref-for-invoke-a-callback-function\u2461\u2461"},{"id":"ref-for-invoke-a-callback-function\u2461\u2462"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#invoke-a-callback-function"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"},{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-map-exists\u2460\u24ea"}],"title":"3. EventTarget integration"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"129bdae8": {"dfnID":"129bdae8","dfnText":"Event","external":true,"refSections":[{"refs":[{"id":"ref-for-event"},{"id":"ref-for-event\u2460"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#event"},
"168f1b6e": {"dfnID":"168f1b6e","dfnText":"global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-realm-global"}],"title":"2.2.1. Supporting concepts"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"},{"id":"ref-for-list-iterate\u2460"},{"id":"ref-for-list-iterate\u2461"},{"id":"ref-for-list-iterate\u2462"}],"title":"2.1. The Subscriber interface"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"19e79880": {"dfnID":"19e79880","dfnText":"Iterator Record","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iterator-records"},{"id":"ref-for-sec-iterator-records\u2460"},{"id":"ref-for-sec-iterator-records\u2461"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-iterator-records"},
"19ea467c": {"dfnID":"19ea467c","dfnText":"specific type","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-specific-type"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org/#dfn-specific-type"},
"1f8de32a": {"dfnID":"1f8de32a","dfnText":"GetIterator","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-getiterator"},{"id":"ref-for-sec-getiterator\u2460"},{"id":"ref-for-sec-getiterator\u2461"},{"id":"ref-for-sec-getiterator\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"},
"2296404c": {"dfnID":"2296404c","dfnText":"signal abort (for AbortController)","external":true,"refSections":[{"refs":[{"id":"ref-for-abortcontroller-signal-abort"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortcontroller-signal-abort\u2460"},{"id":"ref-for-abortcontroller-signal-abort\u2461"},{"id":"ref-for-abortcontroller-signal-abort\u2462"},{"id":"ref-for-abortcontroller-signal-abort\u2463"},{"id":"ref-for-abortcontroller-signal-abort\u2464"},{"id":"ref-for-abortcontroller-signal-abort\u2465"},{"id":"ref-for-abortcontroller-signal-abort\u2466"},{"id":"ref-for-abortcontroller-signal-abort\u2467"},{"id":"ref-for-abortcontroller-signal-abort\u2468"},{"id":"ref-for-abortcontroller-signal-abort\u2460\u24ea"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#abortcontroller-signal-abort"},
"2bc0cdf4": {"dfnID":"2bc0cdf4","dfnText":"EventTarget","external":true,"refSections":[{"refs":[{"id":"ref-for-eventtarget"},{"id":"ref-for-eventtarget\u2460"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#eventtarget"},
"2e66eaf1": {"dfnID":"2e66eaf1","dfnText":"AbortController","external":true,"refSections":[{"refs":[{"id":"ref-for-abortcontroller"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-abortcontroller\u2460"},{"id":"ref-for-abortcontroller\u2461"},{"id":"ref-for-abortcontroller\u2462"},{"id":"ref-for-abortcontroller\u2463"},{"id":"ref-for-abortcontroller\u2464"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortcontroller\u2465"},{"id":"ref-for-abortcontroller\u2466"},{"id":"ref-for-abortcontroller\u2467"},{"id":"ref-for-abortcontroller\u2468"},{"id":"ref-for-abortcontroller\u2460\u24ea"},{"id":"ref-for-abortcontroller\u2460\u2460"},{"id":"ref-for-abortcontroller\u2460\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#abortcontroller"},
"2e75f88e": {"dfnID":"2e75f88e","dfnText":"capture","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-capture"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org#event-listener-capture"},
"3349d69f": {"dfnID":"3349d69f","dfnText":"associated Document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-window"},{"id":"ref-for-concept-document-window\u2460"},{"id":"ref-for-concept-document-window\u2461"},{"id":"ref-for-concept-document-window\u2462"},{"id":"ref-for-concept-document-window\u2463"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-concept-document-window\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-concept-document-window\u2465"}],"title":"3. EventTarget integration"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"36858240": {"dfnID":"36858240","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-boolean"},{"id":"ref-for-boolean\u2460"},{"id":"ref-for-boolean\u2461"},{"id":"ref-for-boolean\u2462"},{"id":"ref-for-boolean\u2463"},{"id":"ref-for-boolean\u2464"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-boolean\u2465"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://infra.spec.whatwg.org/#boolean"},
"3ab7bf79": {"dfnID":"3ab7bf79","dfnText":"callback function","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-callback-function"},{"id":"ref-for-dfn-callback-function\u2460"},{"id":"ref-for-dfn-callback-function\u2461"},{"id":"ref-for-dfn-callback-function\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org/#dfn-callback-function"},
"3aec4bbc": {"dfnID":"3aec4bbc","dfnText":"current realm","external":true,"refSections":[{"refs":[{"id":"ref-for-current-realm"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-current-realm\u2460"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-current-realm\u2461"},{"id":"ref-for-current-realm\u2462"},{"id":"ref-for-current-realm\u2463"},{"id":"ref-for-current-realm\u2464"},{"id":"ref-for-current-realm\u2465"},{"id":"ref-for-current-realm\u2466"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://tc39.es/ecma262/#current-realm"},
"3b90bdcd": {"dfnID":"3b90bdcd","dfnText":"resolve","external":true,"refSections":[{"refs":[{"id":"ref-for-resolve"},{"id":"ref-for-resolve\u2460"},{"id":"ref-for-resolve\u2461"},{"id":"ref-for-resolve\u2462"},{"id":"ref-for-resolve\u2463"},{"id":"ref-for-resolve\u2464"},{"id":"ref-for-resolve\u2465"},{"id":"ref-for-resolve\u2466"},{"id":"ref-for-resolve\u2467"},{"id":"ref-for-resolve\u2468"},{"id":"ref-for-resolve\u2460\u24ea"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#resolve"},
"3c3a94af": {"dfnID":"3c3a94af","dfnText":"type","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-type"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org#event-listener-type"},
"3ea09d18": {"dfnID":"3ea09d18","dfnText":"Type","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-ecmascript-data-types-and-values"},{"id":"ref-for-sec-ecmascript-data-types-and-values\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values"},
"3f076bc8": {"dfnID":"3f076bc8","dfnText":"signal (for event listener)","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-signal"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org#event-listener-signal"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"},{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"},{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"},{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"},{"id":"ref-for-this\u2460\u2463"},{"id":"ref-for-this\u2460\u2464"},{"id":"ref-for-this\u2460\u2465"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-this\u2460\u2466"},{"id":"ref-for-this\u2460\u2467"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-this\u2460\u2468"},{"id":"ref-for-this\u2461\u24ea"},{"id":"ref-for-this\u2461\u2460"},{"id":"ref-for-this\u2461\u2461"},{"id":"ref-for-this\u2461\u2462"},{"id":"ref-for-this\u2461\u2463"},{"id":"ref-for-this\u2461\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-this\u2461\u2465"},{"id":"ref-for-this\u2461\u2466"},{"id":"ref-for-this\u2461\u2467"},{"id":"ref-for-this\u2461\u2468"},{"id":"ref-for-this\u2462\u24ea"},{"id":"ref-for-this\u2462\u2460"},{"id":"ref-for-this\u2462\u2461"},{"id":"ref-for-this\u2462\u2462"},{"id":"ref-for-this\u2462\u2463"},{"id":"ref-for-this\u2462\u2464"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-this\u2462\u2465"},{"id":"ref-for-this\u2462\u2466"},{"id":"ref-for-this\u2462\u2467"},{"id":"ref-for-this\u2462\u2468"},{"id":"ref-for-this\u2463\u24ea"},{"id":"ref-for-this\u2463\u2460"},{"id":"ref-for-this\u2463\u2461"},{"id":"ref-for-this\u2463\u2462"},{"id":"ref-for-this\u2463\u2463"},{"id":"ref-for-this\u2463\u2464"},{"id":"ref-for-this\u2463\u2465"}],"title":"2.3.3. Promise-returning operators"},{"refs":[{"id":"ref-for-this\u2463\u2466"},{"id":"ref-for-this\u2463\u2467"}],"title":"3. EventTarget integration"}],"url":"https://webidl.spec.whatwg.org/#this"},
"4351f192": {"dfnID":"4351f192","dfnText":"normal completion","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-completion-record-specification-type"},{"id":"ref-for-sec-completion-record-specification-type\u2460"},{"id":"ref-for-sec-completion-record-specification-type\u2461"},{"id":"ref-for-sec-completion-record-specification-type\u2462"},{"id":"ref-for-sec-completion-record-specification-type\u2463"},{"id":"ref-for-sec-completion-record-specification-type\u2464"},{"id":"ref-for-sec-completion-record-specification-type\u2465"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-completion-record-specification-type"},
"45da773f": {"dfnID":"45da773f","dfnText":"IsPromise","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-ispromise"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise"},
"51276d86": {"dfnID":"51276d86","dfnText":"a promise rejected with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org#a-promise-rejected-with"},
"53079ce3": {"dfnID":"53079ce3","dfnText":"queue a microtask","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-microtask"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-list-append\u2460"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-list-append\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"535dd335": {"dfnID":"535dd335","dfnText":"aborted","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-aborted"},{"id":"ref-for-abortsignal-aborted\u2460"},{"id":"ref-for-abortsignal-aborted\u2461"},{"id":"ref-for-abortsignal-aborted\u2462"},{"id":"ref-for-abortsignal-aborted\u2463"},{"id":"ref-for-abortsignal-aborted\u2464"},{"id":"ref-for-abortsignal-aborted\u2465"},{"id":"ref-for-abortsignal-aborted\u2466"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-abortsignal-aborted\u2467"},{"id":"ref-for-abortsignal-aborted\u2468"},{"id":"ref-for-abortsignal-aborted\u2460\u24ea"},{"id":"ref-for-abortsignal-aborted\u2460\u2460"},{"id":"ref-for-abortsignal-aborted\u2460\u2461"},{"id":"ref-for-abortsignal-aborted\u2460\u2462"},{"id":"ref-for-abortsignal-aborted\u2460\u2463"},{"id":"ref-for-abortsignal-aborted\u2460\u2464"}],"title":"2.3.3. Promise-returning operators"},{"refs":[{"id":"ref-for-abortsignal-aborted\u2460\u2465"},{"id":"ref-for-abortsignal-aborted\u2460\u2466"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#abortsignal-aborted"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"},{"id":"ref-for-idl-boolean\u2462"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-idl-boolean\u2463"},{"id":"ref-for-idl-boolean\u2464"}],"title":"3. EventTarget integration"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"560275c7": {"dfnID":"560275c7","dfnText":"report an exception","external":true,"refSections":[{"refs":[{"id":"ref-for-report-an-exception"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-report-an-exception\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception"},
"56f81a8e": {"dfnID":"56f81a8e","dfnText":"new","external":true,"refSections":[{"refs":[{"id":"ref-for-new"},{"id":"ref-for-new\u2460"},{"id":"ref-for-new\u2461"},{"id":"ref-for-new\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-new\u2463"},{"id":"ref-for-new\u2464"},{"id":"ref-for-new\u2465"},{"id":"ref-for-new\u2466"},{"id":"ref-for-new\u2467"},{"id":"ref-for-new\u2468"},{"id":"ref-for-new\u2460\u24ea"},{"id":"ref-for-new\u2460\u2460"},{"id":"ref-for-new\u2460\u2461"},{"id":"ref-for-new\u2460\u2462"},{"id":"ref-for-new\u2460\u2463"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-new\u2460\u2464"},{"id":"ref-for-new\u2460\u2465"},{"id":"ref-for-new\u2460\u2466"},{"id":"ref-for-new\u2460\u2467"},{"id":"ref-for-new\u2460\u2468"},{"id":"ref-for-new\u2461\u24ea"}],"title":"2.3.3. Promise-returning operators"},{"refs":[{"id":"ref-for-new\u2461\u2460"}],"title":"3. EventTarget integration"}],"url":"https://webidl.spec.whatwg.org/#new"},
"570979f1": {"dfnID":"570979f1","dfnText":"!","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-returnifabrupt-shorthands"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2460"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2461"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2462"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2463"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"},
"5b7339ce": {"dfnID":"5b7339ce","dfnText":"GetMethod","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-getmethod"},{"id":"ref-for-sec-getmethod\u2460"},{"id":"ref-for-sec-getmethod\u2461"},{"id":"ref-for-sec-getmethod\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"},
"5d0f228f": {"dfnID":"5d0f228f","dfnText":"IteratorStepValue","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iteratorstepvalue"},{"id":"ref-for-sec-iteratorstepvalue\u2460"},{"id":"ref-for-sec-iteratorstepvalue\u2461"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"},{"id":"ref-for-window\u2460"},{"id":"ref-for-window\u2461"},{"id":"ref-for-window\u2462"},{"id":"ref-for-window\u2463"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-window\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-window\u2465"}],"title":"3. EventTarget integration"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"},{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-idl-undefined\u2463"},{"id":"ref-for-idl-undefined\u2464"},{"id":"ref-for-idl-undefined\u2465"},{"id":"ref-for-idl-undefined\u2466"},{"id":"ref-for-idl-undefined\u2467"},{"id":"ref-for-idl-undefined\u2468"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-idl-undefined\u2460\u24ea"},{"id":"ref-for-idl-undefined\u2460\u2460"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"622d9f0e": {"dfnID":"622d9f0e","dfnText":"callback","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-callback"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#event-listener-callback"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-list\u2462"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://infra.spec.whatwg.org/#list"},
"670f0339": {"dfnID":"670f0339","dfnText":"abort reason","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-abort-reason"},{"id":"ref-for-abortsignal-abort-reason\u2460"},{"id":"ref-for-abortsignal-abort-reason\u2461"},{"id":"ref-for-abortsignal-abort-reason\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-abortsignal-abort-reason\u2463"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortsignal-abort-reason\u2464"},{"id":"ref-for-abortsignal-abort-reason\u2465"},{"id":"ref-for-abortsignal-abort-reason\u2466"},{"id":"ref-for-abortsignal-abort-reason\u2467"},{"id":"ref-for-abortsignal-abort-reason\u2468"},{"id":"ref-for-abortsignal-abort-reason\u2460\u24ea"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2460"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2461"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2462"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2463"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2464"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2465"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2466"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2467"},{"id":"ref-for-abortsignal-abort-reason\u2460\u2468"},{"id":"ref-for-abortsignal-abort-reason\u2461\u24ea"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org#abortsignal-abort-reason"},
"68d0559e": {"dfnID":"68d0559e","dfnText":"IteratorValue","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iteratorvalue"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue"},
"692595fe": {"dfnID":"692595fe","dfnText":"ordered set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"}],"title":"2.1. The Subscriber interface"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"6a288f2a": {"dfnID":"6a288f2a","dfnText":"microtask","external":true,"refSections":[{"refs":[{"id":"ref-for-microtask"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#microtask"},
"6c6b1005": {"dfnID":"6c6b1005","dfnText":"any","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-any"},{"id":"ref-for-idl-any\u2460"},{"id":"ref-for-idl-any\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-idl-any\u2462"},{"id":"ref-for-idl-any\u2463"},{"id":"ref-for-idl-any\u2464"},{"id":"ref-for-idl-any\u2465"},{"id":"ref-for-idl-any\u2466"},{"id":"ref-for-idl-any\u2467"},{"id":"ref-for-idl-any\u2468"},{"id":"ref-for-idl-any\u2460\u24ea"},{"id":"ref-for-idl-any\u2460\u2460"},{"id":"ref-for-idl-any\u2460\u2461"},{"id":"ref-for-idl-any\u2460\u2462"},{"id":"ref-for-idl-any\u2460\u2463"},{"id":"ref-for-idl-any\u2460\u2464"},{"id":"ref-for-idl-any\u2460\u2465"},{"id":"ref-for-idl-any\u2460\u2466"},{"id":"ref-for-idl-any\u2460\u2467"},{"id":"ref-for-idl-any\u2460\u2468"},{"id":"ref-for-idl-any\u2461\u24ea"},{"id":"ref-for-idl-any\u2461\u2460"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-idl-any\u2461\u2461"},{"id":"ref-for-idl-any\u2461\u2462"},{"id":"ref-for-idl-any\u2461\u2463"},{"id":"ref-for-idl-any\u2461\u2464"},{"id":"ref-for-idl-any\u2461\u2465"},{"id":"ref-for-idl-any\u2461\u2466"},{"id":"ref-for-idl-any\u2461\u2467"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-idl-any\u2461\u2468"},{"id":"ref-for-idl-any\u2462\u24ea"},{"id":"ref-for-idl-any\u2462\u2460"},{"id":"ref-for-idl-any\u2462\u2461"},{"id":"ref-for-idl-any\u2462\u2462"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-idl-any\u2462\u2463"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#idl-any"},
"7004c2a7": {"dfnID":"7004c2a7","dfnText":"VoidFunction","external":true,"refSections":[{"refs":[{"id":"ref-for-VoidFunction"},{"id":"ref-for-VoidFunction\u2460"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-VoidFunction\u2461"},{"id":"ref-for-VoidFunction\u2462"},{"id":"ref-for-VoidFunction\u2463"},{"id":"ref-for-VoidFunction\u2464"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-VoidFunction\u2465"},{"id":"ref-for-VoidFunction\u2466"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://webidl.spec.whatwg.org/#VoidFunction"},
"711357e0": {"dfnID":"711357e0","dfnText":"abort","external":true,"refSections":[{"refs":[{"id":"ref-for-eventdef-abortsignal-abort"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#eventdef-abortsignal-abort"},
"72f4451c": {"dfnID":"72f4451c","dfnText":"Await","external":true,"refSections":[{"refs":[{"id":"ref-for-await"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await"},
"750a2f08": {"dfnID":"750a2f08","dfnText":"react","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-perform-steps-once-promise-is-settled"},{"id":"ref-for-dfn-perform-steps-once-promise-is-settled\u2460"},{"id":"ref-for-dfn-perform-steps-once-promise-is-settled\u2461"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"},
"75264195": {"dfnID":"75264195","dfnText":"passive","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-passive"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org#event-listener-passive"},
"75393c04": {"dfnID":"75393c04","dfnText":"exist (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"},{"id":"ref-for-assert\u2460"},{"id":"ref-for-assert\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-assert\u2462"},{"id":"ref-for-assert\u2463"},{"id":"ref-for-assert\u2464"},{"id":"ref-for-assert\u2465"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-assert\u2466"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://infra.spec.whatwg.org/#assert"},
"7b0d918d": {"dfnID":"7b0d918d","dfnText":"break","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-break"},{"id":"ref-for-iteration-break\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://infra.spec.whatwg.org/#iteration-break"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"},{"id":"ref-for-exceptiondef-typeerror\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2461"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2462"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"2.1. The Subscriber interface"}],"url":"https://dom.spec.whatwg.org/#document"},
"87bc23a5": {"dfnID":"87bc23a5","dfnText":"add","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-add"},{"id":"ref-for-abortsignal-add\u2460"},{"id":"ref-for-abortsignal-add\u2461"},{"id":"ref-for-abortsignal-add\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-abortsignal-add\u2463"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortsignal-add\u2464"},{"id":"ref-for-abortsignal-add\u2465"},{"id":"ref-for-abortsignal-add\u2466"},{"id":"ref-for-abortsignal-add\u2467"},{"id":"ref-for-abortsignal-add\u2468"},{"id":"ref-for-abortsignal-add\u2460\u24ea"},{"id":"ref-for-abortsignal-add\u2460\u2460"},{"id":"ref-for-abortsignal-add\u2460\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#abortsignal-add"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"}],"title":"3. EventTarget integration"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"89aef5a4": {"dfnID":"89aef5a4","dfnText":"signal abort (for AbortSignal)","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-signal-abort"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-abortsignal-signal-abort\u2460"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortsignal-signal-abort\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org#abortsignal-signal-abort"},
"8a0f541d": {"dfnID":"8a0f541d","dfnText":"throw completion","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-completion-record-specification-type"},{"id":"ref-for-sec-completion-record-specification-type\u2460"},{"id":"ref-for-sec-completion-record-specification-type\u2461"},{"id":"ref-for-sec-completion-record-specification-type\u2462"},{"id":"ref-for-sec-completion-record-specification-type\u2463"},{"id":"ref-for-sec-completion-record-specification-type\u2464"},{"id":"ref-for-sec-completion-record-specification-type\u2465"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-completion-record-specification-type"},
"8c6dc739": {"dfnID":"8c6dc739","dfnText":"?","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-returnifabrupt-shorthands"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2460"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2461"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2462"},{"id":"ref-for-sec-returnifabrupt-shorthands\u2463"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"},
"8f5c2179": {"dfnID":"8f5c2179","dfnText":"a promise resolved with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-resolved-with"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"8fc9882c": {"dfnID":"8fc9882c","dfnText":"once","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-once"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org#event-listener-once"},
"971914e6": {"dfnID":"971914e6","dfnText":"%Symbol.iterator%","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-well-known-symbols"},{"id":"ref-for-sec-well-known-symbols\u2460"},{"id":"ref-for-sec-well-known-symbols\u2461"},{"id":"ref-for-sec-well-known-symbols\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols"},
"984221ca": {"dfnID":"984221ca","dfnText":"struct","external":true,"refSections":[{"refs":[{"id":"ref-for-struct"},{"id":"ref-for-struct\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://infra.spec.whatwg.org/#struct"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"},{"id":"ref-for-list-remove\u2460"},{"id":"ref-for-list-remove\u2461"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-list-remove\u2462"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"}],"title":"2.2. The Observable interface"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"},{"id":"ref-for-set-append\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"b262501e": {"dfnID":"b262501e","dfnText":"reject","external":true,"refSections":[{"refs":[{"id":"ref-for-reject"},{"id":"ref-for-reject\u2460"},{"id":"ref-for-reject\u2461"},{"id":"ref-for-reject\u2462"},{"id":"ref-for-reject\u2463"},{"id":"ref-for-reject\u2464"},{"id":"ref-for-reject\u2465"},{"id":"ref-for-reject\u2466"},{"id":"ref-for-reject\u2467"},{"id":"ref-for-reject\u2468"},{"id":"ref-for-reject\u2460\u24ea"},{"id":"ref-for-reject\u2460\u2460"},{"id":"ref-for-reject\u2460\u2461"},{"id":"ref-for-reject\u2460\u2462"},{"id":"ref-for-reject\u2460\u2463"},{"id":"ref-for-reject\u2460\u2464"},{"id":"ref-for-reject\u2460\u2465"},{"id":"ref-for-reject\u2460\u2466"},{"id":"ref-for-reject\u2460\u2467"},{"id":"ref-for-reject\u2460\u2468"},{"id":"ref-for-reject\u2461\u24ea"},{"id":"ref-for-reject\u2461\u2460"},{"id":"ref-for-reject\u2461\u2461"},{"id":"ref-for-reject\u2461\u2462"},{"id":"ref-for-reject\u2461\u2463"},{"id":"ref-for-reject\u2461\u2464"},{"id":"ref-for-reject\u2461\u2465"},{"id":"ref-for-reject\u2461\u2466"},{"id":"ref-for-reject\u2461\u2467"},{"id":"ref-for-reject\u2461\u2468"},{"id":"ref-for-reject\u2462\u24ea"},{"id":"ref-for-reject\u2462\u2460"},{"id":"ref-for-reject\u2462\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#reject"},
"b4cfa5ce": {"dfnID":"b4cfa5ce","dfnText":"throw","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-throw"},{"id":"ref-for-dfn-throw\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"b8963c66": {"dfnID":"b8963c66","dfnText":"NormalCompletion","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-normalcompletion"},{"id":"ref-for-sec-normalcompletion\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-normalcompletion"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"},{"id":"ref-for-idl-promise\u2461"},{"id":"ref-for-idl-promise\u2462"},{"id":"ref-for-idl-promise\u2463"},{"id":"ref-for-idl-promise\u2464"},{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-idl-promise\u2467"},{"id":"ref-for-idl-promise\u2468"},{"id":"ref-for-idl-promise\u2460\u24ea"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-idl-promise\u2460\u2460"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"c872f9f3": {"dfnID":"c872f9f3","dfnText":"IteratorClose","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iteratorclose"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose"},
"c88f3887": {"dfnID":"c88f3887","dfnText":"item","external":true,"refSections":[{"refs":[{"id":"ref-for-struct-item"}],"title":"2.2.1. Supporting concepts"}],"url":"https://infra.spec.whatwg.org/#struct-item"},
"c9db6cec": {"dfnID":"c9db6cec","dfnText":"create a dependent abort signal","external":true,"refSections":[{"refs":[{"id":"ref-for-create-a-dependent-abort-signal"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-create-a-dependent-abort-signal\u2460"},{"id":"ref-for-create-a-dependent-abort-signal\u2461"},{"id":"ref-for-create-a-dependent-abort-signal\u2462"},{"id":"ref-for-create-a-dependent-abort-signal\u2463"},{"id":"ref-for-create-a-dependent-abort-signal\u2464"},{"id":"ref-for-create-a-dependent-abort-signal\u2465"},{"id":"ref-for-create-a-dependent-abort-signal\u2466"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"},
"callbackdef-catchcallback": {"dfnID":"callbackdef-catchcallback","dfnText":"CatchCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-catchcallback"}],"title":"2.2. The Observable interface"}],"url":"#callbackdef-catchcallback"},
"callbackdef-mapper": {"dfnID":"callbackdef-mapper","dfnText":"Mapper","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-mapper"},{"id":"ref-for-callbackdef-mapper\u2460"},{"id":"ref-for-callbackdef-mapper\u2461"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-callbackdef-mapper\u2462"},{"id":"ref-for-callbackdef-mapper\u2463"}],"title":"2.3.2. Observable-returning operators"}],"url":"#callbackdef-mapper"},
"callbackdef-observableinspectoraborthandler": {"dfnID":"callbackdef-observableinspectoraborthandler","dfnText":"ObservableInspectorAbortHandler","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-observableinspectoraborthandler"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-callbackdef-observableinspectoraborthandler\u2460"}],"title":"2.3.2. Observable-returning operators"}],"url":"#callbackdef-observableinspectoraborthandler"},
"callbackdef-observablesubscriptioncallback": {"dfnID":"callbackdef-observablesubscriptioncallback","dfnText":"ObservableSubscriptionCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-observablesubscriptioncallback"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2460"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2461"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2462"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2463"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2464"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2465"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2466"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2467"},{"id":"ref-for-callbackdef-observablesubscriptioncallback\u2468"}],"title":"2.3.2. Observable-returning operators"}],"url":"#callbackdef-observablesubscriptioncallback"},
"callbackdef-predicate": {"dfnID":"callbackdef-predicate","dfnText":"Predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-predicate"},{"id":"ref-for-callbackdef-predicate\u2460"},{"id":"ref-for-callbackdef-predicate\u2461"},{"id":"ref-for-callbackdef-predicate\u2462"}],"title":"2.2. The Observable interface"}],"url":"#callbackdef-predicate"},
"callbackdef-reducer": {"dfnID":"callbackdef-reducer","dfnText":"Reducer","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-reducer"}],"title":"2.2. The Observable interface"}],"url":"#callbackdef-reducer"},
"callbackdef-subscribecallback": {"dfnID":"callbackdef-subscribecallback","dfnText":"SubscribeCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-subscribecallback"},{"id":"ref-for-callbackdef-subscribecallback\u2460"},{"id":"ref-for-callbackdef-subscribecallback\u2461"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-callbackdef-subscribecallback\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"#callbackdef-subscribecallback"},
"callbackdef-visitor": {"dfnID":"callbackdef-visitor","dfnText":"Visitor","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-visitor"}],"title":"2.2. The Observable interface"}],"url":"#callbackdef-visitor"},
"cbdc89b4": {"dfnID":"cbdc89b4","dfnText":"while","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-while"}],"title":"2.2.1. Supporting concepts"}],"url":"https://infra.spec.whatwg.org/#iteration-while"},
"cc61f510": {"dfnID":"cc61f510","dfnText":"an exception was thrown","external":true,"refSections":[{"refs":[{"id":"ref-for-an-exception-was-thrown"},{"id":"ref-for-an-exception-was-thrown\u2460"},{"id":"ref-for-an-exception-was-thrown\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-an-exception-was-thrown\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-an-exception-was-thrown\u2463"},{"id":"ref-for-an-exception-was-thrown\u2464"},{"id":"ref-for-an-exception-was-thrown\u2465"},{"id":"ref-for-an-exception-was-thrown\u2466"},{"id":"ref-for-an-exception-was-thrown\u2467"},{"id":"ref-for-an-exception-was-thrown\u2468"},{"id":"ref-for-an-exception-was-thrown\u2460\u24ea"},{"id":"ref-for-an-exception-was-thrown\u2460\u2460"},{"id":"ref-for-an-exception-was-thrown\u2460\u2461"},{"id":"ref-for-an-exception-was-thrown\u2460\u2462"},{"id":"ref-for-an-exception-was-thrown\u2460\u2463"},{"id":"ref-for-an-exception-was-thrown\u2460\u2464"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-an-exception-was-thrown\u2460\u2465"},{"id":"ref-for-an-exception-was-thrown\u2460\u2466"},{"id":"ref-for-an-exception-was-thrown\u2460\u2467"},{"id":"ref-for-an-exception-was-thrown\u2460\u2468"},{"id":"ref-for-an-exception-was-thrown\u2461\u24ea"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#an-exception-was-thrown"},
"cca3cdb2": {"dfnID":"cca3cdb2","dfnText":"AbortSignal","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-abortsignal\u2460"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-abortsignal\u2461"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-abortsignal\u2462"},{"id":"ref-for-abortsignal\u2463"},{"id":"ref-for-abortsignal\u2464"},{"id":"ref-for-abortsignal\u2465"},{"id":"ref-for-abortsignal\u2466"},{"id":"ref-for-abortsignal\u2467"},{"id":"ref-for-abortsignal\u2468"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://dom.spec.whatwg.org/#abortsignal"},
"close-a-subscription": {"dfnID":"close-a-subscription","dfnText":"close a subscription","external":false,"refSections":[{"refs":[{"id":"ref-for-close-a-subscription"},{"id":"ref-for-close-a-subscription\u2460"},{"id":"ref-for-close-a-subscription\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-close-a-subscription\u2462"},{"id":"ref-for-close-a-subscription\u2463"},{"id":"ref-for-close-a-subscription\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-close-a-subscription\u2465"}],"title":"2.3.3. Promise-returning operators"}],"url":"#close-a-subscription"},
"d2e597b8": {"dfnID":"d2e597b8","dfnText":"AsyncIteratorClose","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-asynciteratorclose"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose"},
"d30f4c38": {"dfnID":"d30f4c38","dfnText":"EventListener","external":true,"refSections":[{"refs":[{"id":"ref-for-callbackdef-eventlistener"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#callbackdef-eventlistener"},
"dacde8b5": {"dfnID":"dacde8b5","dfnText":"a new promise","external":true,"refSections":[{"refs":[{"id":"ref-for-a-new-promise"},{"id":"ref-for-a-new-promise\u2460"},{"id":"ref-for-a-new-promise\u2461"},{"id":"ref-for-a-new-promise\u2462"},{"id":"ref-for-a-new-promise\u2463"},{"id":"ref-for-a-new-promise\u2464"},{"id":"ref-for-a-new-promise\u2465"},{"id":"ref-for-a-new-promise\u2466"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"default-error-algorithm": {"dfnID":"default-error-algorithm","dfnText":"default error algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-default-error-algorithm"},{"id":"ref-for-default-error-algorithm\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"#default-error-algorithm"},
"dictdef-observableeventlisteneroptions": {"dfnID":"dictdef-observableeventlisteneroptions","dfnText":"ObservableEventListenerOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-observableeventlisteneroptions"}],"title":"3. EventTarget integration"}],"url":"#dictdef-observableeventlisteneroptions"},
"dictdef-observableinspector": {"dfnID":"dictdef-observableinspector","dfnText":"ObservableInspector","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-observableinspector"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dictdef-observableinspector\u2460"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dictdef-observableinspector"},
"dictdef-subscribeoptions": {"dfnID":"dictdef-subscribeoptions","dfnText":"SubscribeOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-subscribeoptions"},{"id":"ref-for-dictdef-subscribeoptions\u2460"},{"id":"ref-for-dictdef-subscribeoptions\u2461"},{"id":"ref-for-dictdef-subscribeoptions\u2462"},{"id":"ref-for-dictdef-subscribeoptions\u2463"},{"id":"ref-for-dictdef-subscribeoptions\u2464"},{"id":"ref-for-dictdef-subscribeoptions\u2465"},{"id":"ref-for-dictdef-subscribeoptions\u2466"},{"id":"ref-for-dictdef-subscribeoptions\u2467"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dictdef-subscribeoptions\u2468"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dictdef-subscribeoptions\u2460\u24ea"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2460"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2461"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2462"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2463"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2464"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2465"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2466"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2467"},{"id":"ref-for-dictdef-subscribeoptions\u2460\u2468"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u24ea"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2460"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2461"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2462"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-dictdef-subscribeoptions\u2461\u2463"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2464"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2465"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2466"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2467"},{"id":"ref-for-dictdef-subscribeoptions\u2461\u2468"},{"id":"ref-for-dictdef-subscribeoptions\u2462\u24ea"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dictdef-subscribeoptions"},
"dictdef-subscriptionobserver": {"dfnID":"dictdef-subscriptionobserver","dfnText":"SubscriptionObserver","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-subscriptionobserver"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dictdef-subscriptionobserver\u2460"}],"title":"2.2.1. Supporting concepts"}],"url":"#dictdef-subscriptionobserver"},
"dom-catchcallback-value": {"dfnID":"dom-catchcallback-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-catchcallback-value"},
"dom-eventtarget-when": {"dfnID":"dom-eventtarget-when","dfnText":"when(type, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-eventtarget-when"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dom-eventtarget-when\u2460"}],"title":"3. EventTarget integration"}],"url":"#dom-eventtarget-when"},
"dom-eventtarget-when-type-options-options": {"dfnID":"dom-eventtarget-when-type-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-eventtarget-when-type-options-options"},
"dom-eventtarget-when-type-options-type": {"dfnID":"dom-eventtarget-when-type-options-type","dfnText":"type","external":false,"refSections":[],"url":"#dom-eventtarget-when-type-options-type"},
"dom-mapper-index": {"dfnID":"dom-mapper-index","dfnText":"index","external":false,"refSections":[],"url":"#dom-mapper-index"},
"dom-mapper-value": {"dfnID":"dom-mapper-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-mapper-value"},
"dom-observable-catch": {"dfnID":"dom-observable-catch","dfnText":"catch(callback)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-catch"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-catch"},
"dom-observable-catch-callback-callback": {"dfnID":"dom-observable-catch-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-observable-catch-callback-callback"},
"dom-observable-drop": {"dfnID":"dom-observable-drop","dfnText":"drop(amount)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-drop"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-drop"},
"dom-observable-drop-amount-amount": {"dfnID":"dom-observable-drop-amount-amount","dfnText":"amount","external":false,"refSections":[],"url":"#dom-observable-drop-amount-amount"},
"dom-observable-every": {"dfnID":"dom-observable-every","dfnText":"every(predicate, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-every"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-every"},
"dom-observable-every-predicate-options-options": {"dfnID":"dom-observable-every-predicate-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-every-predicate-options-options"},
"dom-observable-every-predicate-options-predicate": {"dfnID":"dom-observable-every-predicate-options-predicate","dfnText":"predicate","external":false,"refSections":[],"url":"#dom-observable-every-predicate-options-predicate"},
"dom-observable-filter": {"dfnID":"dom-observable-filter","dfnText":"filter(predicate)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-filter"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-filter"},
"dom-observable-filter-predicate-predicate": {"dfnID":"dom-observable-filter-predicate-predicate","dfnText":"predicate","external":false,"refSections":[],"url":"#dom-observable-filter-predicate-predicate"},
"dom-observable-finally": {"dfnID":"dom-observable-finally","dfnText":"finally(callback)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-finally"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-finally"},
"dom-observable-finally-callback-callback": {"dfnID":"dom-observable-finally-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-observable-finally-callback-callback"},
"dom-observable-find": {"dfnID":"dom-observable-find","dfnText":"find(predicate, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-find"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-find"},
"dom-observable-find-predicate-options-options": {"dfnID":"dom-observable-find-predicate-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-find-predicate-options-options"},
"dom-observable-find-predicate-options-predicate": {"dfnID":"dom-observable-find-predicate-options-predicate","dfnText":"predicate","external":false,"refSections":[],"url":"#dom-observable-find-predicate-options-predicate"},
"dom-observable-first": {"dfnID":"dom-observable-first","dfnText":"first(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-first"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dom-observable-first\u2460"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dom-observable-first"},
"dom-observable-first-options-options": {"dfnID":"dom-observable-first-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-first-options-options"},
"dom-observable-flatmap": {"dfnID":"dom-observable-flatmap","dfnText":"flatMap(mapper)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-flatmap"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-flatmap"},
"dom-observable-flatmap-mapper-mapper": {"dfnID":"dom-observable-flatmap-mapper-mapper","dfnText":"mapper","external":false,"refSections":[],"url":"#dom-observable-flatmap-mapper-mapper"},
"dom-observable-foreach": {"dfnID":"dom-observable-foreach","dfnText":"forEach(callback, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-foreach"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-foreach"},
"dom-observable-foreach-callback-options-callback": {"dfnID":"dom-observable-foreach-callback-options-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-observable-foreach-callback-options-callback"},
"dom-observable-foreach-callback-options-options": {"dfnID":"dom-observable-foreach-callback-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-foreach-callback-options-options"},
"dom-observable-from": {"dfnID":"dom-observable-from","dfnText":"from(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-from"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dom-observable-from\u2460"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dom-observable-from\u2461"}],"title":"2.3.1. from()"},{"refs":[{"id":"ref-for-dom-observable-from\u2462"},{"id":"ref-for-dom-observable-from\u2463"},{"id":"ref-for-dom-observable-from\u2464"},{"id":"ref-for-dom-observable-from\u2465"},{"id":"ref-for-dom-observable-from\u2466"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observable-from"},
"dom-observable-from-value-value": {"dfnID":"dom-observable-from-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-observable-from-value-value"},
"dom-observable-inspect": {"dfnID":"dom-observable-inspect","dfnText":"inspect(inspectorUnion)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-inspect"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-inspect"},
"dom-observable-inspect-inspectorunion-inspectorunion": {"dfnID":"dom-observable-inspect-inspectorunion-inspectorunion","dfnText":"inspectorUnion","external":false,"refSections":[],"url":"#dom-observable-inspect-inspectorunion-inspectorunion"},
"dom-observable-last": {"dfnID":"dom-observable-last","dfnText":"last(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-last"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-last"},
"dom-observable-last-options-options": {"dfnID":"dom-observable-last-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-last-options-options"},
"dom-observable-map": {"dfnID":"dom-observable-map","dfnText":"map(mapper)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-map"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-map"},
"dom-observable-map-mapper-mapper": {"dfnID":"dom-observable-map-mapper-mapper","dfnText":"mapper","external":false,"refSections":[],"url":"#dom-observable-map-mapper-mapper"},
"dom-observable-observable": {"dfnID":"dom-observable-observable","dfnText":"new\n  Observable(callback)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-observable"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-observable"},
"dom-observable-observable-callback-callback": {"dfnID":"dom-observable-observable-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-observable-observable-callback-callback"},
"dom-observable-reduce": {"dfnID":"dom-observable-reduce","dfnText":"reduce(reducer, initialValue, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-reduce"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-reduce"},
"dom-observable-reduce-reducer-initialvalue-options-initialvalue": {"dfnID":"dom-observable-reduce-reducer-initialvalue-options-initialvalue","dfnText":"initialValue","external":false,"refSections":[],"url":"#dom-observable-reduce-reducer-initialvalue-options-initialvalue"},
"dom-observable-reduce-reducer-initialvalue-options-options": {"dfnID":"dom-observable-reduce-reducer-initialvalue-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-reduce-reducer-initialvalue-options-options"},
"dom-observable-reduce-reducer-initialvalue-options-reducer": {"dfnID":"dom-observable-reduce-reducer-initialvalue-options-reducer","dfnText":"reducer","external":false,"refSections":[],"url":"#dom-observable-reduce-reducer-initialvalue-options-reducer"},
"dom-observable-some": {"dfnID":"dom-observable-some","dfnText":"some(predicate, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-some"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-some"},
"dom-observable-some-predicate-options-options": {"dfnID":"dom-observable-some-predicate-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-some-predicate-options-options"},
"dom-observable-some-predicate-options-predicate": {"dfnID":"dom-observable-some-predicate-options-predicate","dfnText":"predicate","external":false,"refSections":[],"url":"#dom-observable-some-predicate-options-predicate"},
"dom-observable-subscribe": {"dfnID":"dom-observable-subscribe","dfnText":"subscribe(observer, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-subscribe"},{"id":"ref-for-dom-observable-subscribe\u2460"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dom-observable-subscribe\u2461"},{"id":"ref-for-dom-observable-subscribe\u2462"},{"id":"ref-for-dom-observable-subscribe\u2463"}],"title":"2.2.1. Supporting concepts"}],"url":"#dom-observable-subscribe"},
"dom-observable-subscribe-observer-options-observer": {"dfnID":"dom-observable-subscribe-observer-options-observer","dfnText":"observer","external":false,"refSections":[],"url":"#dom-observable-subscribe-observer-options-observer"},
"dom-observable-subscribe-observer-options-options": {"dfnID":"dom-observable-subscribe-observer-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-subscribe-observer-options-options"},
"dom-observable-switchmap": {"dfnID":"dom-observable-switchmap","dfnText":"switchMap(mapper)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-switchmap"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-dom-observable-switchmap\u2460"},{"id":"ref-for-dom-observable-switchmap\u2461"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observable-switchmap"},
"dom-observable-switchmap-mapper-mapper": {"dfnID":"dom-observable-switchmap-mapper-mapper","dfnText":"mapper","external":false,"refSections":[],"url":"#dom-observable-switchmap-mapper-mapper"},
"dom-observable-take": {"dfnID":"dom-observable-take","dfnText":"take(amount)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-take"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-take"},
"dom-observable-take-amount-amount": {"dfnID":"dom-observable-take-amount-amount","dfnText":"amount","external":false,"refSections":[],"url":"#dom-observable-take-amount-amount"},
"dom-observable-takeuntil": {"dfnID":"dom-observable-takeuntil","dfnText":"takeUntil(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-takeuntil"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-takeuntil"},
"dom-observable-takeuntil-value-value": {"dfnID":"dom-observable-takeuntil-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-observable-takeuntil-value-value"},
"dom-observable-toarray": {"dfnID":"dom-observable-toarray","dfnText":"toArray(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observable-toarray"}],"title":"2.2. The Observable interface"}],"url":"#dom-observable-toarray"},
"dom-observable-toarray-options-options": {"dfnID":"dom-observable-toarray-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-observable-toarray-options-options"},
"dom-observableeventlisteneroptions-capture": {"dfnID":"dom-observableeventlisteneroptions-capture","dfnText":"capture","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableeventlisteneroptions-capture"}],"title":"3. EventTarget integration"}],"url":"#dom-observableeventlisteneroptions-capture"},
"dom-observableeventlisteneroptions-passive": {"dfnID":"dom-observableeventlisteneroptions-passive","dfnText":"passive","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableeventlisteneroptions-passive"}],"title":"3. EventTarget integration"}],"url":"#dom-observableeventlisteneroptions-passive"},
"dom-observableinspector-abort": {"dfnID":"dom-observableinspector-abort","dfnText":"abort","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableinspector-abort"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observableinspector-abort"},
"dom-observableinspector-complete": {"dfnID":"dom-observableinspector-complete","dfnText":"complete","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableinspector-complete"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observableinspector-complete"},
"dom-observableinspector-error": {"dfnID":"dom-observableinspector-error","dfnText":"error","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableinspector-error"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observableinspector-error"},
"dom-observableinspector-next": {"dfnID":"dom-observableinspector-next","dfnText":"next","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableinspector-next"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observableinspector-next"},
"dom-observableinspector-subscribe": {"dfnID":"dom-observableinspector-subscribe","dfnText":"subscribe","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-observableinspector-subscribe"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-observableinspector-subscribe"},
"dom-observableinspectoraborthandler-value": {"dfnID":"dom-observableinspectoraborthandler-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-observableinspectoraborthandler-value"},
"dom-observablesubscriptioncallback-value": {"dfnID":"dom-observablesubscriptioncallback-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-observablesubscriptioncallback-value"},
"dom-predicate-index": {"dfnID":"dom-predicate-index","dfnText":"index","external":false,"refSections":[],"url":"#dom-predicate-index"},
"dom-predicate-value": {"dfnID":"dom-predicate-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-predicate-value"},
"dom-reducer-accumulator": {"dfnID":"dom-reducer-accumulator","dfnText":"accumulator","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-reducer-accumulator"},{"id":"ref-for-dom-reducer-accumulator\u2460"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dom-reducer-accumulator"},
"dom-reducer-currentvalue": {"dfnID":"dom-reducer-currentvalue","dfnText":"currentValue","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-reducer-currentvalue"},{"id":"ref-for-dom-reducer-currentvalue\u2460"},{"id":"ref-for-dom-reducer-currentvalue\u2461"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dom-reducer-currentvalue"},
"dom-reducer-index": {"dfnID":"dom-reducer-index","dfnText":"index","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-reducer-index"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dom-reducer-index"},
"dom-subscribecallback-subscriber": {"dfnID":"dom-subscribecallback-subscriber","dfnText":"subscriber","external":false,"refSections":[],"url":"#dom-subscribecallback-subscriber"},
"dom-subscribeoptions-signal": {"dfnID":"dom-subscribeoptions-signal","dfnText":"signal","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscribeoptions-signal"},{"id":"ref-for-dom-subscribeoptions-signal\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2467"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dom-subscribeoptions-signal\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2460\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2461"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2461\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2462\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2463\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2464\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2463"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2464"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2465"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2466"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2467"},{"id":"ref-for-dom-subscribeoptions-signal\u2465\u2468"},{"id":"ref-for-dom-subscribeoptions-signal\u2466\u24ea"},{"id":"ref-for-dom-subscribeoptions-signal\u2466\u2460"},{"id":"ref-for-dom-subscribeoptions-signal\u2466\u2461"},{"id":"ref-for-dom-subscribeoptions-signal\u2466\u2462"},{"id":"ref-for-dom-subscribeoptions-signal\u2466\u2463"}],"title":"2.3.3. Promise-returning operators"}],"url":"#dom-subscribeoptions-signal"},
"dom-subscriber-active": {"dfnID":"dom-subscriber-active","dfnText":"active","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-active"}],"title":"2.1. The Subscriber interface"}],"url":"#dom-subscriber-active"},
"dom-subscriber-addteardown": {"dfnID":"dom-subscriber-addteardown","dfnText":"addTeardown(teardown)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-addteardown"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-dom-subscriber-addteardown\u2460"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-subscriber-addteardown"},
"dom-subscriber-addteardown-teardown-teardown": {"dfnID":"dom-subscriber-addteardown-teardown-teardown","dfnText":"teardown","external":false,"refSections":[],"url":"#dom-subscriber-addteardown-teardown-teardown"},
"dom-subscriber-complete": {"dfnID":"dom-subscriber-complete","dfnText":"complete()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-complete"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-dom-subscriber-complete\u2460"},{"id":"ref-for-dom-subscriber-complete\u2461"},{"id":"ref-for-dom-subscriber-complete\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dom-subscriber-complete\u2463"},{"id":"ref-for-dom-subscriber-complete\u2464"},{"id":"ref-for-dom-subscriber-complete\u2465"},{"id":"ref-for-dom-subscriber-complete\u2466"},{"id":"ref-for-dom-subscriber-complete\u2467"},{"id":"ref-for-dom-subscriber-complete\u2468"},{"id":"ref-for-dom-subscriber-complete\u2460\u24ea"},{"id":"ref-for-dom-subscriber-complete\u2460\u2460"},{"id":"ref-for-dom-subscriber-complete\u2460\u2461"},{"id":"ref-for-dom-subscriber-complete\u2460\u2462"},{"id":"ref-for-dom-subscriber-complete\u2460\u2463"},{"id":"ref-for-dom-subscriber-complete\u2460\u2464"},{"id":"ref-for-dom-subscriber-complete\u2460\u2465"},{"id":"ref-for-dom-subscriber-complete\u2460\u2466"},{"id":"ref-for-dom-subscriber-complete\u2460\u2467"},{"id":"ref-for-dom-subscriber-complete\u2460\u2468"},{"id":"ref-for-dom-subscriber-complete\u2461\u24ea"},{"id":"ref-for-dom-subscriber-complete\u2461\u2460"},{"id":"ref-for-dom-subscriber-complete\u2461\u2461"},{"id":"ref-for-dom-subscriber-complete\u2461\u2462"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-subscriber-complete"},
"dom-subscriber-error": {"dfnID":"dom-subscriber-error","dfnText":"error(error)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-error"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-dom-subscriber-error\u2460"},{"id":"ref-for-dom-subscriber-error\u2461"},{"id":"ref-for-dom-subscriber-error\u2462"},{"id":"ref-for-dom-subscriber-error\u2463"},{"id":"ref-for-dom-subscriber-error\u2464"},{"id":"ref-for-dom-subscriber-error\u2465"},{"id":"ref-for-dom-subscriber-error\u2466"},{"id":"ref-for-dom-subscriber-error\u2467"},{"id":"ref-for-dom-subscriber-error\u2468"},{"id":"ref-for-dom-subscriber-error\u2460\u24ea"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dom-subscriber-error\u2460\u2460"},{"id":"ref-for-dom-subscriber-error\u2460\u2461"},{"id":"ref-for-dom-subscriber-error\u2460\u2462"},{"id":"ref-for-dom-subscriber-error\u2460\u2463"},{"id":"ref-for-dom-subscriber-error\u2460\u2464"},{"id":"ref-for-dom-subscriber-error\u2460\u2465"},{"id":"ref-for-dom-subscriber-error\u2460\u2466"},{"id":"ref-for-dom-subscriber-error\u2460\u2467"},{"id":"ref-for-dom-subscriber-error\u2460\u2468"},{"id":"ref-for-dom-subscriber-error\u2461\u24ea"},{"id":"ref-for-dom-subscriber-error\u2461\u2460"},{"id":"ref-for-dom-subscriber-error\u2461\u2461"},{"id":"ref-for-dom-subscriber-error\u2461\u2462"},{"id":"ref-for-dom-subscriber-error\u2461\u2463"},{"id":"ref-for-dom-subscriber-error\u2461\u2464"},{"id":"ref-for-dom-subscriber-error\u2461\u2465"},{"id":"ref-for-dom-subscriber-error\u2461\u2466"},{"id":"ref-for-dom-subscriber-error\u2461\u2467"},{"id":"ref-for-dom-subscriber-error\u2461\u2468"},{"id":"ref-for-dom-subscriber-error\u2462\u24ea"},{"id":"ref-for-dom-subscriber-error\u2462\u2460"},{"id":"ref-for-dom-subscriber-error\u2462\u2461"},{"id":"ref-for-dom-subscriber-error\u2462\u2462"},{"id":"ref-for-dom-subscriber-error\u2462\u2463"},{"id":"ref-for-dom-subscriber-error\u2462\u2464"},{"id":"ref-for-dom-subscriber-error\u2462\u2465"},{"id":"ref-for-dom-subscriber-error\u2462\u2466"}],"title":"2.3.2. Observable-returning operators"}],"url":"#dom-subscriber-error"},
"dom-subscriber-error-error-error": {"dfnID":"dom-subscriber-error-error-error","dfnText":"error","external":false,"refSections":[],"url":"#dom-subscriber-error-error-error"},
"dom-subscriber-next": {"dfnID":"dom-subscriber-next","dfnText":"next(value)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-next"},{"id":"ref-for-dom-subscriber-next\u2460"},{"id":"ref-for-dom-subscriber-next\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-dom-subscriber-next\u2462"},{"id":"ref-for-dom-subscriber-next\u2463"},{"id":"ref-for-dom-subscriber-next\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-dom-subscriber-next\u2465"},{"id":"ref-for-dom-subscriber-next\u2466"},{"id":"ref-for-dom-subscriber-next\u2467"},{"id":"ref-for-dom-subscriber-next\u2468"},{"id":"ref-for-dom-subscriber-next\u2460\u24ea"},{"id":"ref-for-dom-subscriber-next\u2460\u2460"},{"id":"ref-for-dom-subscriber-next\u2460\u2461"},{"id":"ref-for-dom-subscriber-next\u2460\u2462"},{"id":"ref-for-dom-subscriber-next\u2460\u2463"},{"id":"ref-for-dom-subscriber-next\u2460\u2464"},{"id":"ref-for-dom-subscriber-next\u2460\u2465"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-dom-subscriber-next\u2460\u2466"}],"title":"3. EventTarget integration"}],"url":"#dom-subscriber-next"},
"dom-subscriber-next-value-value": {"dfnID":"dom-subscriber-next-value-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-subscriber-next-value-value"},
"dom-subscriber-signal": {"dfnID":"dom-subscriber-signal","dfnText":"signal","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriber-signal"}],"title":"2.1. The Subscriber interface"}],"url":"#dom-subscriber-signal"},
"dom-subscriptionobserver-complete": {"dfnID":"dom-subscriptionobserver-complete","dfnText":"complete","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriptionobserver-complete"},{"id":"ref-for-dom-subscriptionobserver-complete\u2460"},{"id":"ref-for-dom-subscriptionobserver-complete\u2461"},{"id":"ref-for-dom-subscriptionobserver-complete\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"#dom-subscriptionobserver-complete"},
"dom-subscriptionobserver-error": {"dfnID":"dom-subscriptionobserver-error","dfnText":"error","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriptionobserver-error"},{"id":"ref-for-dom-subscriptionobserver-error\u2460"},{"id":"ref-for-dom-subscriptionobserver-error\u2461"},{"id":"ref-for-dom-subscriptionobserver-error\u2462"},{"id":"ref-for-dom-subscriptionobserver-error\u2463"}],"title":"2.2.1. Supporting concepts"}],"url":"#dom-subscriptionobserver-error"},
"dom-subscriptionobserver-next": {"dfnID":"dom-subscriptionobserver-next","dfnText":"next","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-subscriptionobserver-next"},{"id":"ref-for-dom-subscriptionobserver-next\u2460"},{"id":"ref-for-dom-subscriptionobserver-next\u2461"},{"id":"ref-for-dom-subscriptionobserver-next\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"#dom-subscriptionobserver-next"},
"dom-visitor-index": {"dfnID":"dom-visitor-index","dfnText":"index","external":false,"refSections":[],"url":"#dom-visitor-index"},
"dom-visitor-value": {"dfnID":"dom-visitor-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-visitor-value"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"},{"id":"ref-for-concept-relevant-global\u2460"},{"id":"ref-for-concept-relevant-global\u2461"},{"id":"ref-for-concept-relevant-global\u2462"},{"id":"ref-for-concept-relevant-global\u2463"},{"id":"ref-for-concept-relevant-global\u2464"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-concept-relevant-global\u2465"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-concept-relevant-global\u2466"}],"title":"3. EventTarget integration"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"ec878a66": {"dfnID":"ec878a66","dfnText":"RangeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-rangeerror"},{"id":"ref-for-exceptiondef-rangeerror\u2460"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"},
"f14b47b8": {"dfnID":"f14b47b8","dfnText":"unsigned long long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unsigned-long-long"},{"id":"ref-for-idl-unsigned-long-long\u2460"},{"id":"ref-for-idl-unsigned-long-long\u2461"},{"id":"ref-for-idl-unsigned-long-long\u2462"},{"id":"ref-for-idl-unsigned-long-long\u2463"},{"id":"ref-for-idl-unsigned-long-long\u2464"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-idl-unsigned-long-long\u2465"},{"id":"ref-for-idl-unsigned-long-long\u2466"},{"id":"ref-for-idl-unsigned-long-long\u2467"},{"id":"ref-for-idl-unsigned-long-long\u2468"},{"id":"ref-for-idl-unsigned-long-long\u2460\u24ea"},{"id":"ref-for-idl-unsigned-long-long\u2460\u2460"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-idl-unsigned-long-long\u2460\u2461"},{"id":"ref-for-idl-unsigned-long-long\u2460\u2462"},{"id":"ref-for-idl-unsigned-long-long\u2460\u2463"},{"id":"ref-for-idl-unsigned-long-long\u2460\u2464"},{"id":"ref-for-idl-unsigned-long-long\u2460\u2465"}],"title":"2.3.3. Promise-returning operators"}],"url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"f99bafb9": {"dfnID":"f99bafb9","dfnText":"add an event listener","external":true,"refSections":[{"refs":[{"id":"ref-for-add-an-event-listener"}],"title":"3. EventTarget integration"}],"url":"https://dom.spec.whatwg.org/#add-an-event-listener"},
"fd82ae84": {"dfnID":"fd82ae84","dfnText":"Object","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-object-type"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/#sec-object-type"},
"ff81eaa7": {"dfnID":"ff81eaa7","dfnText":"%Symbol.asyncIterator%","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-well-known-symbols"},{"id":"ref-for-sec-well-known-symbols\u2460"},{"id":"ref-for-sec-well-known-symbols\u2461"},{"id":"ref-for-sec-well-known-symbols\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols"},
"ff87eaf9": {"dfnID":"ff87eaf9","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-remove"},{"id":"ref-for-abortsignal-remove\u2460"},{"id":"ref-for-abortsignal-remove\u2461"}],"title":"2.3.2. Observable-returning operators"}],"url":"https://dom.spec.whatwg.org/#abortsignal-remove"},
"flatmap-process-next-value-steps": {"dfnID":"flatmap-process-next-value-steps","dfnText":"flatmap process next value steps","external":false,"refSections":[{"refs":[{"id":"ref-for-flatmap-process-next-value-steps"},{"id":"ref-for-flatmap-process-next-value-steps\u2460"},{"id":"ref-for-flatmap-process-next-value-steps\u2461"},{"id":"ref-for-flatmap-process-next-value-steps\u2462"}],"title":"2.3.2. Observable-returning operators"}],"url":"#flatmap-process-next-value-steps"},
"internal-observer": {"dfnID":"internal-observer","dfnText":"internal observer","external":false,"refSections":[{"refs":[{"id":"ref-for-internal-observer"},{"id":"ref-for-internal-observer\u2460"},{"id":"ref-for-internal-observer\u2461"},{"id":"ref-for-internal-observer\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-internal-observer\u2463"},{"id":"ref-for-internal-observer\u2464"},{"id":"ref-for-internal-observer\u2465"},{"id":"ref-for-internal-observer\u2466"},{"id":"ref-for-internal-observer\u2467"},{"id":"ref-for-internal-observer\u2468"},{"id":"ref-for-internal-observer\u2460\u24ea"},{"id":"ref-for-internal-observer\u2460\u2460"},{"id":"ref-for-internal-observer\u2460\u2461"},{"id":"ref-for-internal-observer\u2460\u2462"},{"id":"ref-for-internal-observer\u2460\u2463"},{"id":"ref-for-internal-observer\u2460\u2464"},{"id":"ref-for-internal-observer\u2460\u2465"},{"id":"ref-for-internal-observer\u2460\u2466"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-internal-observer\u2460\u2467"},{"id":"ref-for-internal-observer\u2460\u2468"},{"id":"ref-for-internal-observer\u2461\u24ea"},{"id":"ref-for-internal-observer\u2461\u2460"},{"id":"ref-for-internal-observer\u2461\u2461"},{"id":"ref-for-internal-observer\u2461\u2462"},{"id":"ref-for-internal-observer\u2461\u2463"},{"id":"ref-for-internal-observer\u2461\u2464"},{"id":"ref-for-internal-observer\u2461\u2465"}],"title":"2.3.3. Promise-returning operators"}],"url":"#internal-observer"},
"internal-observer-complete-steps": {"dfnID":"internal-observer-complete-steps","dfnText":"complete steps","external":false,"refSections":[{"refs":[{"id":"ref-for-internal-observer-complete-steps"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-internal-observer-complete-steps\u2460"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-internal-observer-complete-steps\u2461"},{"id":"ref-for-internal-observer-complete-steps\u2462"},{"id":"ref-for-internal-observer-complete-steps\u2463"},{"id":"ref-for-internal-observer-complete-steps\u2464"},{"id":"ref-for-internal-observer-complete-steps\u2465"},{"id":"ref-for-internal-observer-complete-steps\u2466"},{"id":"ref-for-internal-observer-complete-steps\u2467"},{"id":"ref-for-internal-observer-complete-steps\u2468"},{"id":"ref-for-internal-observer-complete-steps\u2460\u24ea"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2460"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2461"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2462"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2463"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2464"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-internal-observer-complete-steps\u2460\u2465"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2466"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2467"},{"id":"ref-for-internal-observer-complete-steps\u2460\u2468"},{"id":"ref-for-internal-observer-complete-steps\u2461\u24ea"},{"id":"ref-for-internal-observer-complete-steps\u2461\u2460"},{"id":"ref-for-internal-observer-complete-steps\u2461\u2461"},{"id":"ref-for-internal-observer-complete-steps\u2461\u2462"},{"id":"ref-for-internal-observer-complete-steps\u2461\u2463"}],"title":"2.3.3. Promise-returning operators"}],"url":"#internal-observer-complete-steps"},
"internal-observer-error-steps": {"dfnID":"internal-observer-error-steps","dfnText":"error steps","external":false,"refSections":[{"refs":[{"id":"ref-for-internal-observer-error-steps"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-internal-observer-error-steps\u2460"},{"id":"ref-for-internal-observer-error-steps\u2461"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-internal-observer-error-steps\u2462"},{"id":"ref-for-internal-observer-error-steps\u2463"},{"id":"ref-for-internal-observer-error-steps\u2464"},{"id":"ref-for-internal-observer-error-steps\u2465"},{"id":"ref-for-internal-observer-error-steps\u2466"},{"id":"ref-for-internal-observer-error-steps\u2467"},{"id":"ref-for-internal-observer-error-steps\u2468"},{"id":"ref-for-internal-observer-error-steps\u2460\u24ea"},{"id":"ref-for-internal-observer-error-steps\u2460\u2460"},{"id":"ref-for-internal-observer-error-steps\u2460\u2461"},{"id":"ref-for-internal-observer-error-steps\u2460\u2462"},{"id":"ref-for-internal-observer-error-steps\u2460\u2463"},{"id":"ref-for-internal-observer-error-steps\u2460\u2464"},{"id":"ref-for-internal-observer-error-steps\u2460\u2465"},{"id":"ref-for-internal-observer-error-steps\u2460\u2466"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-internal-observer-error-steps\u2460\u2467"},{"id":"ref-for-internal-observer-error-steps\u2460\u2468"},{"id":"ref-for-internal-observer-error-steps\u2461\u24ea"},{"id":"ref-for-internal-observer-error-steps\u2461\u2460"},{"id":"ref-for-internal-observer-error-steps\u2461\u2461"},{"id":"ref-for-internal-observer-error-steps\u2461\u2462"},{"id":"ref-for-internal-observer-error-steps\u2461\u2463"},{"id":"ref-for-internal-observer-error-steps\u2461\u2464"},{"id":"ref-for-internal-observer-error-steps\u2461\u2465"}],"title":"2.3.3. Promise-returning operators"}],"url":"#internal-observer-error-steps"},
"internal-observer-next-steps": {"dfnID":"internal-observer-next-steps","dfnText":"next steps","external":false,"refSections":[{"refs":[{"id":"ref-for-internal-observer-next-steps"},{"id":"ref-for-internal-observer-next-steps\u2460"},{"id":"ref-for-internal-observer-next-steps\u2461"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-internal-observer-next-steps\u2462"},{"id":"ref-for-internal-observer-next-steps\u2463"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-internal-observer-next-steps\u2464"},{"id":"ref-for-internal-observer-next-steps\u2465"},{"id":"ref-for-internal-observer-next-steps\u2466"},{"id":"ref-for-internal-observer-next-steps\u2467"},{"id":"ref-for-internal-observer-next-steps\u2468"},{"id":"ref-for-internal-observer-next-steps\u2460\u24ea"},{"id":"ref-for-internal-observer-next-steps\u2460\u2460"},{"id":"ref-for-internal-observer-next-steps\u2460\u2461"},{"id":"ref-for-internal-observer-next-steps\u2460\u2462"},{"id":"ref-for-internal-observer-next-steps\u2460\u2463"},{"id":"ref-for-internal-observer-next-steps\u2460\u2464"},{"id":"ref-for-internal-observer-next-steps\u2460\u2465"},{"id":"ref-for-internal-observer-next-steps\u2460\u2466"},{"id":"ref-for-internal-observer-next-steps\u2460\u2467"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-internal-observer-next-steps\u2460\u2468"},{"id":"ref-for-internal-observer-next-steps\u2461\u24ea"},{"id":"ref-for-internal-observer-next-steps\u2461\u2460"},{"id":"ref-for-internal-observer-next-steps\u2461\u2461"},{"id":"ref-for-internal-observer-next-steps\u2461\u2462"},{"id":"ref-for-internal-observer-next-steps\u2461\u2463"},{"id":"ref-for-internal-observer-next-steps\u2461\u2464"},{"id":"ref-for-internal-observer-next-steps\u2461\u2465"},{"id":"ref-for-internal-observer-next-steps\u2461\u2466"},{"id":"ref-for-internal-observer-next-steps\u2461\u2467"},{"id":"ref-for-internal-observer-next-steps\u2461\u2468"}],"title":"2.3.3. Promise-returning operators"}],"url":"#internal-observer-next-steps"},
"observable": {"dfnID":"observable","dfnText":"Observable","external":false,"refSections":[{"refs":[{"id":"ref-for-observable"},{"id":"ref-for-observable\u2460"},{"id":"ref-for-observable\u2461"},{"id":"ref-for-observable\u2462"},{"id":"ref-for-observable\u2463"},{"id":"ref-for-observable\u2464"},{"id":"ref-for-observable\u2465"},{"id":"ref-for-observable\u2466"},{"id":"ref-for-observable\u2467"},{"id":"ref-for-observable\u2468"},{"id":"ref-for-observable\u2460\u24ea"},{"id":"ref-for-observable\u2460\u2460"},{"id":"ref-for-observable\u2460\u2461"},{"id":"ref-for-observable\u2460\u2462"},{"id":"ref-for-observable\u2460\u2463"},{"id":"ref-for-observable\u2460\u2464"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-observable\u2460\u2465"},{"id":"ref-for-observable\u2460\u2466"},{"id":"ref-for-observable\u2460\u2467"},{"id":"ref-for-observable\u2460\u2468"},{"id":"ref-for-observable\u2461\u24ea"},{"id":"ref-for-observable\u2461\u2460"},{"id":"ref-for-observable\u2461\u2461"},{"id":"ref-for-observable\u2461\u2462"},{"id":"ref-for-observable\u2461\u2463"},{"id":"ref-for-observable\u2461\u2464"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-observable\u2461\u2465"}],"title":"2.3.1. from()"},{"refs":[{"id":"ref-for-observable\u2461\u2466"},{"id":"ref-for-observable\u2461\u2467"},{"id":"ref-for-observable\u2461\u2468"},{"id":"ref-for-observable\u2462\u24ea"},{"id":"ref-for-observable\u2462\u2460"},{"id":"ref-for-observable\u2462\u2461"},{"id":"ref-for-observable\u2462\u2462"},{"id":"ref-for-observable\u2462\u2463"},{"id":"ref-for-observable\u2462\u2464"},{"id":"ref-for-observable\u2462\u2465"},{"id":"ref-for-observable\u2462\u2466"},{"id":"ref-for-observable\u2462\u2467"},{"id":"ref-for-observable\u2462\u2468"},{"id":"ref-for-observable\u2463\u24ea"},{"id":"ref-for-observable\u2463\u2460"},{"id":"ref-for-observable\u2463\u2461"},{"id":"ref-for-observable\u2463\u2462"},{"id":"ref-for-observable\u2463\u2463"},{"id":"ref-for-observable\u2463\u2464"},{"id":"ref-for-observable\u2463\u2465"},{"id":"ref-for-observable\u2463\u2466"},{"id":"ref-for-observable\u2463\u2467"},{"id":"ref-for-observable\u2463\u2468"},{"id":"ref-for-observable\u2464\u24ea"},{"id":"ref-for-observable\u2464\u2460"},{"id":"ref-for-observable\u2464\u2461"},{"id":"ref-for-observable\u2464\u2462"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-observable\u2464\u2463"},{"id":"ref-for-observable\u2464\u2464"},{"id":"ref-for-observable\u2464\u2465"}],"title":"2.3.3. Promise-returning operators"},{"refs":[{"id":"ref-for-observable\u2464\u2466"},{"id":"ref-for-observable\u2464\u2467"}],"title":"3. EventTarget integration"},{"refs":[{"id":"ref-for-observable\u2464\u2468"}],"title":"5. Acknowledgements"}],"url":"#observable"},
"observable-convert-to-an-observable": {"dfnID":"observable-convert-to-an-observable","dfnText":"convert to an Observable","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-convert-to-an-observable"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-observable-convert-to-an-observable\u2460"}],"title":"2.3.1. from()"},{"refs":[{"id":"ref-for-observable-convert-to-an-observable\u2461"}],"title":"2.3.2. Observable-returning operators"}],"url":"#observable-convert-to-an-observable"},
"observable-event-listener-invoke-algorithm": {"dfnID":"observable-event-listener-invoke-algorithm","dfnText":"observable event listener invoke algorithm","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-event-listener-invoke-algorithm"}],"title":"3. EventTarget integration"}],"url":"#observable-event-listener-invoke-algorithm"},
"observable-subscribe-callback": {"dfnID":"observable-subscribe-callback","dfnText":"subscribe callback","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-subscribe-callback"},{"id":"ref-for-observable-subscribe-callback\u2460"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-observable-subscribe-callback\u2461"},{"id":"ref-for-observable-subscribe-callback\u2462"},{"id":"ref-for-observable-subscribe-callback\u2463"},{"id":"ref-for-observable-subscribe-callback\u2464"},{"id":"ref-for-observable-subscribe-callback\u2465"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-observable-subscribe-callback\u2466"},{"id":"ref-for-observable-subscribe-callback\u2467"},{"id":"ref-for-observable-subscribe-callback\u2468"},{"id":"ref-for-observable-subscribe-callback\u2460\u24ea"},{"id":"ref-for-observable-subscribe-callback\u2460\u2460"},{"id":"ref-for-observable-subscribe-callback\u2460\u2461"},{"id":"ref-for-observable-subscribe-callback\u2460\u2462"},{"id":"ref-for-observable-subscribe-callback\u2460\u2463"},{"id":"ref-for-observable-subscribe-callback\u2460\u2464"},{"id":"ref-for-observable-subscribe-callback\u2460\u2465"},{"id":"ref-for-observable-subscribe-callback\u2460\u2466"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-observable-subscribe-callback\u2460\u2467"}],"title":"3. EventTarget integration"}],"url":"#observable-subscribe-callback"},
"observable-subscribe-to-an-observable": {"dfnID":"observable-subscribe-to-an-observable","dfnText":"subscribe to an Observable","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-subscribe-to-an-observable"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-observable-subscribe-to-an-observable\u2460"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461"},{"id":"ref-for-observable-subscribe-to-an-observable\u2462"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-observable-subscribe-to-an-observable\u2463"},{"id":"ref-for-observable-subscribe-to-an-observable\u2464"},{"id":"ref-for-observable-subscribe-to-an-observable\u2465"},{"id":"ref-for-observable-subscribe-to-an-observable\u2466"},{"id":"ref-for-observable-subscribe-to-an-observable\u2467"},{"id":"ref-for-observable-subscribe-to-an-observable\u2468"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u24ea"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2460"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2461"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2462"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2463"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2464"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2465"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2466"},{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2467"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-observable-subscribe-to-an-observable\u2460\u2468"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u24ea"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2460"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2461"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2462"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2463"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2464"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2465"},{"id":"ref-for-observable-subscribe-to-an-observable\u2461\u2466"}],"title":"2.3.3. Promise-returning operators"}],"url":"#observable-subscribe-to-an-observable"},
"observable-weak-subscriber": {"dfnID":"observable-weak-subscriber","dfnText":"weak subscriber","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-weak-subscriber"},{"id":"ref-for-observable-weak-subscriber\u2460"},{"id":"ref-for-observable-weak-subscriber\u2461"},{"id":"ref-for-observable-weak-subscriber\u2462"}],"title":"2.2.1. Supporting concepts"}],"url":"#observable-weak-subscriber"},
"subscriber": {"dfnID":"subscriber","dfnText":"Subscriber","external":false,"refSections":[{"refs":[{"id":"ref-for-subscriber"},{"id":"ref-for-subscriber\u2460"},{"id":"ref-for-subscriber\u2461"},{"id":"ref-for-subscriber\u2462"},{"id":"ref-for-subscriber\u2463"},{"id":"ref-for-subscriber\u2464"},{"id":"ref-for-subscriber\u2465"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-subscriber\u2466"},{"id":"ref-for-subscriber\u2467"},{"id":"ref-for-subscriber\u2468"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-subscriber\u2460\u24ea"},{"id":"ref-for-subscriber\u2460\u2460"},{"id":"ref-for-subscriber\u2460\u2461"},{"id":"ref-for-subscriber\u2460\u2462"},{"id":"ref-for-subscriber\u2460\u2463"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-subscriber\u2460\u2464"},{"id":"ref-for-subscriber\u2460\u2465"},{"id":"ref-for-subscriber\u2460\u2466"},{"id":"ref-for-subscriber\u2460\u2467"},{"id":"ref-for-subscriber\u2460\u2468"},{"id":"ref-for-subscriber\u2461\u24ea"},{"id":"ref-for-subscriber\u2461\u2460"},{"id":"ref-for-subscriber\u2461\u2461"},{"id":"ref-for-subscriber\u2461\u2462"},{"id":"ref-for-subscriber\u2461\u2463"},{"id":"ref-for-subscriber\u2461\u2464"},{"id":"ref-for-subscriber\u2461\u2465"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-subscriber\u2461\u2466"},{"id":"ref-for-subscriber\u2461\u2467"}],"title":"3. EventTarget integration"}],"url":"#subscriber"},
"subscriber-active": {"dfnID":"subscriber-active","dfnText":"active","external":false,"refSections":[{"refs":[{"id":"ref-for-subscriber-active"},{"id":"ref-for-subscriber-active\u2460"},{"id":"ref-for-subscriber-active\u2461"},{"id":"ref-for-subscriber-active\u2462"},{"id":"ref-for-subscriber-active\u2463"},{"id":"ref-for-subscriber-active\u2464"},{"id":"ref-for-subscriber-active\u2465"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-subscriber-active\u2466"},{"id":"ref-for-subscriber-active\u2467"},{"id":"ref-for-subscriber-active\u2468"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-subscriber-active\u2460\u24ea"},{"id":"ref-for-subscriber-active\u2460\u2460"}],"title":"2.3.2. Observable-returning operators"}],"url":"#subscriber-active"},
"subscriber-internal-observers": {"dfnID":"subscriber-internal-observers","dfnText":"internal observers","external":false,"refSections":[{"refs":[{"id":"ref-for-subscriber-internal-observers"},{"id":"ref-for-subscriber-internal-observers\u2460"},{"id":"ref-for-subscriber-internal-observers\u2461"},{"id":"ref-for-subscriber-internal-observers\u2462"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-subscriber-internal-observers\u2463"},{"id":"ref-for-subscriber-internal-observers\u2464"},{"id":"ref-for-subscriber-internal-observers\u2465"},{"id":"ref-for-subscriber-internal-observers\u2466"},{"id":"ref-for-subscriber-internal-observers\u2467"},{"id":"ref-for-subscriber-internal-observers\u2468"},{"id":"ref-for-subscriber-internal-observers\u2460\u24ea"}],"title":"2.2.1. Supporting concepts"}],"url":"#subscriber-internal-observers"},
"subscriber-subscription-controller": {"dfnID":"subscriber-subscription-controller","dfnText":"subscription controller","external":false,"refSections":[{"refs":[{"id":"ref-for-subscriber-subscription-controller"},{"id":"ref-for-subscriber-subscription-controller\u2460"}],"title":"2.1. The Subscriber interface"},{"refs":[{"id":"ref-for-subscriber-subscription-controller\u2461"},{"id":"ref-for-subscriber-subscription-controller\u2462"},{"id":"ref-for-subscriber-subscription-controller\u2463"},{"id":"ref-for-subscriber-subscription-controller\u2464"},{"id":"ref-for-subscriber-subscription-controller\u2465"},{"id":"ref-for-subscriber-subscription-controller\u2466"},{"id":"ref-for-subscriber-subscription-controller\u2467"},{"id":"ref-for-subscriber-subscription-controller\u2468"},{"id":"ref-for-subscriber-subscription-controller\u2460\u24ea"}],"title":"2.2.1. Supporting concepts"},{"refs":[{"id":"ref-for-subscriber-subscription-controller\u2460\u2460"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2461"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2462"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2463"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2464"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2465"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2466"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2467"},{"id":"ref-for-subscriber-subscription-controller\u2460\u2468"},{"id":"ref-for-subscriber-subscription-controller\u2461\u24ea"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2460"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2461"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2462"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2463"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2464"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2465"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2466"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2467"},{"id":"ref-for-subscriber-subscription-controller\u2461\u2468"}],"title":"2.3.2. Observable-returning operators"},{"refs":[{"id":"ref-for-subscriber-subscription-controller\u2462\u24ea"},{"id":"ref-for-subscriber-subscription-controller\u2462\u2460"},{"id":"ref-for-subscriber-subscription-controller\u2462\u2461"}],"title":"3. EventTarget integration"}],"url":"#subscriber-subscription-controller"},
"subscriber-teardown-callbacks": {"dfnID":"subscriber-teardown-callbacks","dfnText":"teardown callbacks","external":false,"refSections":[{"refs":[{"id":"ref-for-subscriber-teardown-callbacks"},{"id":"ref-for-subscriber-teardown-callbacks\u2460"}],"title":"2.1. The Subscriber interface"}],"url":"#subscriber-teardown-callbacks"},
"switchmap-process-next-value-steps": {"dfnID":"switchmap-process-next-value-steps","dfnText":"switchmap process next value steps","external":false,"refSections":[{"refs":[{"id":"ref-for-switchmap-process-next-value-steps"},{"id":"ref-for-switchmap-process-next-value-steps\u2460"},{"id":"ref-for-switchmap-process-next-value-steps\u2461"},{"id":"ref-for-switchmap-process-next-value-steps\u2462"}],"title":"2.3.2. Observable-returning operators"}],"url":"#switchmap-process-next-value-steps"},
"typedefdef-observableinspectorunion": {"dfnID":"typedefdef-observableinspectorunion","dfnText":"ObservableInspectorUnion","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-observableinspectorunion"}],"title":"2.2. The Observable interface"}],"url":"#typedefdef-observableinspectorunion"},
"typedefdef-observerunion": {"dfnID":"typedefdef-observerunion","dfnText":"ObserverUnion","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-observerunion"}],"title":"2.2. The Observable interface"},{"refs":[{"id":"ref-for-typedefdef-observerunion\u2460"},{"id":"ref-for-typedefdef-observerunion\u2461"}],"title":"2.2.1. Supporting concepts"}],"url":"#typedefdef-observerunion"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#callbackdef-catchcallback": {"displayText":"CatchCallback","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"CatchCallback","type":"callback","url":"#callbackdef-catchcallback"},
"#callbackdef-mapper": {"displayText":"Mapper","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Mapper","type":"callback","url":"#callbackdef-mapper"},
"#callbackdef-observableinspectoraborthandler": {"displayText":"ObservableInspectorAbortHandler","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObservableInspectorAbortHandler","type":"callback","url":"#callbackdef-observableinspectoraborthandler"},
"#callbackdef-observablesubscriptioncallback": {"displayText":"ObservableSubscriptionCallback","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObservableSubscriptionCallback","type":"callback","url":"#callbackdef-observablesubscriptioncallback"},
"#callbackdef-predicate": {"displayText":"Predicate","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Predicate","type":"callback","url":"#callbackdef-predicate"},
"#callbackdef-reducer": {"displayText":"Reducer","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Reducer","type":"callback","url":"#callbackdef-reducer"},
"#callbackdef-subscribecallback": {"displayText":"SubscribeCallback","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"SubscribeCallback","type":"callback","url":"#callbackdef-subscribecallback"},
"#callbackdef-visitor": {"displayText":"Visitor","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Visitor","type":"callback","url":"#callbackdef-visitor"},
"#close-a-subscription": {"displayText":"close a subscription","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"close a subscription","type":"dfn","url":"#close-a-subscription"},
"#default-error-algorithm": {"displayText":"default error algorithm","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"default error algorithm","type":"dfn","url":"#default-error-algorithm"},
"#dictdef-observableeventlisteneroptions": {"displayText":"ObservableEventListenerOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObservableEventListenerOptions","type":"dictionary","url":"#dictdef-observableeventlisteneroptions"},
"#dictdef-observableinspector": {"displayText":"ObservableInspector","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObservableInspector","type":"dictionary","url":"#dictdef-observableinspector"},
"#dictdef-subscribeoptions": {"displayText":"SubscribeOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"SubscribeOptions","type":"dictionary","url":"#dictdef-subscribeoptions"},
"#dictdef-subscriptionobserver": {"displayText":"SubscriptionObserver","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"SubscriptionObserver","type":"dictionary","url":"#dictdef-subscriptionobserver"},
"#dom-eventtarget-when": {"displayText":"when(type)","export":true,"for_":["EventTarget"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"when(type)","type":"method","url":"#dom-eventtarget-when"},
"#dom-observable-catch": {"displayText":"catch(callback)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"catch(callback)","type":"method","url":"#dom-observable-catch"},
"#dom-observable-drop": {"displayText":"drop(amount)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"drop(amount)","type":"method","url":"#dom-observable-drop"},
"#dom-observable-every": {"displayText":"every(predicate, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"every(predicate, options)","type":"method","url":"#dom-observable-every"},
"#dom-observable-filter": {"displayText":"filter(predicate)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"filter(predicate)","type":"method","url":"#dom-observable-filter"},
"#dom-observable-finally": {"displayText":"finally(callback)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"finally(callback)","type":"method","url":"#dom-observable-finally"},
"#dom-observable-find": {"displayText":"find(predicate, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"find(predicate, options)","type":"method","url":"#dom-observable-find"},
"#dom-observable-first": {"displayText":"first(options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"first(options)","type":"method","url":"#dom-observable-first"},
"#dom-observable-flatmap": {"displayText":"flatMap(mapper)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"flatMap(mapper)","type":"method","url":"#dom-observable-flatmap"},
"#dom-observable-foreach": {"displayText":"forEach(callback, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"forEach(callback, options)","type":"method","url":"#dom-observable-foreach"},
"#dom-observable-from": {"displayText":"from(value)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"from(value)","type":"method","url":"#dom-observable-from"},
"#dom-observable-inspect": {"displayText":"inspect(inspectorUnion)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"inspect(inspectorUnion)","type":"method","url":"#dom-observable-inspect"},
"#dom-observable-last": {"displayText":"last(options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"last(options)","type":"method","url":"#dom-observable-last"},
"#dom-observable-map": {"displayText":"map(mapper)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"map(mapper)","type":"method","url":"#dom-observable-map"},
"#dom-observable-observable": {"displayText":"Observable(callback)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Observable(callback)","type":"constructor","url":"#dom-observable-observable"},
"#dom-observable-reduce": {"displayText":"reduce(reducer, initialValue, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"reduce(reducer, initialValue, options)","type":"method","url":"#dom-observable-reduce"},
"#dom-observable-some": {"displayText":"some(predicate, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"some(predicate, options)","type":"method","url":"#dom-observable-some"},
"#dom-observable-subscribe": {"displayText":"subscribe(observer, options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"subscribe(observer, options)","type":"method","url":"#dom-observable-subscribe"},
"#dom-observable-switchmap": {"displayText":"switchMap(mapper)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"switchMap(mapper)","type":"method","url":"#dom-observable-switchmap"},
"#dom-observable-take": {"displayText":"take(amount)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"take(amount)","type":"method","url":"#dom-observable-take"},
"#dom-observable-takeuntil": {"displayText":"takeUntil(value)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"takeUntil(value)","type":"method","url":"#dom-observable-takeuntil"},
"#dom-observable-toarray": {"displayText":"toArray(options)","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"toArray(options)","type":"method","url":"#dom-observable-toarray"},
"#dom-observableeventlisteneroptions-capture": {"displayText":"capture","export":true,"for_":["ObservableEventListenerOptions"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"capture","type":"dict-member","url":"#dom-observableeventlisteneroptions-capture"},
"#dom-observableeventlisteneroptions-passive": {"displayText":"passive","export":true,"for_":["ObservableEventListenerOptions"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"passive","type":"dict-member","url":"#dom-observableeventlisteneroptions-passive"},
"#dom-observableinspector-abort": {"displayText":"abort","export":true,"for_":["ObservableInspector"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"abort","type":"dict-member","url":"#dom-observableinspector-abort"},
"#dom-observableinspector-complete": {"displayText":"complete","export":true,"for_":["ObservableInspector"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"complete","type":"dict-member","url":"#dom-observableinspector-complete"},
"#dom-observableinspector-error": {"displayText":"error","export":true,"for_":["ObservableInspector"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"error","type":"dict-member","url":"#dom-observableinspector-error"},
"#dom-observableinspector-next": {"displayText":"next","export":true,"for_":["ObservableInspector"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"next","type":"dict-member","url":"#dom-observableinspector-next"},
"#dom-observableinspector-subscribe": {"displayText":"subscribe","export":true,"for_":["ObservableInspector"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"subscribe","type":"dict-member","url":"#dom-observableinspector-subscribe"},
"#dom-reducer-accumulator": {"displayText":"accumulator","export":true,"for_":["Reducer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"accumulator","type":"argument","url":"#dom-reducer-accumulator"},
"#dom-reducer-currentvalue": {"displayText":"currentValue","export":true,"for_":["Reducer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"currentValue","type":"argument","url":"#dom-reducer-currentvalue"},
"#dom-reducer-index": {"displayText":"index","export":true,"for_":["Reducer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"index","type":"argument","url":"#dom-reducer-index"},
"#dom-subscribeoptions-signal": {"displayText":"signal","export":true,"for_":["SubscribeOptions"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"signal","type":"dict-member","url":"#dom-subscribeoptions-signal"},
"#dom-subscriber-active": {"displayText":"active","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"active","type":"attribute","url":"#dom-subscriber-active"},
"#dom-subscriber-addteardown": {"displayText":"addTeardown(teardown)","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"addTeardown(teardown)","type":"method","url":"#dom-subscriber-addteardown"},
"#dom-subscriber-complete": {"displayText":"complete()","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"complete()","type":"method","url":"#dom-subscriber-complete"},
"#dom-subscriber-error": {"displayText":"error(error)","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"error(error)","type":"method","url":"#dom-subscriber-error"},
"#dom-subscriber-next": {"displayText":"next(value)","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"next(value)","type":"method","url":"#dom-subscriber-next"},
"#dom-subscriber-signal": {"displayText":"signal","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"signal","type":"attribute","url":"#dom-subscriber-signal"},
"#dom-subscriptionobserver-complete": {"displayText":"complete","export":true,"for_":["SubscriptionObserver"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"complete","type":"dict-member","url":"#dom-subscriptionobserver-complete"},
"#dom-subscriptionobserver-error": {"displayText":"error","export":true,"for_":["SubscriptionObserver"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"error","type":"dict-member","url":"#dom-subscriptionobserver-error"},
"#dom-subscriptionobserver-next": {"displayText":"next","export":true,"for_":["SubscriptionObserver"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"next","type":"dict-member","url":"#dom-subscriptionobserver-next"},
"#flatmap-process-next-value-steps": {"displayText":"flatmap process next value steps","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"flatmap process next value steps","type":"dfn","url":"#flatmap-process-next-value-steps"},
"#internal-observer": {"displayText":"internal observer","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"internal observer","type":"dfn","url":"#internal-observer"},
"#internal-observer-complete-steps": {"displayText":"complete steps","export":true,"for_":["internal observer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"complete steps","type":"dfn","url":"#internal-observer-complete-steps"},
"#internal-observer-error-steps": {"displayText":"error steps","export":true,"for_":["internal observer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"error steps","type":"dfn","url":"#internal-observer-error-steps"},
"#internal-observer-next-steps": {"displayText":"next steps","export":true,"for_":["internal observer"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"next steps","type":"dfn","url":"#internal-observer-next-steps"},
"#observable": {"displayText":"Observable","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Observable","type":"interface","url":"#observable"},
"#observable-convert-to-an-observable": {"displayText":"convert to an observable","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"convert to an observable","type":"dfn","url":"#observable-convert-to-an-observable"},
"#observable-event-listener-invoke-algorithm": {"displayText":"observable event listener invoke algorithm","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"observable event listener invoke algorithm","type":"dfn","url":"#observable-event-listener-invoke-algorithm"},
"#observable-subscribe-callback": {"displayText":"subscribe callback","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"subscribe callback","type":"dfn","url":"#observable-subscribe-callback"},
"#observable-subscribe-to-an-observable": {"displayText":"subscribe to an observable","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"subscribe to an observable","type":"dfn","url":"#observable-subscribe-to-an-observable"},
"#observable-weak-subscriber": {"displayText":"weak subscriber","export":true,"for_":["Observable"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"weak subscriber","type":"dfn","url":"#observable-weak-subscriber"},
"#subscriber": {"displayText":"Subscriber","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"Subscriber","type":"interface","url":"#subscriber"},
"#subscriber-active": {"displayText":"active","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"active","type":"dfn","url":"#subscriber-active"},
"#subscriber-internal-observers": {"displayText":"internal observers","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"internal observers","type":"dfn","url":"#subscriber-internal-observers"},
"#subscriber-subscription-controller": {"displayText":"subscription controller","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"subscription controller","type":"dfn","url":"#subscriber-subscription-controller"},
"#subscriber-teardown-callbacks": {"displayText":"teardown callbacks","export":true,"for_":["Subscriber"],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"teardown callbacks","type":"dfn","url":"#subscriber-teardown-callbacks"},
"#switchmap-process-next-value-steps": {"displayText":"switchmap process next value steps","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"switchmap process next value steps","type":"dfn","url":"#switchmap-process-next-value-steps"},
"#typedefdef-observableinspectorunion": {"displayText":"ObservableInspectorUnion","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObservableInspectorUnion","type":"typedef","url":"#typedefdef-observableinspectorunion"},
"#typedefdef-observerunion": {"displayText":"ObserverUnion","export":true,"for_":[],"level":"1","normative":true,"shortname":"observable","spec":"observable-1","status":"local","text":"ObserverUnion","type":"typedef","url":"#typedefdef-observerunion"},
"548dbb6b_https://tc39.es/ecma262/#sec-returnifabrupt-shorthands": {"displayText":"!","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"!","type":"dfn","url":"https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"},
"ac8707c1_https://tc39.es/ecma262/#sec-completion-record-specification-type": {"displayText":"normal completion","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"normal completion","type":"dfn","url":"https://tc39.es/ecma262/#sec-completion-record-specification-type"},
"https://dom.spec.whatwg.org#abortsignal-abort-reason": {"displayText":"abort reason","export":true,"for_":["AbortSignal"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"abort reason","type":"dfn","url":"https://dom.spec.whatwg.org#abortsignal-abort-reason"},
"https://dom.spec.whatwg.org#abortsignal-signal-abort": {"displayText":"signal abort","export":true,"for_":["AbortSignal"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"signal abort","type":"dfn","url":"https://dom.spec.whatwg.org#abortsignal-signal-abort"},
"https://dom.spec.whatwg.org#event-listener-capture": {"displayText":"capture","export":true,"for_":["event listener"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"capture","type":"dfn","url":"https://dom.spec.whatwg.org#event-listener-capture"},
"https://dom.spec.whatwg.org#event-listener-once": {"displayText":"once","export":true,"for_":["event listener"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"once","type":"dfn","url":"https://dom.spec.whatwg.org#event-listener-once"},
"https://dom.spec.whatwg.org#event-listener-passive": {"displayText":"passive","export":true,"for_":["event listener"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"passive","type":"dfn","url":"https://dom.spec.whatwg.org#event-listener-passive"},
"https://dom.spec.whatwg.org#event-listener-signal": {"displayText":"signal","export":true,"for_":["event listener"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"signal","type":"dfn","url":"https://dom.spec.whatwg.org#event-listener-signal"},
"https://dom.spec.whatwg.org#event-listener-type": {"displayText":"type","export":true,"for_":["event listener"],"level":"","normative":true,"shortname":"dom","spec":"dom","status":"anchor-block","text":"type","type":"dfn","url":"https://dom.spec.whatwg.org#event-listener-type"},
"https://dom.spec.whatwg.org/#abortcontroller": {"displayText":"AbortController","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"AbortController","type":"interface","url":"https://dom.spec.whatwg.org/#abortcontroller"},
"https://dom.spec.whatwg.org/#abortcontroller-signal": {"displayText":"signal","export":true,"for_":["AbortController"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"signal","type":"dfn","url":"https://dom.spec.whatwg.org/#abortcontroller-signal"},
"https://dom.spec.whatwg.org/#abortcontroller-signal-abort": {"displayText":"signal abort","export":true,"for_":["AbortController"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"signal abort","type":"dfn","url":"https://dom.spec.whatwg.org/#abortcontroller-signal-abort"},
"https://dom.spec.whatwg.org/#abortsignal": {"displayText":"AbortSignal","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"AbortSignal","type":"interface","url":"https://dom.spec.whatwg.org/#abortsignal"},
"https://dom.spec.whatwg.org/#abortsignal-aborted": {"displayText":"aborted","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"aborted","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-aborted"},
"https://dom.spec.whatwg.org/#abortsignal-add": {"displayText":"add","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"add","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-add"},
"https://dom.spec.whatwg.org/#abortsignal-remove": {"displayText":"remove","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"remove","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-remove"},
"https://dom.spec.whatwg.org/#add-an-event-listener": {"displayText":"add an event listener","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"add an event listener","type":"dfn","url":"https://dom.spec.whatwg.org/#add-an-event-listener"},
"https://dom.spec.whatwg.org/#callbackdef-eventlistener": {"displayText":"EventListener","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventListener","type":"callback","url":"https://dom.spec.whatwg.org/#callbackdef-eventlistener"},
"https://dom.spec.whatwg.org/#concept-event-listener": {"displayText":"event listener","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"event listener","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-event-listener"},
"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal": {"displayText":"create a dependent abort signal","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"create a dependent abort signal","type":"dfn","url":"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#event": {"displayText":"Event","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Event","type":"interface","url":"https://dom.spec.whatwg.org/#event"},
"https://dom.spec.whatwg.org/#event-listener-callback": {"displayText":"callback","export":true,"for_":["event listener"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"callback","type":"dfn","url":"https://dom.spec.whatwg.org/#event-listener-callback"},
"https://dom.spec.whatwg.org/#eventdef-abortsignal-abort": {"displayText":"abort","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"abort","type":"event","url":"https://dom.spec.whatwg.org/#eventdef-abortsignal-abort"},
"https://dom.spec.whatwg.org/#eventtarget": {"displayText":"EventTarget","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventTarget","type":"interface","url":"https://dom.spec.whatwg.org/#eventtarget"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"displayText":"fully active","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": {"displayText":"associated Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"associated document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global": {"displayText":"global object","export":true,"for_":["realm"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#microtask": {"displayText":"microtask","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"microtask","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#microtask"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask": {"displayText":"queue a microtask","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a microtask","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask"},
"https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception": {"displayText":"report an exception","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"report an exception","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception"},
"https://infra.spec.whatwg.org/#assert": {"displayText":"assert","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"boolean","type":"dfn","url":"https://infra.spec.whatwg.org/#boolean"},
"https://infra.spec.whatwg.org/#iteration-break": {"displayText":"break","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"break","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-break"},
"https://infra.spec.whatwg.org/#iteration-while": {"displayText":"while","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"while","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-while"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-contain": {"displayText":"exist","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-empty": {"displayText":"empty","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-iterate": {"displayText":"for each","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-remove": {"displayText":"remove","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#map-exists": {"displayText":"exist","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#ordered-set": {"displayText":"ordered set","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"displayText":"append","export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#struct": {"displayText":"struct","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"struct","type":"dfn","url":"https://infra.spec.whatwg.org/#struct"},
"https://infra.spec.whatwg.org/#struct-item": {"displayText":"item","export":true,"for_":["struct","tuple"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#struct-item"},
"https://tc39.es/ecma262/#current-realm": {"displayText":"current realm","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"current realm","type":"dfn","url":"https://tc39.es/ecma262/#current-realm"},
"https://tc39.es/ecma262/#sec-completion-record-specification-type": {"displayText":"throw completion","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"throw completion","type":"dfn","url":"https://tc39.es/ecma262/#sec-completion-record-specification-type"},
"https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values": {"displayText":"Type","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"Type","type":"abstract-op","url":"https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values"},
"https://tc39.es/ecma262/#sec-iterator-records": {"displayText":"Iterator Record","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"iterator record","type":"dfn","url":"https://tc39.es/ecma262/#sec-iterator-records"},
"https://tc39.es/ecma262/#sec-normalcompletion": {"displayText":"NormalCompletion","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"normalcompletion","type":"dfn","url":"https://tc39.es/ecma262/#sec-normalcompletion"},
"https://tc39.es/ecma262/#sec-object-type": {"displayText":"Object","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"object","type":"dfn","url":"https://tc39.es/ecma262/#sec-object-type"},
"https://tc39.es/ecma262/#sec-returnifabrupt-shorthands": {"displayText":"?","export":true,"for_":[],"level":"","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"anchor-block","text":"?","type":"dfn","url":"https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose": {"displayText":"AsyncIteratorClose","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"AsyncIteratorClose","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator": {"displayText":"GetIterator","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"GetIterator","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod": {"displayText":"GetMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"GetMethod","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose": {"displayText":"IteratorClose","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IteratorClose","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete": {"displayText":"IteratorComplete","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IteratorComplete","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext": {"displayText":"IteratorNext","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IteratorNext","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue": {"displayText":"IteratorStepValue","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IteratorStepValue","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue": {"displayText":"IteratorValue","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IteratorValue","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue"},
"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await": {"displayText":"Await","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"Await","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await"},
"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise": {"displayText":"IsPromise","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IsPromise","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise"},
"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols": {"displayText":"%Symbol.asyncIterator%","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"%Symbol.asyncIterator%","type":"interface","url":"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols"},
"https://webidl.spec.whatwg.org#a-promise-rejected-with": {"displayText":"a promise rejected with","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"a promise rejected with","type":"dfn","url":"https://webidl.spec.whatwg.org#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org/#VoidFunction": {"displayText":"VoidFunction","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"VoidFunction","type":"callback","url":"https://webidl.spec.whatwg.org/#VoidFunction"},
"https://webidl.spec.whatwg.org/#a-new-promise": {"displayText":"a new promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a new promise","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"https://webidl.spec.whatwg.org/#a-promise-resolved-with": {"displayText":"a promise resolved with","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise resolved with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"https://webidl.spec.whatwg.org/#an-exception-was-thrown": {"displayText":"an exception was thrown","export":false,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"an exception was thrown","type":"dfn","url":"https://webidl.spec.whatwg.org/#an-exception-was-thrown"},
"https://webidl.spec.whatwg.org/#dfn-callback-function": {"displayText":"callback function","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"callback function","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-callback-function"},
"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled": {"displayText":"react","export":true,"for_":["promise"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"react","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"},
"https://webidl.spec.whatwg.org/#dfn-specific-type": {"displayText":"specific type","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"specific type","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-specific-type"},
"https://webidl.spec.whatwg.org/#dfn-throw": {"displayText":"throw","export":true,"for_":["exception"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"throw","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"https://webidl.spec.whatwg.org/#exceptiondef-rangeerror": {"displayText":"RangeError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"RangeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-rangeerror"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"displayText":"TypeError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-any": {"displayText":"any","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"any","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-any"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"displayText":"undefined","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://webidl.spec.whatwg.org/#idl-unsigned-long-long": {"displayText":"unsigned long long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unsigned long long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"https://webidl.spec.whatwg.org/#invoke-a-callback-function": {"displayText":"invoke","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"invoke","type":"dfn","url":"https://webidl.spec.whatwg.org/#invoke-a-callback-function"},
"https://webidl.spec.whatwg.org/#new": {"displayText":"new","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"new","type":"dfn","url":"https://webidl.spec.whatwg.org/#new"},
"https://webidl.spec.whatwg.org/#reject": {"displayText":"reject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"reject","type":"dfn","url":"https://webidl.spec.whatwg.org/#reject"},
"https://webidl.spec.whatwg.org/#resolve": {"displayText":"resolve","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"resolve","type":"dfn","url":"https://webidl.spec.whatwg.org/#resolve"},
"https://webidl.spec.whatwg.org/#this": {"displayText":"this","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>
<script>/* Boilerplate: script-wpt */
"use strict";
{
let wptData = {
"paths": ["/dom/observable/"],
};

document.addEventListener("DOMContentLoaded", async ()=>{
    if(wptData.paths.length == 0) return;

    const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
    const runs = await (await fetch(runsUrl)).json();

    let testResults = [];
    for(const pathPrefix of wptData.paths) {
        const pathResults = await (await fetch("https://wpt.fyi/api/search", {
            method:"POST",
            headers:{
                "Content-Type":"application/json",
            },
            body: JSON.stringify({
                "run_ids": runs.map(x=>x.id),
                "query": {"path": pathPrefix},
            })
        })).json();
        testResults = testResults.concat(pathResults.results);
    }

    const browsers = runs.map(x=>({name:x.browser_name, version:x.browser_version, passes:0, total: 0}));
    const resultsFromPath = new Map(testResults.map(result=>{
        const testPath = result.test;
        const passes = result.legacy_status.map(x=>[x.passes, x.total]);
        return [testPath, passes];
    }));
    const seenTests = new Set();
    document.querySelectorAll(".wpt-name").forEach(nameEl=>{
        const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
        if(!passData) {
            console.log("Couldn't find test in results:", nameEl);
            return
        }
        const numTests = passData[0][1];
        if(numTests > 1) {
            nameEl.insertAdjacentElement("beforeend",
                mk.small({}, ` (${numTests} tests)`));
        }
        if(passData == undefined) return;
        const resultsEl = mk.span({"class":"wpt-results"},
            ...passData.map((p,i) => mk.span(
            {
                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                "class": "wpt-result",
                "style": `background: conic-gradient(forestgreen ${p[0]/p[1]*360}deg, darkred 0deg);`,
            })),
        );
        nameEl.insertAdjacentElement("afterend", resultsEl);

        // Only update the summary pass/total count if we haven't seen this
        // test before, to support authors listing the same test multiple times
        // in a spec.
        if (!seenTests.has(nameEl.getAttribute("title"))) {
            seenTests.add(nameEl.getAttribute("title"));
            passData.forEach((p,i) => {
                browsers[i].passes += p[0];
                browsers[i].total += p[1];
            });
        }
    });
    const overview = document.querySelector(".wpt-overview");
    if(overview) {
        overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
        document.head.appendChild(mk.style({},
            `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
    }
});

function formatWptResult({name, version, passes, total}) {
    const passRate = passes/total;
    let passClass = "";
    if(passRate == 0)      passClass = "passes-none";
    else if(passRate < .2) passClass = "passes-hardly";
    else if(passRate < .4) passClass = "passes-a-few";
    else if(passRate < .6) passClass = "passes-half";
    else if(passRate < .8) passClass = "passes-lots";
    else if(passRate < 1)  passClass = "passes-most";
    else                   passClass = "passes-all";

    name = name[0].toUpperCase() + name.slice(1);
    const shortVersion = /^\d+/.exec(version);
    const icon = []

    if(name == "Chrome") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/chrome_64x64.png"}));
    if(name == "Edge") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/edge_64x64.png"}));
    if(name == "Safari") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/safari_64x64.png"}));
    if(name == "Firefox") icon.push(mk.img({alt:"", src:"https://wpt.fyi/static/firefox_64x64.png"}));

    return mk.li({"class":passClass},
        mk.nobr({'class':'browser'}, ...icon, ` ${name} ${shortVersion}`),
        mk.br(),
        mk.nobr({'class':'pass-rate'}, `${passes}/${total}`)
    );
}
}
</script>